import{M as Z,h as Ot,i as Dt,j as It,R as Mt,k as Ht,T as Tt,m as ve,n as Pt,o as Vt,p as xt,d as Bt,q as Ut,r as Rt,s as be,t as zt,u as Kt,v as At,w as Nt,L as qt,x as Wt,y as Gt,z as Jt,E as Qt,F as Xt,G as Yt,H as Zt,D as eo,J as to,K as oo,O as no}from"./@arco-design.282d06c8.js";import{c as pe}from"./vue.ffb667bf.js";import{b as ee,u as te}from"./vue-router.a9f5d186.js";import{u as ge,a as ao,b as so,c as ye,d as W,l as ke,_ as G,e as lo,L as ro,f as le,R as uo,D as co,r as io}from"./index.5e564963.js";import{a as po,b as _o,c as fo,d as mo}from"./@vueuse.a7db99fe.js";import{l as ho}from"./lodash.c4b3d061.js";import{c as L,d as A,r as K,x as e,k as vo,a7 as _e,i as bo,o as m,a as x,b,u as o,_ as f,z as j,v as U,s as w,F as Q,A as H,N as R,O as z,Q as ae,h as Se,n as we,H as go,w as $e,m as yo,l as Le,a9 as ko,J as So,q as wo,P as fe,aI as $o,T as Lo,E as Eo,e as me}from"./@vue.6ceb3fa6.js";import{v as Ee}from"./vue-i18n.5fb6db72.js";import{d as oe,c as Fo,e as jo}from"./serial.0b46e76d.js";import{L as Fe,S as Co,I as Oo,F as Do,B as Io,a as Mo,b as Ho}from"./tdesign-vue-next.ed813ef2.js";import{a as he}from"./axios.06033baf.js";import{D as Y,L as ne}from"./tdesign-icons-vue-next.a5366875.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.35d19ede.js";import"./@intlify.02b6985d.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./nprogress.6328d444.js";import"./mitt.550594b0.js";import"./pinia.fa8b6be2.js";import"./vue-demi.0e7683c7.js";import"./@zxing.8654f0db.js";import"./@microsoft.d2aaf3b7.js";import"./vue-matomo.5bdfe9a5.js";import"./lodash-es.18922ecc.js";import"./sortablejs.77296005.js";import"./@popperjs.f3f73334.js";import"./@babel.9b6013fe.js";const je="LoseHu 117 \u5386\u53F2\u7248\u672C",Ce="official",Oe="official",To={name:je,uart:Ce,charset:Oe},Po=Object.freeze(Object.defineProperty({__proto__:null,name:je,uart:Ce,charset:Oe,default:To},Symbol.toStringTag,{value:"Module"})),De="LoseHu 117 \u5386\u53F2\u7248\u672C\u6269\u5BB9\u7248",Ie="losehu",Me="losehu",He=!0,Vo={name:De,uart:Ie,charset:Me,K:He},xo=Object.freeze(Object.defineProperty({__proto__:null,name:De,uart:Ie,charset:Me,K:He,default:Vo},Symbol.toStringTag,{value:"Module"})),Te="LoseHu 118+",Pe="official",Ve="official",Bo={name:Te,uart:Pe,charset:Ve},Uo=Object.freeze(Object.defineProperty({__proto__:null,name:Te,uart:Pe,charset:Ve,default:Bo},Symbol.toStringTag,{value:"Module"})),xe="LoseHu 118+ 2Mbit \u6269\u5BB9\u7248",Be="losehu",Ue="gb2312",Re=!0,ze=!0,Ro={name:xe,uart:Be,charset:Ue,H:Re,sat:ze},zo=Object.freeze(Object.defineProperty({__proto__:null,name:xe,uart:Be,charset:Ue,H:Re,sat:ze,default:Ro},Symbol.toStringTag,{value:"Module"})),Ke="LoseHu 118+ \u6269\u5BB9\u7248",Ae="losehu",Ne="gb2312",qe=!0,Ko={name:Ke,uart:Ae,charset:Ne,K:qe},Ao=Object.freeze(Object.defineProperty({__proto__:null,name:Ke,uart:Ae,charset:Ne,K:qe,default:Ko},Symbol.toStringTag,{value:"Module"})),We="LoseHu 120+ \u6269\u5BB9\u7248",Ge="losehu",Je="gb2312",Qe=!0,Xe=!0,No={name:We,uart:Ge,charset:Je,K:Qe,sat:Xe},qo=Object.freeze(Object.defineProperty({__proto__:null,name:We,uart:Ge,charset:Je,K:Qe,sat:Xe,default:No},Symbol.toStringTag,{value:"Module"})),Ye="LoseHu 124+ 2Mbit \u6269\u5BB9\u7248",Ze="losehu",et="gb2312",tt=!0,ot=!0,nt=!0,Wo={name:Ye,uart:Ze,charset:et,H:tt,sat:ot,newpinyin:nt},Go=Object.freeze(Object.defineProperty({__proto__:null,name:Ye,uart:Ze,charset:et,H:tt,sat:ot,newpinyin:nt,default:Wo},Symbol.toStringTag,{value:"Module"})),at="LoseHu \u5F15\u5BFC\u7A0B\u5E8F",st="losehu",lt="gb2312",rt=!0,ut=!0,ct=!0,Jo={name:at,uart:st,charset:lt,H:rt,sat:ut,newpinyin:ct},Qo=Object.freeze(Object.defineProperty({__proto__:null,name:at,uart:st,charset:lt,H:rt,sat:ut,newpinyin:ct,default:Jo},Symbol.toStringTag,{value:"Module"})),it="LoseHu Doppler",dt="losehu",pt="gb2312",_t=!0,ft=!0,mt=!0,ht=!0,Xo={name:it,uart:dt,charset:pt,H:_t,sat:ft,sat2:mt,newpinyin:ht},Yo=Object.freeze(Object.defineProperty({__proto__:null,name:it,uart:dt,charset:pt,H:_t,sat:ft,sat2:mt,newpinyin:ht,default:Xo},Symbol.toStringTag,{value:"Module"})),vt="LoseHu Patch LTS\uFF08BD8DFN\uFF09",bt="official",gt="official",yt=!0,Zo={name:vt,uart:bt,charset:gt,localmdc:yt},en=Object.freeze(Object.defineProperty({__proto__:null,name:vt,uart:bt,charset:gt,localmdc:yt,default:Zo},Symbol.toStringTag,{value:"Module"})),kt="LoseHu Patch LTS\uFF08BD8DFN\uFF09\u6269\u5BB9\u7248",St="losehu",wt="losehu",$t=!0,Lt=!0,Et=!0,tn={name:kt,uart:St,charset:wt,K:$t,localmdc:Lt,fm30:Et},on=Object.freeze(Object.defineProperty({__proto__:null,name:kt,uart:St,charset:wt,K:$t,localmdc:Lt,fm30:Et,default:tn},Symbol.toStringTag,{value:"Module"})),Ft="Official",nn={name:Ft},an=Object.freeze(Object.defineProperty({__proto__:null,name:Ft,default:nn},Symbol.toStringTag,{value:"Module"}));function sn(){const u=ee(),t=ge();return{logout:async n=>{await t.logout();const r=u.currentRoute.value;Z.success("\u767B\u51FA\u6210\u529F"),u.push({name:n&&typeof n=="string"?n:"login",query:{...u.currentRoute.value.query,redirect:r.name}})}}}const ln=(u,t)=>{const{target:p="_blank",...n}=t||{};window.open(u,p,Object.entries(n).reduce((r,_)=>{const[d,v]=_;return[...r,`${d}=${v}`]},[]).join(","))},rn=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),un=[...ao,...so],cn=un.map(u=>{const{name:t,path:p,meta:n,redirect:r,children:_}=u;return{name:t,path:p,meta:n,redirect:r,children:_}});function dn(){const u=ye(),t=W(),p=L(()=>t.menuFromServer?t.appAsyncMenus:cn);return{menuTree:L(()=>{const r=ho.exports.cloneDeep(p.value);r.sort((d,v)=>(d.meta.order||0)-(v.meta.order||0));function _(d,v){return d?d.map(y=>{var C,I;if(!u.accessRouter(y))return null;if(((C=y.meta)==null?void 0:C.hideChildrenInMenu)||!y.children)return y.children=[],y;y.children=y.children.filter(h=>{var i;return((i=h.meta)==null?void 0:i.hideInMenu)!==!0});const F=_(y.children,v+1);return F.length||v>1?(y.children=F,y):((I=y.meta)==null?void 0:I.hideInMenu)===!1?y:null}).filter(Boolean):null}return _(r,0)})}}function pn(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!vo(u)}const _n=A({emit:["collapse"],setup(){const{t:u}=Ee.exports.useI18n(),t=W(),p=ee(),n=te(),{menuTree:r}=dn(),_=L({get(){return t.device==="desktop"?t.menuCollapse:!1},set(h){t.updateSettings({menuCollapse:h})}}),d=L(()=>t.topMenu),v=K([]),D=K([]),y=h=>{if(rn.test(h.path)){ln(h.path),D.value=[h.name];return}const{hideInMenu:i,activeMenu:s}=h.meta;if(n.name===h.name&&!i&&!s){D.value=[h.name];return}p.push({name:h.name})},F=h=>{const i=[];let s=!1;const a=(S,g)=>{var O;if(S.name===h){s=!0,i.push(...g);return}(O=S.children)!=null&&O.length&&S.children.forEach(l=>{a(l,[...g,l.name])})};return r.value.forEach(S=>{s||a(S,[S.name])}),i};ke(h=>{const{requiresAuth:i,activeMenu:s,hideInMenu:a}=h.meta;if(i&&(!a||s)){const S=F(s||h.name),g=new Set([...S,...v.value]);v.value=[...g],D.value=[s||S[S.length-1]]}},!0);const C=h=>{t.device==="desktop"&&t.updateSettings({menuCollapse:h})},I=()=>{function h(i,s=[]){return i&&i.forEach(a=>{var O;const S=(O=a==null?void 0:a.meta)!=null&&O.icon?()=>{var l;return _e(pe(`<${(l=a==null?void 0:a.meta)==null?void 0:l.icon}/>`))}:null,g=(a==null?void 0:a.children)&&(a==null?void 0:a.children.length)!==0?e(Dt,{key:a==null?void 0:a.name},{default:()=>[h(a==null?void 0:a.children)],icon:S,title:()=>{var l;return _e(pe(u(((l=a==null?void 0:a.meta)==null?void 0:l.locale)||"")))}}):e(It,{key:a==null?void 0:a.name,onClick:()=>y(a)},{default:()=>{var l;return[u(((l=a==null?void 0:a.meta)==null?void 0:l.locale)||"")]},icon:S});s.push(g)}),s}return h(r.value)};return()=>{let h;return e(Ot,{mode:d.value?"horizontal":"vertical",collapsed:_.value,"onUpdate:collapsed":i=>_.value=i,"open-keys":v.value,"onUpdate:open-keys":i=>v.value=i,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":D.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:C},pn(h=I())?h:{default:()=>[h]})}}});const se=G(_n,[["__scopeId","data-v-90632f3f"]]),fn={class:"navbar"},mn={class:"left-side"},hn={key:0},vn={class:"center-side"},bn={class:"right-side"},gn=A({__name:"index",setup(u){const{t}=Ee.exports.useI18n(),p=Object.assign({"/src/drivers/losehu117.json":Po,"/src/drivers/losehu117k.json":xo,"/src/drivers/losehu118.json":Uo,"/src/drivers/losehu118h.json":zo,"/src/drivers/losehu118k.json":Ao,"/src/drivers/losehu120k.json":qo,"/src/drivers/losehu124h.json":Go,"/src/drivers/losehubl.json":Qo,"/src/drivers/losehud.json":Yo,"/src/drivers/lts.json":en,"/src/drivers/ltsk.json":on,"/src/drivers/todo.json":an}),n=W(),r=te();sn();const{changeLocale:_,currentLocale:d}=lo(),{isFullscreen:v,toggle:D}=po(),y=[...ro];L(()=>userStore.avatar);const F=L(()=>n.theme),C=L(()=>n.topMenu&&n.menu),I=_o({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(c){n.toggleTheme(c)}}),h=fo(I),i=()=>{h()},s=K(),a=()=>{const c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.value.dispatchEvent(c)},S=bo("toggleDrawerMenu"),g={"L_BL[0-9][0-9][0-9]":"losehubl.json","LOSEHU.*P.*K":"ltsk.json","LOSEHU.*P.*":"lts.json","LOSEHU.*D":"losehud.json","LOSEHU13[0-9].*HS":"losehu124h.json","LOSEHU13[0-9].*H":"losehu124h.json","LOSEHU13[0-9].*KS":"losehu120k.json","LOSEHU13[0-9].*K":"losehu120k.json","LOSEHU13[0-9].*":"losehu118.json","LOSEHU12[4-9].*HS":"losehu124h.json","LOSEHU12[4-9].*H":"losehu124h.json","LOSEHU12[0-3].*H":"losehu118h.json","LOSEHU12[0-9].*KS":"losehu120k.json","LOSEHU12[0-9].*K":"losehu120k.json","LOSEHU12[0-9].*":"losehu118.json","LOSEHU11[8-9].*H":"losehu118h.json","LOSEHU11[8-9].*K":"losehu118k.json","LOSEHU11[8-9].*":"losehu118.json","LOSEHU11[2-7].*K":"losehu117k.json","LOSEHU11[2-7].*":"losehu117.json",".*":"todo.json"},O=K("V1"),l=()=>{Z.info("\u656C\u8BF7\u671F\u5F85 ComingSoon"),setTimeout(()=>{O.value="V1"},100)},k=async()=>{if(n.connectState==!1){try{n.connectPort&&await oe(n.connectPort)}catch{}let c;if(/Mobi|Android|iPhone/i.test(navigator.userAgent)?alert("\u624B\u673A\u5199\u9891\u5F00\u53D1\u4E2D\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528\u7535\u8111\u8FDE\u63A5\u7535\u53F0\u5199\u9891\uFF01\uFF01\uFF01In the development of mobile, it cannot be used normally. Please use a computer to connect!!!"):c=await Fo(),!c){alert(t("global.connectFail"));return}n.updateSettings({connectPort:c});const $={};Object.keys(p).forEach(V=>{$[V.substring(V.lastIndexOf("/")+1)]=p[V].default});let P=null,B="";try{B=await jo(c)}catch{throw await oe(c),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""}),alert(t("global.handshakeFail")),new Error(t("global.handshakeFail"))}const N={name:"TODO",uart:"official",charset:"official",K:!1,H:!1,localmdc:!1,sat:!1,sat2:!1,newpinyin:!1,fm30:!1};Object.keys(g).some(V=>{if(new RegExp(V).test(B))return P=Object.assign(N,$[g[V]]),!0}),n.updateSettings({connectState:!0,firmwareVersion:B,configuration:P})}else await oe(n.connectPort),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""})};return(c,$)=>{const P=Mt,B=Pt,N=Vt,V=xt,X=Ht,q=Fe,M=Bt,E=Ut,J=Tt,re=Rt,ue=be,ce=ve,ie=zt,de=Kt,jt=At,Ct=Nt;return m(),x("div",fn,[b("div",mn,[e(X,null,{default:o(()=>[e(N,{style:{margin:0,fontSize:"18px"},heading:5},{default:o(()=>[!C.value&&f(n).device==="mobile"?U("",!0):(m(),x("div",hn,[$[3]||($[3]=j(" K5Web \xA0 ",-1)),e(B,{type:"button",size:"mini",modelValue:O.value,"onUpdate:modelValue":$[0]||($[0]=T=>O.value=T),title:"\u786C\u4EF6\u7248\u672C\uFF08HwVersion\uFF09"},{default:o(()=>[e(P,{value:"V1"},{default:o(()=>[...$[1]||($[1]=[j("V1",-1)])]),_:1}),e(P,{onClick:l,value:"V2"},{default:o(()=>[...$[2]||($[2]=[j("V2",-1)])]),_:1})]),_:1},8,["modelValue"])]))]),_:1}),!C.value&&f(n).device==="mobile"?(m(),w(V,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:f(S)},null,8,["onClick"])):U("",!0)]),_:1})]),b("div",vn,[C.value?(m(),w(se,{key:0})):U("",!0)]),b("ul",bn,[!C.value&&f(n).device==="mobile"?(m(),x(Q,{key:0},[b("li",null,[f(t)("navbar.qa")=="Feedback"?(m(),w(q,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[j(H(c.$t("navbar.qa")),1)]),_:1})):(m(),w(q,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[j(H(c.$t("navbar.qa")),1)]),_:1}))]),b("li",null,[R(e(M,{type:"primary",onClick:k},{default:o(()=>[j(H(f(n).connectState?c.$t("navbar.disconnect"):c.$t("navbar.connect")),1)]),_:1},512),[[z,f(r).path!=="/tool/flash"]])]),b("li",null,[e(J,{content:c.$t("settings.language")},{default:o(()=>[e(M,{class:"nav-btn",type:"outline",shape:"circle",onClick:a},{icon:o(()=>[e(E)]),_:1})]),_:1},8,["content"]),e(ce,{trigger:"click",onSelect:f(_)},{content:o(()=>[(m(),x(Q,null,ae(y,T=>e(ue,{key:T.value,value:T.value},{icon:o(()=>[R(e(re,null,null,512),[[z,T.value===f(d)]])]),default:o(()=>[j(" "+H(T.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[b("div",{ref_key:"triggerBtn",ref:s,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),b("li",null,[e(J,{content:F.value==="light"?c.$t("settings.navbar.theme.toDark"):c.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(M,{class:"nav-btn",type:"outline",shape:"circle",onClick:i},{icon:o(()=>[F.value==="dark"?(m(),w(ie,{key:0})):(m(),w(de,{key:1}))]),_:1})]),_:1},8,["content"])])],64)):(m(),x(Q,{key:1},[b("li",null,[f(t)("navbar.qa")=="Feedback"?(m(),w(q,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[j(H(c.$t("navbar.qa")),1)]),_:1})):(m(),w(q,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[j(H(c.$t("navbar.qa")),1)]),_:1}))]),b("li",null,[R(e(M,{type:"primary",onClick:k},{default:o(()=>[j(H(f(n).connectState?c.$t("navbar.disconnect"):c.$t("navbar.connect")),1)]),_:1},512),[[z,f(r).path!=="/tool/flash"&&f(r).path!=="/idea/firmware"]]),R(e(M,{disabled:"disabled",title:"\u5347\u7EA7\u6A21\u5F0F\u65E0\u9700\u8FDE\u63A5",type:"primary",onClick:k},{default:o(()=>[j(H(f(n).connectState?c.$t("navbar.disconnect"):c.$t("navbar.connect")),1)]),_:1},512),[[z,f(r).path=="/tool/flash"||f(r).path=="/idea/firmware"]])]),b("li",null,[e(J,{content:c.$t("settings.language")},{default:o(()=>[e(M,{class:"nav-btn",type:"outline",shape:"circle",onClick:a},{icon:o(()=>[e(E)]),_:1})]),_:1},8,["content"]),e(ce,{trigger:"click",onSelect:f(_)},{content:o(()=>[(m(),x(Q,null,ae(y,T=>e(ue,{key:T.value,value:T.value},{icon:o(()=>[R(e(re,null,null,512),[[z,T.value===f(d)]])]),default:o(()=>[j(" "+H(T.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[b("div",{ref_key:"triggerBtn",ref:s,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),b("li",null,[e(J,{content:F.value==="light"?c.$t("settings.navbar.theme.toDark"):c.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(M,{class:"nav-btn",type:"outline",shape:"circle",onClick:i},{icon:o(()=>[F.value==="dark"?(m(),w(ie,{key:0})):(m(),w(de,{key:1}))]),_:1})]),_:1},8,["content"])]),b("li",null,[e(J,{content:f(v)?c.$t("settings.navbar.screen.toExit"):c.$t("settings.navbar.screen.toFull")},{default:o(()=>[e(M,{class:"nav-btn",type:"outline",shape:"circle",onClick:f(D)},{icon:o(()=>[f(v)?(m(),w(jt,{key:0})):(m(),w(Ct,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])])],64))])])}}});const yn=G(gn,[["__scopeId","data-v-55bca776"]]),kn=A({__name:"index",setup(u){const t=Se({isLhw711:location.hostname=="k5.lhw711.cn",isCN:location.hostname=="k5.vicicode.cn"}),p=()=>{var n;return(n=document.getElementsByTagName("meta").builtTime)==null?void 0:n.content};return(n,r)=>{const _=Fe,d=Co,v=qt;return m(),w(v,{class:"footer"},{default:o(()=>[e(d,null,{default:o(()=>[e(_,{href:"https://github.com/silenty4ng/k5web",target:"_blank"},{default:o(()=>[j("K5Web - V0.1."+H(p()),1)]),_:1}),R(e(_,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[0]||(r[0]=[j("\u8700ICP\u59072024089755\u53F7-1",-1)])]),_:1},512),[[z,t.isCN]]),R(e(_,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[1]||(r[1]=[j("\u9C81ICP\u59072024058690\u53F7-1",-1)])]),_:1},512),[[z,t.isLhw711]])]),_:1})]),_:1})}}});const Sn=G(kn,[["__scopeId","data-v-61069ac8"]]),wn={class:"tag-link"},$n=A({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(u){const t=u,p=ee(),n=te(),r=le(),_=i=>{p.push({...i})},d=L(()=>r.getTabList),v=L(()=>t.itemData.fullPath!==n.fullPath),D=L(()=>t.index===0),y=L(()=>[0,1].includes(t.index)),F=L(()=>t.index===d.value.length-1),C=(i,s)=>{if(r.deleteTag(s,i),t.itemData.fullPath===n.fullPath){const a=d.value[s-1];p.push({name:a.name})}},I=()=>d.value.findIndex(i=>i.fullPath===n.fullPath),h=async i=>{const{itemData:s,index:a}=t,S=[...d.value];if(i==="current")C(s,a);else if(i==="left"){const g=I();S.splice(1,t.index-1),r.freshTabList(S),g<a&&p.push({name:s.name})}else if(i==="right"){const g=I();S.splice(t.index+1),r.freshTabList(S),g>a&&p.push({name:s.name})}else if(i==="others"){const g=d.value.filter((O,l)=>l===0||l===t.index);r.freshTabList(g),p.push({name:s.name})}else i==="reload"?(r.deleteCache(s),await p.push({name:uo,params:{path:n.fullPath}}),r.addCache(s.name)):(r.resetTabList(),p.push({name:co}))};return(i,s)=>{const a=Wt,S=Gt,g=be,O=Jt,l=Qt,k=Xt,c=Yt,$=ve;return m(),w($,{trigger:"contextMenu","popup-max-height":!1,onSelect:h},{content:o(()=>[e(g,{disabled:v.value,value:"reload"},{default:o(()=>[e(S),s[2]||(s[2]=b("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1))]),_:1},8,["disabled","value"]),e(g,{class:"sperate-line",disabled:D.value,value:"current"},{default:o(()=>[e(a),s[3]||(s[3]=b("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(g,{disabled:y.value,value:"left"},{default:o(()=>[e(O),s[4]||(s[4]=b("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(g,{class:"sperate-line",disabled:F.value,value:"right"},{default:o(()=>[e(l),s[5]||(s[5]=b("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(g,{value:"others"},{default:o(()=>[e(k),s[6]||(s[6]=b("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1))]),_:1},8,["value"]),e(g,{value:"all"},{default:o(()=>[e(c),s[7]||(s[7]=b("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1))]),_:1},8,["value"])]),default:o(()=>[b("span",{class:we(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":u.itemData.fullPath===i.$route.fullPath}]),onClick:s[1]||(s[1]=P=>_(u.itemData))},[b("span",wn,H(i.$t(u.itemData.title)),1),b("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:s[0]||(s[0]=go(P=>C(u.itemData,u.index),["stop"]))},[e(a)])],2)]),_:1})}}});const Ln=G($n,[["__scopeId","data-v-10c1deb7"]]),En={class:"tab-bar-container"},Fn={class:"tab-bar-box"},jn={class:"tab-bar-scroll"},Cn={class:"tags-wrap"},On=A({__name:"index",setup(u){const t=W(),p=le(),n=K(),r=L(()=>p.getTabList),_=L(()=>t.navbar?60:0);return $e(()=>t.navbar,()=>{n.value.updatePosition()}),ke(d=>{!d.meta.noAffix&&!r.value.some(v=>v.fullPath===d.fullPath)&&p.updateTabList(d)},!0),yo(()=>{io()}),(d,v)=>{const D=Zt;return m(),x("div",En,[e(D,{ref_key:"affixRef",ref:n,"offset-top":_.value},{default:o(()=>[b("div",Fn,[b("div",jn,[b("div",Cn,[(m(!0),x(Q,null,ae(r.value,(y,F)=>(m(),w(Ln,{key:y.fullPath,index:F,"item-data":y},null,8,["index","item-data"]))),128))])]),v[0]||(v[0]=b("div",{class:"tag-bar-operation"},null,-1))])]),_:1},8,["offset-top"])])}}});const Dn=G(On,[["__scopeId","data-v-2744fb32"]]);function In(u,t,p,n=!1){u.addEventListener&&typeof u.addEventListener=="function"&&u.addEventListener(t,p,n)}function Mn(u,t,p,n=!1){u.removeEventListener&&typeof u.removeEventListener=="function"&&u.removeEventListener(t,p,n)}const Hn=992;function Tn(){return document.body.getBoundingClientRect().width-1<Hn}function Pn(u){const t=W();function p(){if(!document.hidden){const r=Tn();t.toggleDevice(r?"mobile":"desktop"),t.toggleMenu(r)}}const n=mo(p,100);Le(()=>{u&&n()}),ko(()=>{In(window,"resize",n)}),So(()=>{Mn(window,"resize",n)})}const Vn=A({__name:"page-layout",setup(u){const t=le(),p=L(()=>t.getCacheList);return(n,r)=>{const _=wo("router-view");return m(),w(_,null,{default:o(({Component:d,route:v})=>[e(Lo,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[v.meta.ignoreCache?(m(),w(fe(d),{key:v.fullPath})):(m(),w($o,{key:1,include:p.value},[(m(),w(fe(d),{key:v.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),xn={key:0,class:"layout-navbar"},Bn={class:"menu-wrapper"},Un="60px",Rn=A({__name:"default-layout",setup(u){const t=Se({account:"",nickname:"",password:"",password2:"",motto:""}),p=async()=>{const l=await he.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,tab:"login",keep:!1});l.code==1&&d.setInfo({showLogin:!1,name:l.data.userInfo.nickname,accountId:l.data.userInfo.token})},n=async()=>{if(t.password==""||t.account==""||t.nickname==""){Z.error({content:"\u7528\u6237\u540D\u3001\u6635\u79F0\u53CA\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",duration:5*1e3});return}if(t.password!=t.password2){Z.error({content:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4",duration:5*1e3});return}const l=await he.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,nickname:t.nickname,motto:t.motto,tab:"register"});l.code==1&&d.setInfo({showRegister:!1,name:t.nickname,accountId:l.data.userInfo.token})},r=K(!1),_=W(),d=ge(),v=ee(),D=te(),y=ye();Pn(!0);const F=L(()=>_.navbar),C=L(()=>_.menu&&!_.topMenu),I=L(()=>_.hideMenu),h=L(()=>_.footer),i=L(()=>_.menuCollapse?48:_.menuWidth),s=L(()=>_.menuCollapse),a=L(()=>{const l=C.value&&!I.value?{paddingLeft:`${i.value}px`}:{},k=F.value?{paddingTop:Un}:{};return{...l,...k}}),S=l=>{!r.value||_.updateSettings({menuCollapse:l})};$e(()=>d.role,l=>{l&&!y.accessRouter(D)&&v.push({name:"notFound"})});const g=K(!1),O=()=>{g.value=!1};return Eo("toggleDrawerMenu",()=>{g.value=!g.value}),Le(()=>{r.value=!0}),(l,k)=>{const c=Oo,$=Do,P=Io,B=Mo,N=Ho,V=oo,X=eo,q=no,M=to;return m(),w(M,{class:we(["layout",{mobile:f(_).hideMenu}])},{default:o(()=>[e(N,{visible:f(d).showLogin,"onUpdate:visible":k[2]||(k[2]=E=>f(d).showLogin=E),attach:"body",header:l.$t("global.login"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(B,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:p},{default:o(()=>[e($,{name:"account"},{default:o(()=>[e(c,{modelValue:t.account,"onUpdate:modelValue":k[0]||(k[0]=E=>t.account=E),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(f(Y))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,{name:"password"},{default:o(()=>[e(c,{modelValue:t.password,"onUpdate:modelValue":k[1]||(k[1]=E=>t.password=E),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(f(ne))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,null,{default:o(()=>[e(P,{theme:"primary",type:"submit",block:""},{default:o(()=>[j(H(l.$t("global.login")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),e(N,{visible:f(d).showRegister,"onUpdate:visible":k[8]||(k[8]=E=>f(d).showRegister=E),attach:"body",header:l.$t("global.register"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(B,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:n},{default:o(()=>[e($,{name:"account"},{default:o(()=>[e(c,{modelValue:t.account,"onUpdate:modelValue":k[3]||(k[3]=E=>t.account=E),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(f(Y))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,{name:"nickname"},{default:o(()=>[e(c,{modelValue:t.nickname,"onUpdate:modelValue":k[4]||(k[4]=E=>t.nickname=E),clearable:"",placeholder:l.$t("global.nickname")},{"prefix-icon":o(()=>[e(f(Y))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,{name:"password"},{default:o(()=>[e(c,{modelValue:t.password,"onUpdate:modelValue":k[5]||(k[5]=E=>t.password=E),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(f(ne))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,{name:"password2"},{default:o(()=>[e(c,{modelValue:t.password2,"onUpdate:modelValue":k[6]||(k[6]=E=>t.password2=E),type:"password",clearable:"",placeholder:l.$t("global.password2")},{"prefix-icon":o(()=>[e(f(ne))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,{name:"motto"},{default:o(()=>[e(c,{modelValue:t.motto,"onUpdate:modelValue":k[7]||(k[7]=E=>t.motto=E),clearable:"",placeholder:l.$t("global.motto")},{"prefix-icon":o(()=>[e(f(Y))]),_:1},8,["modelValue","placeholder"])]),_:1}),e($,null,{default:o(()=>[e(P,{theme:"primary",type:"submit",block:""},{default:o(()=>[j(H(l.$t("global.register")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),F.value?(m(),x("div",xn,[e(yn)])):U("",!0),e(M,null,{default:o(()=>[e(M,null,{default:o(()=>[C.value?R((m(),w(V,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:s.value,collapsible:!0,width:i.value,style:me({paddingTop:F.value?"60px":""}),"hide-trigger":!0,onCollapse:S},{default:o(()=>[b("div",Bn,[e(se)])]),_:1},8,["collapsed","width","style"])),[[z,!I.value]]):U("",!0),I.value?(m(),w(X,{key:1,visible:g.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:O,title:"K5Web"},{default:o(()=>[e(se)]),_:1},8,["visible"])):U("",!0),e(M,{class:"layout-content",style:me(a.value)},{default:o(()=>[f(_).tabBar?(m(),w(Dn,{key:0})):U("",!0),e(q,null,{default:o(()=>[e(Vn)]),_:1}),h.value?(m(),w(Sn,{key:1})):U("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const ga=G(Rn,[["__scopeId","data-v-aa01284d"]]);export{ga as default};
