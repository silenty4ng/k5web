import{d as Te,g as _e,_ as Ee}from"./index.594063be.js";import{P as Fe,f as Pe,Y as Re,d as Ke,k as Ae,U as Be,Z as Ne,m as Ue,_ as ze}from"./@arco-design.95e0b031.js";import"./vue.24dcbee8.js";import{u as je}from"./vue-router.425aabc5.js";import{u as Me}from"./loading.0f5749b3.js";import{e as ce,a as re,u as fe,f as Ve,h as oe,s as $e,b as ie,g as Le}from"./serial.d615852e.js";import{c as He}from"./chinese-s2t.a9ab083b.js";import{r as se,w as Ge}from"./xlsx.fbaab35d.js";import{I as de,c as P,d as Je,f as Qe,g as We,B as qe,T as Xe}from"./tdesign-vue-next.62a9d0ce.js";import{G as Ye}from"./tdesign-icons-vue-next.514651cc.js";import{d as Ze,h as Se,aa as ke,l as et,c as tt,o as ue,a as at,x as m,u as h,z as R,A as K,e as ne,s as nt,v as rt,_ as we,b9 as ot,b8 as it}from"./@vue.2faf1d8e.js";import{v as st}from"./vue-i18n.4b9acc8b.js";import"./vue-echarts.29561399.js";import"./resize-detector.a8854a64.js";import"./echarts.5b0e6023.js";import"./zrender.ce26131e.js";import"./tslib.c6ba9914.js";import"./nprogress.77f16b3e.js";import"./@intlify.b8ed1d74.js";import"./mitt.550594b0.js";import"./pinia.510425a1.js";import"./vue-demi.1e0b7689.js";import"./axios.234ce069.js";import"./@vueuse.c5c16882.js";import"./aegis-web-sdk.088ecaea.js";import"./@zxing.8654f0db.js";import"./vue-matomo.ed94ba67.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.08dc07e5.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./sortablejs.b2e3c7c4.js";import"./@popperjs.f3f73334.js";const dt=te=>(ot("data-v-d754cb60"),te=te(),it(),te),pt={class:"container"},lt=dt(()=>ne("br",null,null,-1)),ct={name:"SearchTable"},ft=Ze({...ct,setup(te){const{t:u}=st.exports.useI18n(),g=Te(),{loading:he,setLoading:ae}=Me(!1),s={bandwidthOption:{0:"25KHz",1:"12.5KHz"},modeOption:{0:"FM",1:"AM",2:"USB"},powerOptionEng:{0:"Low",1:"Med",2:"High"},powerOption:{0:"\u4F4E",1:"\u4E2D",2:"\u9AD8"},toneOptionEng:{1:"Tone",2:"DTCS(N)",3:"DTCS(I)"},toneOption:{1:"\u4E9A\u97F3\u9891",2:"\u6570\u5B57\u4E9A\u97F3",3:"\u53CD\u5411\u6570\u5B57\u4E9A\u97F3"},CTCSSOption:[67,69.3,71.9,74.4,77,79.7,82.5,85.4,88.5,91.5,94.8,97.4,100,103.5,107.2,110.9,114.8,118.8,123,127.3,131.8,136.5,141.3,146.2,151.4,156.7,159.8,162.2,165.5,167.9,171.3,173.8,177.3,179.9,183.5,186.2,189.9,192.8,196.6,199.5,203.5,206.5,210.7,218.1,225.7,229.1,233.6,241.8,250.3,254.1],DCSOption:[23,25,26,31,32,36,43,47,51,53,54,65,71,72,73,74,114,115,116,122,125,131,132,134,143,145,152,155,156,162,165,172,174,205,212,223,225,226,243,244,245,246,251,252,255,261,263,265,266,271,274,306,311,315,325,331,332,343,346,351,356,364,365,371,411,412,413,423,431,432,445,446,452,454,455,462,464,465,466,503,506,516,523,526,532,546,565,606,612,624,627,631,632,654,662,664,703,712,723,731,732,734,743,754],stepOption:[2.5,5,6.25,10,12.5,25,8.33,.01,.05,.1,.25,.5,1,1.25,9,15,20,30,50,100,125,200,250,500],scrambOption:["1","2","3","4","5","6","7","8","9","10"],pttidOptionEng:["UP CODE","DOWW CODE","UP+DOWN Code","APOLLO QUINDAR"],pttidOption:["\u4E0A\u7EBF\u7801","\u4E0B\u7EBF\u7801","\u4E0A\u7EBF+\u4E0B\u7EBF\u7801","Quindar\u7801"]},t=Se({renderData:Array.from({length:200}).map(e=>({scanlist:[]})),pageSize:15,nowPage:1}),ee=Se({showHide:0,showNotice:!1}),me=e=>{t.renderData=e.newData},pe=je();ke(()=>{u("menu.dashboard")=="CPS"&&(s.powerOption=s.powerOptionEng,s.toneOption=s.toneOptionEng,s.pttidOption=s.pttidOptionEng)}),et(async()=>{var a,o,x,f,O,n,C,S,l,c,p,v,_,I,E,F,w,b,y,B,N,U,z,j,M,V,$,L,H,G,J,Q,W,q,X;if(pe.query.url){const A=await fetch(pe.query.url),Y=(a=A==null?void 0:A.body)==null?void 0:a.getReader();if(Y){const Z=[];for(;;){const{done:d,value:i}=await Y.read();if(d)break;Z.push(...i)}const k=new Uint8Array(Z);var e=se(k);const D=Array.from({length:200}).map(d=>({scanlist:[]}));for(let d=2;d<202;d++)(o=e.Sheets.Sheet1["B"+d])!=null&&o.w&&(D[d-2].name=(x=e.Sheets.Sheet1["B"+d])==null?void 0:x.w),(f=e.Sheets.Sheet1["C"+d])!=null&&f.w&&(D[d-2].bandwidth=Object.keys(s.bandwidthOption).find(i=>{var r;return s.bandwidthOption[i]==((r=e.Sheets.Sheet1["C"+d])==null?void 0:r.w)})),(O=e.Sheets.Sheet1["D"+d])!=null&&O.w&&(D[d-2].rx=(n=e.Sheets.Sheet1["D"+d])==null?void 0:n.w),(C=e.Sheets.Sheet1["E"+d])!=null&&C.w&&(D[d-2].tx=(S=e.Sheets.Sheet1["E"+d])==null?void 0:S.w),(l=e.Sheets.Sheet1["F"+d])!=null&&l.w&&(D[d-2].power=Object.keys(s.powerOption).find(i=>{var r;return s.powerOption[i]==((r=e.Sheets.Sheet1["F"+d])==null?void 0:r.w)})),(c=e.Sheets.Sheet1["G"+d])!=null&&c.w&&(D[d-2].rxTone=Object.keys(s.toneOption).find(i=>{var r;return s.toneOption[i]==((r=e.Sheets.Sheet1["G"+d])==null?void 0:r.w)})),(p=e.Sheets.Sheet1["H"+d])!=null&&p.w&&(D[d-2].rxCTCSS=parseFloat((v=e.Sheets.Sheet1["H"+d])==null?void 0:v.w)),(_=e.Sheets.Sheet1["I"+d])!=null&&_.w&&(D[d-2].rxDCS=parseFloat((I=e.Sheets.Sheet1["I"+d])==null?void 0:I.w)),(E=e.Sheets.Sheet1["J"+d])!=null&&E.w&&(D[d-2].txTone=Object.keys(s.toneOption).find(i=>{var r;return s.toneOption[i]==((r=e.Sheets.Sheet1["J"+d])==null?void 0:r.w)})),(F=e.Sheets.Sheet1["K"+d])!=null&&F.w&&(D[d-2].txCTCSS=parseFloat((w=e.Sheets.Sheet1["K"+d])==null?void 0:w.w)),(b=e.Sheets.Sheet1["L"+d])!=null&&b.w&&(D[d-2].txDCS=parseFloat((y=e.Sheets.Sheet1["L"+d])==null?void 0:y.w)),(B=e.Sheets.Sheet1["M"+d])!=null&&B.w&&(D[d-2].step=parseFloat((N=e.Sheets.Sheet1["M"+d])==null?void 0:N.w)),(U=e.Sheets.Sheet1["N"+d])!=null&&U.w&&(D[d-2].reverse=((z=e.Sheets.Sheet1["N"+d])==null?void 0:z.w)==u("On")),(j=e.Sheets.Sheet1["O"+d])!=null&&j.w&&(D[d-2].scramb=parseFloat((M=e.Sheets.Sheet1["O"+d])==null?void 0:M.w)),(V=e.Sheets.Sheet1["P"+d])!=null&&V.w&&(D[d-2].busy=(($=e.Sheets.Sheet1["P"+d])==null?void 0:$.w)==u("On")),(L=e.Sheets.Sheet1["Q"+d])!=null&&L.w&&(D[d-2].pttid=(H=e.Sheets.Sheet1["Q"+d])==null?void 0:H.w),(G=e.Sheets.Sheet1["R"+d])!=null&&G.w&&(D[d-2].mode=Object.keys(s.modeOption).find(i=>{var r;return s.modeOption[i]==((r=e.Sheets.Sheet1["R"+d])==null?void 0:r.w)})),(J=e.Sheets.Sheet1["S"+d])!=null&&J.w&&(D[d-2].dtmf=((Q=e.Sheets.Sheet1["S"+d])==null?void 0:Q.w)==u("On")),(W=e.Sheets.Sheet1["T"+d])!=null&&W.w&&(((q=e.Sheets.Sheet1["T"+d])==null?void 0:q.w.split(",").indexOf("I"))>=0&&D[d-2].scanlist.push("I"),((X=e.Sheets.Sheet1["T"+d])==null?void 0:X.w.split(",").indexOf("II"))>=0&&D[d-2].scanlist.push("II"));t.renderData=D}}});const De=tt(()=>[{colKey:"drag",title:u("cps.sort"),width:46},{title:"#",colKey:"index",align:"left",width:100},{title:u("cps.name"),colKey:"name",width:250,align:"left",edit:{component:de,props:{clearable:!0},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.bandwidth"),colKey:"bandwidth",align:"left",width:150,cell:(e,{row:a})=>{var o;return(o=s.bandwidthOption[a.bandwidth])!=null?o:""},edit:{component:P,props:{clearable:!0,options:Object.keys(s.bandwidthOption).map(e=>({value:e,label:s.bandwidthOption[e]}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.rx"),colKey:"rx",align:"left",width:200,cell:(e,{row:a})=>parseFloat(a.rx)?parseFloat(a.rx).toFixed(5):void 0,edit:{component:de,props:{clearable:!0},onEdited:e=>{e.newRowData.rx=e.newRowData.rx?e.newRowData.rx:void 0;const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.tx"),colKey:"tx",align:"left",width:200,cell:(e,{row:a})=>parseFloat(a.tx)?parseFloat(a.tx).toFixed(5):void 0,edit:{component:de,props:{clearable:!0},onEdited:e=>{e.newRowData.tx=e.newRowData.tx?e.newRowData.tx:void 0;const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.power"),colKey:"power",align:"left",width:150,cell:(e,{row:a})=>{var o;return(o=s.powerOption[a.power])!=null?o:""},edit:{component:P,props:{clearable:!0,options:Object.keys(s.powerOption).map(e=>({value:e,label:s.powerOption[e]}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.rxToneType"),colKey:"rxTone",align:"left",width:180,cell:(e,{row:a})=>{var o;return(o=s.toneOption[a.rxTone])!=null?o:""},edit:{component:P,props:{clearable:!0,options:Object.keys(s.toneOption).map(e=>({value:e,label:s.toneOption[e]}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.rxToneCTCSS"),colKey:"rxCTCSS",align:"left",width:150,cell:(e,{row:a})=>{var o;return s.CTCSSOption.indexOf(a.rxCTCSS)>=0?(o=a.rxCTCSS)==null?void 0:o.toFixed(1):void 0},edit:{component:P,props:{clearable:!0,options:s.CTCSSOption.map(e=>({value:e,label:e.toFixed(1)}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.rxToneDCS"),colKey:"rxDCS",align:"left",width:150,cell:(e,{row:a})=>s.DCSOption.indexOf(a.rxDCS)>=0?"0"+a.rxDCS:void 0,edit:{component:P,props:{clearable:!0,options:s.DCSOption.map(e=>({value:e,label:"0"+e}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.txToneType"),colKey:"txTone",align:"left",width:180,cell:(e,{row:a})=>{var o;return(o=s.toneOption[a.txTone])!=null?o:""},edit:{component:P,props:{clearable:!0,options:Object.keys(s.toneOption).map(e=>({value:e,label:s.toneOption[e]}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.txToneCTCSS"),colKey:"txCTCSS",align:"left",width:150,cell:(e,{row:a})=>{var o;return s.CTCSSOption.indexOf(a.txCTCSS)>=0?(o=a.txCTCSS)==null?void 0:o.toFixed(1):void 0},edit:{component:P,props:{clearable:!0,options:s.CTCSSOption.map(e=>({value:e,label:e.toFixed(1)}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.txToneDCS"),colKey:"txDCS",align:"left",width:150,cell:(e,{row:a})=>s.DCSOption.indexOf(a.txDCS)>=0?"0"+a.txDCS:void 0,edit:{component:P,props:{clearable:!0,options:s.DCSOption.map(e=>({value:e,label:"0"+e}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.step"),colKey:"step",align:"left",width:150,cell:(e,{row:a})=>{var o;return s.stepOption.indexOf(a.step)>=0?(o=a.step)==null?void 0:o.toFixed(2):void 0},edit:{component:P,props:{clearable:!0,options:s.stepOption.map(e=>({value:e,label:e.toFixed(2)}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.reverse"),colKey:"reverse",align:"left",width:150},{title:u("cps.scramb"),colKey:"scramb",align:"left",width:150,edit:{component:P,props:{clearable:!0,options:s.scrambOption.map(e=>({value:e,label:e}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.busy"),colKey:"busy",align:"left",width:150},{title:u("cps.pttid"),colKey:"pttid",align:"left",width:150,edit:{component:P,props:{clearable:!0,options:s.pttidOption.map(e=>({value:e,label:e}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.mode"),colKey:"mode",align:"left",width:150,cell:(e,{row:a})=>{var o;return(o=s.modeOption[a.mode])!=null?o:""},edit:{component:P,props:{clearable:!0,options:Object.keys(s.modeOption).map(e=>({value:e,label:s.modeOption[e]}))},onEdited:e=>{const a=[...t.renderData];a.splice((t.nowPage-1)*t.pageSize+e.rowIndex,1,e.newRowData),t.renderData=a}}},{title:u("cps.dtmf"),colKey:"dtmf",align:"left",width:150},{title:u("cps.scanlist"),colKey:"scanlist",align:"left",width:150},{title:u("cps.operate"),colKey:"operate",align:"left",width:150}]),le=[50,108,136,174,350,400,470],xe=async()=>{var f,O,n,C;if(g.connectState!=!0){alert(sessionStorage.getItem("noticeConnectK5"));return}await ce(g.connectPort),ae(!0);let e=new Uint8Array(3200);for(let S=0;S<3200;S+=64){const l=await re(g.connectPort,S,64,(f=g.configuration)==null?void 0:f.uart);e.set(l,S)}let a=new Uint8Array(192);for(let S=3424;S<3616;S+=64){const l=await re(g.connectPort,S,64,(O=g.configuration)==null?void 0:O.uart);a.set(l,S-3424)}let o=new Uint8Array(3200);for(let S=3920;S<7120;S+=64){const l=await re(g.connectPort,S,64,(n=g.configuration)==null?void 0:n.uart);o.set(l,S-3920)}const x=[];for(let S=0;S<3200;S+=16){const l=fe(e.subarray(S,S+16)),c=fe(a.subarray(S/16,S/16+1)),p={scanlist:[]};p.rx=l.substr(24,8)!="ffffffff"?parseInt(l.substr(24,8),16)/1e5:void 0,p.rx&&c!="ff"&&c!="0f"?(console.info(l),console.info(c),p.offset=l.substr(16,8)!="00000000"?parseInt(l.substr(16,8),16)/1e5:void 0,p.txcodeflag=l.substr(9,1),p.txcodeflag=="1"&&(p.tx=p.rx+p.offset),p.txcodeflag=="2"&&(p.tx=p.rx-p.offset),p.txTone=parseInt(l.substr(10,1),16)>0?parseInt(l.substr(10,1),16).toString():void 0,p.rxTone=parseInt(l.substr(11,1),16)>0?parseInt(l.substr(11,1),16).toString():void 0,p.txTone=="1"&&(p.txCTCSS=s.CTCSSOption[parseInt(l.substr(12,2),16)]),(p.txTone=="2"||p.txTone=="3")&&(p.txDCS=s.DCSOption[parseInt(l.substr(12,2),16)]),p.rxTone=="1"&&(p.rxCTCSS=s.CTCSSOption[parseInt(l.substr(14,2),16)]),(p.rxTone=="2"||p.rxTone=="3")&&(p.rxDCS=s.DCSOption[parseInt(l.substr(14,2),16)]),p.step=s.stepOption[parseInt(l.substr(2,2),16)],p.scramb=parseInt(l.substr(0,2),16)>0?parseInt(l.substr(0,2),16).toString():void 0,p.power_reverse_busy_width=parseInt(l.substr(6,2),16),p.reverse=!!(p.power_reverse_busy_width>>0&1),p.bandwidth=(p.power_reverse_busy_width>>1&1).toString(),p.power=(p.power_reverse_busy_width>>2&3).toString(),p.busy=!!(p.power_reverse_busy_width>>4&1),p.pttid_dtmf=parseInt(l.substr(4,2),16),p.pttid=s.pttidOption[(p.pttid_dtmf>>1)-1],p.dtmf=!!(p.pttid_dtmf>>0&1),p.mode=parseInt(l.substr(8,1),16).toString(),p.name=Ve(o.subarray(S,S+16),(C=g.configuration)==null?void 0:C.charset),parseInt(c.substr(0,1),16)&8&&p.scanlist.push("I"),parseInt(c.substr(0,1),16)&4&&p.scanlist.push("II")):p.rx=void 0,x.push(p)}t.renderData=x,ae(!1)},Oe=async()=>{var f,O;if(g.connectState!=!0){alert(sessionStorage.getItem("noticeConnectK5"));return}await ce(g.connectPort),ae(!0);let e=new Uint8Array(3200),a=new Uint8Array(200),o=new Uint8Array(3200),x=0;t.renderData.map(n=>{var C,S,l;if(n.rx){let c="";c+=parseInt(n.scramb)>0?parseInt(n.scramb).toString(16).padStart(2,"0"):"00",c+=s.stepOption.indexOf(n.step)>=0?s.stepOption.indexOf(n.step).toString(16).padStart(2,"0"):"00";let p=s.pttidOption.indexOf(n.pttid)+1<<1;p+=n.dtmf?1:0,c+=p.toString(16).padStart(2,"0");let v=n.busy?1<<4:0;switch(v+=n.power<<2,v+=n.bandwidth<<1,v+=n.reverse?1:0,c+=v.toString(16).padStart(2,"0"),c+=n.mode?n.mode.toString(16):"0",n.tx>0&&n.tx>n.rx?c+="1":n.tx>0&&n.tx<n.rx?c+="2":c+="0",c+=parseInt(n.txTone)>0?n.txTone.toString(16):"0",c+=parseInt(n.rxTone)>0?n.rxTone.toString(16):"0",n.txTone){case"1":c+=s.CTCSSOption.indexOf(n.txCTCSS).toString(16).padStart(2,"0");break;case"2":case"3":c+=s.DCSOption.indexOf(n.txDCS).toString(16).padStart(2,"0");break;default:c+="00"}switch(n.rxTone){case"1":c+=s.CTCSSOption.indexOf(n.rxCTCSS).toString(16).padStart(2,"0");break;case"2":case"3":c+=s.DCSOption.indexOf(n.rxDCS).toString(16).padStart(2,"0");break;default:c+="00"}const _=n.tx&&n.rx?Math.abs(parseInt((n.tx*1e5).toFixed(0))-parseInt((n.rx*1e5).toFixed(0))):NaN;c+=Number.isNaN(_)?"00000000":_.toString(16).padStart(8,"0"),c+=parseInt((n.rx*1e5).toFixed(0)).toString(16).padStart(8,"0"),c.indexOf("-1")!=-1&&(c=c.replace(/^(.{10})(.{6})(.*)$/,"$1000000$3")),console.log(c),e.set(oe(c),x);let I=0;((C=n.scanlist)==null?void 0:C.indexOf("I"))>=0&&(I+=8),((S=n.scanlist)==null?void 0:S.indexOf("II"))>=0&&(I+=4),a.set([(I<<4)+le.indexOf(le.reduce((F,w)=>w<n.rx?w:F))],x/16);const E=new Uint8Array(16);E.set($e(n.name?He.t2s(n.name):"",(l=g.configuration)==null?void 0:l.charset).subarray(0,16),0),o.set(E,x)}else e.set(oe("ffffffffffffffffffffffffffffffff"),x),a.set([255],x/16),o.set(oe("ffffffffffffffffffffffffffffffff"),x);x+=16});for(let n=0;n<3200;n+=64)await ie(g.connectPort,n,e.slice(n,n+64),64,(f=g.configuration)==null?void 0:f.uart);await ie(g.connectPort,3424,a,200);for(let n=3920;n<7120;n+=64)await ie(g.connectPort,n,o.slice(n-3920,n-3920+64),64,(O=g.configuration)==null?void 0:O.uart);await Le(g.connectPort),ae(!1)},ge=async e=>{const a=[...t.renderData];a.splice(e,1,{scanlist:[]}),t.renderData=a},Ce=()=>{const e=JSON.stringify(t.renderData),a=new Blob([e],{type:"application/octet-stream"}),o=URL.createObjectURL(a),x=document.createElement("a");x.download="channel.json",x.href=o,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(o)},be=()=>{const e=document.createElement("input");e.type="file",e.onchange=async()=>{const o=await new Blob([e.files[0]],{type:"application/octet-stream"}).text();t.renderData=JSON.parse(o)},e.click()},ye=()=>{const e=document.createElement("a");e.href="/K5Channel.xlsx",u("menu.dashboard")=="CPS"&&(e.href="/K5Channel_EN.xlsx"),e.download="K5Channel.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)},ve=async()=>{var O,n,C,S,l,c,p,v,_,I,E,F,w,b,y,B,N,U,z,j,M,V,$,L,H,G,J,Q,W,q,X,A,Y,Z,k,D,d,i;let e;u("menu.dashboard")=="CPS"?e=await fetch("/K5Channel_EN.xlsx"):e=await fetch("/K5Channel.xlsx");const a=se(await e.arrayBuffer()),o=a.Sheets[a.SheetNames[0]];for(let r=2;r<202;r++)(O=t.renderData[r-2])!=null&&O.name&&(o["B"+r]={},o["B"+r].v=(n=t.renderData[r-2])==null?void 0:n.name),(C=t.renderData[r-2])!=null&&C.bandwidth&&(o["C"+r]={},o["C"+r].v=s.bandwidthOption[(S=t.renderData[r-2])==null?void 0:S.bandwidth]),(l=t.renderData[r-2])!=null&&l.rx&&(o["D"+r]={},o["D"+r].v=(c=t.renderData[r-2])==null?void 0:c.rx),(p=t.renderData[r-2])!=null&&p.tx&&(o["E"+r]={},o["E"+r].v=(v=t.renderData[r-2])==null?void 0:v.tx),(_=t.renderData[r-2])!=null&&_.power&&(o["F"+r]={},o["F"+r].v=s.powerOption[(I=t.renderData[r-2])==null?void 0:I.power]),(E=t.renderData[r-2])!=null&&E.rxTone&&(o["G"+r]={},o["G"+r].v=s.toneOption[(F=t.renderData[r-2])==null?void 0:F.rxTone]),(w=t.renderData[r-2])!=null&&w.rxCTCSS&&(o["H"+r]={},o["H"+r].v=(b=t.renderData[r-2])==null?void 0:b.rxCTCSS),(y=t.renderData[r-2])!=null&&y.rxDCS&&(o["I"+r]={},o["I"+r].v=(B=t.renderData[r-2])==null?void 0:B.rxDCS),(N=t.renderData[r-2])!=null&&N.txTone&&(o["J"+r]={},o["J"+r].v=s.toneOption[(U=t.renderData[r-2])==null?void 0:U.txTone]),(z=t.renderData[r-2])!=null&&z.txCTCSS&&(o["K"+r]={},o["K"+r].v=(j=t.renderData[r-2])==null?void 0:j.txCTCSS),(M=t.renderData[r-2])!=null&&M.txDCS&&(o["L"+r]={},o["L"+r].v=(V=t.renderData[r-2])==null?void 0:V.txDCS),($=t.renderData[r-2])!=null&&$.step&&(o["M"+r]={},o["M"+r].v=(L=t.renderData[r-2])==null?void 0:L.step),(H=t.renderData[r-2])!=null&&H.reverse&&(o["N"+r]={},o["N"+r].v=((G=t.renderData[r-2])==null?void 0:G.reverse)==!0?u("On"):u("Off")),(J=t.renderData[r-2])!=null&&J.scramb&&(o["O"+r]={},o["O"+r].v=(Q=t.renderData[r-2])==null?void 0:Q.scramb),(W=t.renderData[r-2])!=null&&W.busy&&(o["P"+r]={},o["P"+r].v=((q=t.renderData[r-2])==null?void 0:q.busy)==!0?u("On"):u("Off")),(X=t.renderData[r-2])!=null&&X.pttid&&(o["Q"+r]={},o["Q"+r].v=(A=t.renderData[r-2])==null?void 0:A.pttid),(Y=t.renderData[r-2])!=null&&Y.mode&&(o["R"+r]={},o["R"+r].v=s.modeOption[(Z=t.renderData[r-2])==null?void 0:Z.mode]),(k=t.renderData[r-2])!=null&&k.dtmf&&(o["S"+r]={},o["S"+r].v=((D=t.renderData[r-2])==null?void 0:D.dtmf)==!0?u("On"):u("Off")),(d=t.renderData[r-2])!=null&&d.scanlist&&(o["T"+r]={},o["T"+r].v=(i=t.renderData[r-2])==null?void 0:i.scanlist.join(","));const x=new Blob([Ge(a,{type:"buffer"})],{type:"application/octet-stream"}),f=document.createElement("a");f.href=URL.createObjectURL(x),f.download="K5Channel.xlsx",document.body.appendChild(f),f.click(),document.body.removeChild(f)},Ie=()=>{const e=document.createElement("input");e.type="file",e.onchange=async()=>{const a=new Blob([e.files[0]],{type:"application/octet-stream"}),o=new FileReader;o.onload=function(x){var C,S,l,c,p,v,_,I,E,F,w,b,y,B,N,U,z,j,M,V,$,L,H,G,J,Q,W,q,X,A,Y,Z,k,D,d;const f=Array.from({length:200}).map(i=>({scanlist:[]}));var O=(C=x.target)==null?void 0:C.result,n=se(O);for(let i=2;i<202;i++)(S=n.Sheets.Sheet1["B"+i])!=null&&S.w&&(f[i-2].name=(l=n.Sheets.Sheet1["B"+i])==null?void 0:l.w),(c=n.Sheets.Sheet1["C"+i])!=null&&c.w&&(f[i-2].bandwidth=Object.keys(s.bandwidthOption).find(r=>{var T;return s.bandwidthOption[r]==((T=n.Sheets.Sheet1["C"+i])==null?void 0:T.w)})),(p=n.Sheets.Sheet1["D"+i])!=null&&p.w&&(f[i-2].rx=(v=n.Sheets.Sheet1["D"+i])==null?void 0:v.w),(_=n.Sheets.Sheet1["E"+i])!=null&&_.w&&(f[i-2].tx=(I=n.Sheets.Sheet1["E"+i])==null?void 0:I.w),(E=n.Sheets.Sheet1["F"+i])!=null&&E.w&&(f[i-2].power=Object.keys(s.powerOption).find(r=>{var T;return s.powerOption[r]==((T=n.Sheets.Sheet1["F"+i])==null?void 0:T.w)})),(F=n.Sheets.Sheet1["G"+i])!=null&&F.w&&(f[i-2].rxTone=Object.keys(s.toneOption).find(r=>{var T;return s.toneOption[r]==((T=n.Sheets.Sheet1["G"+i])==null?void 0:T.w)})),(w=n.Sheets.Sheet1["H"+i])!=null&&w.w&&(f[i-2].rxCTCSS=parseFloat((b=n.Sheets.Sheet1["H"+i])==null?void 0:b.w)),(y=n.Sheets.Sheet1["I"+i])!=null&&y.w&&(f[i-2].rxDCS=parseFloat((B=n.Sheets.Sheet1["I"+i])==null?void 0:B.w)),(N=n.Sheets.Sheet1["J"+i])!=null&&N.w&&(f[i-2].txTone=Object.keys(s.toneOption).find(r=>{var T;return s.toneOption[r]==((T=n.Sheets.Sheet1["J"+i])==null?void 0:T.w)})),(U=n.Sheets.Sheet1["K"+i])!=null&&U.w&&(f[i-2].txCTCSS=parseFloat((z=n.Sheets.Sheet1["K"+i])==null?void 0:z.w)),(j=n.Sheets.Sheet1["L"+i])!=null&&j.w&&(f[i-2].txDCS=parseFloat((M=n.Sheets.Sheet1["L"+i])==null?void 0:M.w)),(V=n.Sheets.Sheet1["M"+i])!=null&&V.w&&(f[i-2].step=parseFloat(($=n.Sheets.Sheet1["M"+i])==null?void 0:$.w)),(L=n.Sheets.Sheet1["N"+i])!=null&&L.w&&(f[i-2].reverse=((H=n.Sheets.Sheet1["N"+i])==null?void 0:H.w)==u("On")),(G=n.Sheets.Sheet1["O"+i])!=null&&G.w&&(f[i-2].scramb=parseFloat((J=n.Sheets.Sheet1["O"+i])==null?void 0:J.w)),(Q=n.Sheets.Sheet1["P"+i])!=null&&Q.w&&(f[i-2].busy=((W=n.Sheets.Sheet1["P"+i])==null?void 0:W.w)==u("On")),(q=n.Sheets.Sheet1["Q"+i])!=null&&q.w&&(f[i-2].pttid=(X=n.Sheets.Sheet1["Q"+i])==null?void 0:X.w),(A=n.Sheets.Sheet1["R"+i])!=null&&A.w&&(f[i-2].mode=Object.keys(s.modeOption).find(r=>{var T;return s.modeOption[r]==((T=n.Sheets.Sheet1["R"+i])==null?void 0:T.w)})),(Y=n.Sheets.Sheet1["S"+i])!=null&&Y.w&&(f[i-2].dtmf=((Z=n.Sheets.Sheet1["S"+i])==null?void 0:Z.w)==u("On")),(k=n.Sheets.Sheet1["T"+i])!=null&&k.w&&(((D=n.Sheets.Sheet1["T"+i])==null?void 0:D.w.split(",").indexOf("I"))>=0&&f[i-2].scanlist.push("I"),((d=n.Sheets.Sheet1["T"+i])==null?void 0:d.w.split(",").indexOf("II"))>=0&&f[i-2].scanlist.push("II"));t.renderData=f},o.readAsArrayBuffer(a)},e.click()};return(e,a)=>{const o=Pe,x=_e,f=Re,O=Ke,n=Ae,C=Be,S=Ne,l=Ue,c=ze,p=Je,v=Qe,_=We,I=qe,E=Xe,F=Fe;return ue(),at("div",pt,[m(o,{visible:ee.showNotice,"onUpdate:visible":a[0]||(a[0]=w=>ee.showNotice=w),onOk:Oe,onCancel:a[1]||(a[1]=w=>ee.showNotice=!1)},{title:h(()=>[R(K(e.$t("menu.cps.writeNoticeTitle")),1)]),default:h(()=>[ne("div",null,K(e.$t("menu.cps.writeNoticeContent")),1)]),_:1},8,["visible"]),m(x,{items:[e.$t("menu.dashboard"),e.$t("menu.cps.channel")]},null,8,["items"]),m(F,{class:"general-card"},{title:h(()=>[ne("span",{onClick:a[2]||(a[2]=()=>{ee.showHide+=1})},K(e.$t("menu.cps.channel")+e.$t("global.onStart")),1)]),default:h(()=>[m(c,{style:{"margin-bottom":"16px"}},{default:h(()=>[m(C,{span:12},{default:h(()=>[m(n,null,{default:h(()=>[m(O,{type:"primary",onClick:xe},{icon:h(()=>[m(f)]),default:h(()=>[R(" "+K(e.$t("cps.onDeviceRead")),1)]),_:1}),m(O,{onClick:a[3]||(a[3]=w=>ee.showNotice=!0)},{icon:h(()=>[m(f)]),default:h(()=>[R(" "+K(e.$t("cps.onDeviceWrite")),1)]),_:1})]),_:1})]),_:1}),m(C,{span:12,style:{"text-align":"right"}},{default:h(()=>[m(n,null,{default:h(()=>[ee.showHide>=5?(ue(),nt(l,{key:0},{content:h(()=>[m(O,{style:{width:"200px",margin:"10px","margin-bottom":"0px"},type:"primary",onClick:Ce},{default:h(()=>[R(" \u4FDD\u5B58 ")]),_:1}),lt,m(O,{style:{width:"200px",margin:"10px"},onClick:be},{default:h(()=>[R(" \u52A0\u8F7D ")]),_:1})]),default:h(()=>[m(O,null,{default:h(()=>[R(" \u4FDD\u5B58/\u52A0\u8F7D\uFF08\u5DF2\u5E9F\u5F03\uFF09"),m(S)]),_:1})]),_:1})):rt("",!0),m(O,{type:"text",onClick:ye},{default:h(()=>[R(K(e.$t("cps.downloadImportTemplate")),1)]),_:1}),m(O,{type:"primary",onClick:Ie},{default:h(()=>[R(K(e.$t("cps.import")),1)]),_:1}),m(O,{onClick:ve},{default:h(()=>[R(K(e.$t("cps.export")),1)]),_:1})]),_:1})]),_:1})]),_:1}),m(E,{class:"ttable",loading:we(he),size:"medium",columns:De.value,data:t.renderData,pagination:{defaultPageSize:t.pageSize,total:t.renderData.length,defaultCurrent:1,pageSizeOptions:[15,30,50,100,200]},onChange:a[4]||(a[4]=w=>{t.pageSize=w.pagination.pageSize,t.nowPage=w.pagination.current}),bordered:"","lazy-load":"",headerAffixedTop:{offsetTop:60},hover:!0,"drag-sort":"row-handler",onDragSort:me},{drag:h(({row:w,rowIndex:b})=>[ne("span",null,[m(we(Ye))])]),index:h(({row:w,rowIndex:b})=>[R(K((t.nowPage-1)*t.pageSize+b+1),1)]),reverse:h(({row:w,rowIndex:b})=>[m(p,{modelValue:w.reverse,"onUpdate:modelValue":y=>w.reverse=y},null,8,["modelValue","onUpdate:modelValue"])]),busy:h(({row:w,rowIndex:b})=>[m(p,{modelValue:w.busy,"onUpdate:modelValue":y=>w.busy=y},null,8,["modelValue","onUpdate:modelValue"])]),dtmf:h(({row:w,rowIndex:b})=>[m(p,{modelValue:w.dtmf,"onUpdate:modelValue":y=>w.dtmf=y},null,8,["modelValue","onUpdate:modelValue"])]),scanlist:h(({row:w,rowIndex:b})=>[m(_,{modelValue:w.scanlist,"onUpdate:modelValue":y=>w.scanlist=y},{default:h(()=>[m(v,{key:"I",label:"I",value:"I"}),m(v,{key:"II",label:"II",value:"II"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),operate:h(({row:w,rowIndex:b})=>[m(I,{theme:"default",variant:"dashed",onClick:y=>ge((t.nowPage-1)*t.pageSize+b)},{default:h(()=>[R(K(e.$t("cps.clear")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","columns","data","pagination"])]),_:1})])}}});const qt=Ee(ft,[["__scopeId","data-v-d754cb60"]]);export{qt as default};
