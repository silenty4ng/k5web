import{d as B,g as E,_ as S}from"./index.986328c2.js";import{a6 as A,P as F,a7 as R,d as T,k as D,O as P,U,_ as V}from"./@arco-design.95e0b031.js";import"./vue.24dcbee8.js";import{i as H,e as N,b as I,g as M}from"./serial.d615852e.js";import{o as z}from"./tdesign-vue-next.62a9d0ce.js";import{d as O,h as L,o as G,a as K,x as n,u as o,e as k,A as m,z as f,N as y,O as C,D as j}from"./@vue.2faf1d8e.js";import"./vue-echarts.29561399.js";import"./resize-detector.a8854a64.js";import"./echarts.5b0e6023.js";import"./zrender.ce26131e.js";import"./tslib.c6ba9914.js";import"./vue-router.425aabc5.js";import"./nprogress.77f16b3e.js";import"./@intlify.b8ed1d74.js";import"./mitt.550594b0.js";import"./pinia.510425a1.js";import"./vue-demi.1e0b7689.js";import"./axios.234ce069.js";import"./vue-i18n.4b9acc8b.js";import"./@vueuse.c5c16882.js";import"./aegis-web-sdk.088ecaea.js";import"./@zxing.8654f0db.js";import"./vue-matomo.ed94ba67.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.08dc07e5.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./tdesign-icons-vue-next.514651cc.js";import"./sortablejs.b2e3c7c4.js";import"./@popperjs.f3f73334.js";const q={class:"container"},x=["innerHTML"],J={name:"Chi"},Q=O({...J,setup(W){const u=B(),r=L({status:"\u70B9\u51FB\u5199\u5165\u6309\u94AE\u5199\u5165\u5B57\u5E93\u5230\u8BBE\u5907<br/><br/>",eepromType:"",showHide:0,lang:"Simplified_Chinese"}),g=async(e=0,t)=>{var _;await N(u.connectPort);for(let s=e;s<t.length+e;s+=128)await I(u.connectPort,s,t.slice(s-e,s-e+128),t.slice(s-e,s-e+128).length,(_=u.configuration)==null?void 0:_.uart),r.status=r.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A"+((s-e)/t.length*100).toFixed(1)+"%<br/>",j(()=>{const p=document==null?void 0:document.getElementById("statusArea");p&&(p.scrollTop=p==null?void 0:p.scrollHeight)});r.status=r.status+"\u5199\u5165\u8FDB\u5EA6\uFF1A100.0%<br/>",await M(u.connectPort)},v=async(e=1)=>{var _,s,p,w,b,h;if(u.connectState!=!0){alert(sessionStorage.getItem("noticeConnectK5"));return}if(((_=u.configuration)==null?void 0:_.uart)=="official"){alert(sessionStorage.getItem("noticeVersionNoSupport"));return}r.status=r.status+"\u6B63\u5728\u4E0B\u8F7D\u5B57\u5E93...<br />";let t;if(e==4){(s=u.configuration)!=null&&s.newpinyin?t=await fetch("/pinyin_plus.bin"):t=await fetch("/pinyin.bin");const l=t.body.getReader(),i=[];for(;;){const{done:c,value:a}=await l.read();if(c)break;i.push(...a)}const d=new Uint8Array(i);await g(131072,d);return}if(e==5){const l=await H(u.connectPort,(p=u.configuration)==null?void 0:p.uart);if(l!=262144&&l!=524288){r.status=r.status+"\u53EA\u652F\u6301 2Mbit \u4EE5\u4E0A EEPROM \u5199\u5165<br/>";return}t=await fetch("/ssb.bin");const i=t.body.getReader(),d=[];for(;;){const{done:a,value:$}=await i.read();if(a)break;d.push(...$)}const c=new Uint8Array(d);await g(246312,c);return}if(e==1){if(((w=u.configuration)==null?void 0:w.charset)=="losehu"){t=await fetch("/old_font.bin");const l=t.body.getReader(),i=[];for(;;){const{done:c,value:a}=await l.read();if(c)break;i.push(...a)}const d=new Uint8Array(i);await g(8192,d);return}if(((b=u.configuration)==null?void 0:b.charset)=="gb2312"){t=await fetch("/new_font_k.bin");const l=t.body.getReader(),i=[];for(;;){const{done:c,value:a}=await l.read();if(c)break;i.push(...a)}const d=new Uint8Array(i);await g(9344,d);return}}if(e==6)if(((h=u.configuration)==null?void 0:h.charset)=="gb2312"){t=await fetch("/new_font_k_f.bin");const l=t.body.getReader(),i=[];for(;;){const{done:c,value:a}=await l.read();if(c)break;i.push(...a)}const d=new Uint8Array(i);await g(9344,d);return}else alert("\u4E0D\u652F\u6301\u7684\u7248\u672C")};return(e,t)=>{const _=E,s=A,p=R,w=T,b=z,h=D,l=P,i=F,d=U,c=V;return G(),K("div",q,[n(_,{items:[e.$t("menu.list"),e.$t("menu.font")]},null,8,["items"]),n(c,{gutter:20,align:"stretch"},{default:o(()=>[n(d,{span:24},{default:o(()=>[n(i,{class:"general-card"},{title:o(()=>[k("span",{onClick:t[0]||(t[0]=()=>{r.showHide+=1})},m(e.$t("menu.font")+e.$t("global.onStart")),1)]),default:o(()=>[n(h,null,{default:o(()=>[n(b,{bordered:"",style:{width:"420px"}},{header:o(()=>[f(m(e.$t("tool.fontwrite"))+" ",1),k("div",null,[n(p,{type:"button",size:"mini",modelValue:r.lang,"onUpdate:modelValue":t[1]||(t[1]=a=>r.lang=a)},{default:o(()=>[n(s,{value:"Simplified_Chinese"},{default:o(()=>[f(m(e.$t("tool.Simplified_Chinese")),1)]),_:1}),n(s,{value:"Traditional_Chinese"},{default:o(()=>[f(m(e.$t("tool.Traditional_Chinese")),1)]),_:1})]),_:1},8,["modelValue"])])]),default:o(()=>[k("div",null,[y(n(w,{onClick:t[2]||(t[2]=a=>v(1))},{default:o(()=>[f(m(e.$t("tool.writefontwrite")),1)]),_:1},512),[[C,r.lang=="Simplified_Chinese"]]),y(n(w,{onClick:t[3]||(t[3]=a=>v(6))},{default:o(()=>[f(m(e.$t("tool.writefontwrite")),1)]),_:1},512),[[C,r.lang=="Traditional_Chinese"]])])]),_:1}),n(b,{bordered:""},{header:o(()=>[f(m(e.$t("tool.pinyinwrite")),1)]),default:o(()=>[n(h,null,{default:o(()=>[n(w,{onClick:t[4]||(t[4]=a=>v(4))},{default:o(()=>[f(m(e.$t("tool.writepinyin")),1)]),_:1})]),_:1})]),_:1}),n(b,{bordered:""},{header:o(()=>[f(m(e.$t("tool.ssbpatch")),1)]),default:o(()=>[n(h,null,{default:o(()=>[n(w,{onClick:t[5]||(t[5]=a=>v(5))},{default:o(()=>[f(m(e.$t("tool.writessbpatch")),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(l),k("div",{id:"statusArea",style:{height:"20em","background-color":"var(--color-bg-3)",color:"var(--color-text-3)",overflow:"auto",padding:"20px"},innerHTML:r.status},null,8,x)]),_:1})]),_:1})]),_:1})])}}});const Rt=S(Q,[["__scopeId","data-v-c809b00a"]]);export{Rt as default};
