import{c as $r}from"./@intlify.02b6985d.js";var ar={exports:{}};(function(sr,Jr){((Ke,$e)=>{sr.exports=$e()})($r,function(){var Ke,$e;function Je(e){this.name="__st"+(1e9*Math.random()>>>0)+Ke+"__",e!=null&&e.forEach(this.add,this),Ke+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(this===null)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}}}),window.WeakSet||(Ke=Date.now()%1e9,Je.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},Je.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},Je.prototype.has=function(e){return!!e[this.name]},$e=Je,Object.defineProperty(window,"WeakSet",{value:function(e){return new $e(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((r=arguments[n])!=null)for(var r=Object(r),o=Object.keys(Object(r)),i=0,a=o.length;i<a;i++){var s=o[i],l=Object.getOwnPropertyDescriptor(r,s);l!=null&&l.enumerable&&(t[s]=r[s])}return t}});var Jt=function(e,t){return(Jt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,r){n.__proto__=r}:function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}))(e,t)},k=function(){return(k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ue(e,t,n,r){return new(n=n||Promise)(function(o,i){function a(c){try{l(r.next(c))}catch(u){i(u)}}function s(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?o(c.value):((u=c.value)instanceof n?u:new n(function(d){d(u)})).then(a,s)}l((r=r.apply(e,t||[])).next())})}function He(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){var u=[l,c];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,(u=o?[2&u[0],o.value]:u)[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=0<(o=i.trys).length&&o[o.length-1])||u[0]!==6&&u[0]!==2)){i=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3]))i.label=u[1];else if(u[0]===6&&i.label<o[1])i.label=o[1],o=u;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(u)}}u=t.call(e,i)}catch(d){u=[6,d],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function ye(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var w,U,X,cr=/_?t(\d)?(imestamp)?=\d+&?/g,zt=["aegis.qq.com","tamaegis.com","/aegis-sdk","rumt-","/flog.core.min.js","pingfore.qq.com","pingfore.tencent.com","zhiyan.tencent-cloud.net","h.trace.qq.com","btrace.qq.com","beacon.qq.com","dmplog.qq.com","qq.com/report","svibeacon.onezapp.com","cube.weixinbridge.com","doubleclick.net","pcmgrmonitor.3g.qq.com","tdm.qq.com","report.qqweb.qq.com","tpstelemetry.tencent.com","galileotelemetry.tencent.com","insight.cloud.tencent.com","facebook.com","facebook.net","google","yahoo.com","twitter.com","ga-audiences","report.idqqimg.com","arms-retcode.aliyuncs.com","px.effirst.com","sentry","baidu.com","hot-update.json","u.c.b.r.o.w.s.e.r","report.url.cn","sockjs-node","m3u8","flv"],ur=["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Failed to execute 'transaction'","window.indexedDB.deleteDatabase is not a function"],Qt=["ext1","ext2","ext3","ext4","ext5","ext6","ext7","ext8","ext9","ext10","level","trace","tag","seq","code"],lr=["static","fetch"],F="unknown";(y=w=w||{}).INFO_ALL="-1",y.API_RESPONSE="1",y.INFO="2",y.ERROR="4",y.PROMISE_ERROR="8",y.AJAX_ERROR="16",y.SCRIPT_ERROR="32",y.IMAGE_ERROR="64",y.CSS_ERROR="128",y.CONSOLE_ERROR="256",y.MEDIA_ERROR="512",y.RET_ERROR="1024",y.PAGE_LOAD="1025",y.SLOW_PAGE_LOAD="1026",y.SLOW_NET_REQUEST="1027",y.ASSERT_REQUEST="1028",y.SLOW_ASSET_REQUEST="1029",y.CLICK_EVENT="1030",y.true="1031",y.BLANK_SCREEN="1032",y.REPORT="2048",y.PV="4096",y.EVENT="8192",y.SPEED_EVENT="8193",y.PAGE_NOT_FOUND_ERROR="16384",y.WEBSOCKET_ERROR="32768",y.BRIDGE_ERROR="65536",y.LAZY_LOAD_ERROR="131072",(y=U=U||{}).LOG="log",y.SPEED="speed",y.PERFORMANCE="performance",y.OFFLINE="offline",y.WHITE_LIST="whiteList",y.VITALS="vitals",y.PV="pv",y.CUSTOM_PV="customPV",y.EVENT="event",y.CUSTOM="custom",y.SDK_ERROR="sdkError",y.SET_DATA="setData",y.LOAD_PACKAGE="loadPackage",(y=X=X||{}).production="production",y.development="development",y.gray="gray",y.pre="pre",y.daily="daily",y.local="local",y.test="test",y.others="others",be.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},be.prototype.on=function(e,t,n){var r;if(n===void 0&&(n=0),this)return(r=this.eventsList[e])||(this.eventsList[e]=[],r=this.eventsList[e]),this.indexOf(r,t)===-1&&r.push({name:e,type:n||0,callback:t}),this},be.prototype.one=function(e,t){this.on(e,t,1)},be.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch{}}return null}},be.prototype.clear=function(){this.eventsList={}};var we,fr=be,dr=function(e){if(!e||e.length===0)return"{}";e=Array.isArray(e)?e:[e];var t=Array.from(new Set(e.flatMap(function(r){return Object.keys(r)}))),n={};return t.forEach(function(r){n[r]=e.map(function(o){return o[r]||""})}),n.count=e.length,nn(n)};function be(){var e=this;this.emit=function(t,n){if(e){var r;if((o=e.eventsList[t])!=null&&o.length)for(var o=o.slice(),i=0;i<o.length;i++){r=o[i];try{var a=r.callback.apply(e,[n]);if(r.type===1&&e.remove(t,r.callback),a===!1)break}catch(s){throw s}}return e}},this.eventsList={}}(y=we=we||{})[y.number=-1]="number",y.string="";function ze(e,t){return typeof e=="number"||typeof e=="string"?e:t?we.string:we.number}function Ee(e,t){return typeof e=="string"?e.split("?")[t?1:0]||"":e}function Yt(e,t){return t===void 0&&(t=2048),String(e).replace(cr,"").slice(0,t)}function Qe(e){return typeof e=="string"&&/^\//.test(e)?(location==null?void 0:location.protocol)==="https:":/^https/.test(e)}function Zt(e,t,n){var r,o,i;try{if(typeof(t==null?void 0:t.retCodeHandler)=="function")return{code:(i=(o=t.retCodeHandler(e,n==null?void 0:n.url,n==null?void 0:n.ctx,n==null?void 0:n.payload)||{}).code)===void 0?F:i,isErr:o.isErr};if(!(e=typeof e=="string"?JSON.parse(e):e))return{code:F,isErr:!1};typeof((r=t==null?void 0:t.ret)==null?void 0:r.join)=="function"&&(Ze=[].concat(t.ret.map(function(s){return s.toLowerCase()})));var a=Object.getOwnPropertyNames(e).filter(function(s){return Ze.indexOf(s.toLowerCase())!==-1});return a.length?{code:""+(i=(i=e[a[0]])!=="\u672A\u77E5"&&i!==""?i:F),isErr:i!==0&&i!=="0"&&i!==F}:{code:F,isErr:!1}}catch{return{code:F,isErr:!1}}}function De(e,t,n){try{var r=typeof t=="function"?t(e,n==null?void 0:n.url,n==null?void 0:n.ctx)||"":e;return Tt(r).slice(0,10240)}catch{return""}}function Re(e,t){return typeof e!="string"||!e||t&&-1<e.indexOf(t)||wr.test(e)||zt.some(function(n){return-1<e.indexOf(n)})}function Ye(e,t){var n,r=[],o=e.config;return e.lifeCycle.on("destroy",function(){r.length=0}),function(i,a){Array.isArray(i)?r=r.concat(i):r.push(i),t&&r.length>=t||e.sendNow&&0<r.length?(r=rn(r),a(r.splice(0,r.length)),n&&clearTimeout(n)):(n&&clearTimeout(n),n=setTimeout(function(){n=null,0<(r=rn(r)).length&&a(r.splice(0,r.length))},o.delay))}}function pr(e,t){return Array.isArray(e)?t(e.map(function(n){return r=k(k({},n),{msg:typeof n.msg=="string"?n.msg:[].concat(n.msg).map(se).join(" ")}),Qt.forEach(function(o){r[o]||delete r[o]}),r;var r})):t([k(k({},e),{msg:typeof e.msg=="string"?e.msg:se(e.msg)})])}function hr(e,t){return function(n,r){var o,i,a,s=Array.isArray(n),l=s?n:[n],c=(e.lifeCycle.emit("beforeRequest",n),e.config.beforeRequest);(l=typeof c=="function"?l.map(function(u){try{var d=c({logs:u,logType:t});return(d==null?void 0:d.logType)===t&&d!=null&&d.logs?d.logs:d!==!1&&u}catch{return u}}).filter(function(u){return u!==!1}):l).length&&(o=l,n=Qt,!Array.isArray(o)||o.length<=1||(i=[],a=[],!(a=typeof n=="string"?[n]:n))||a.length<=0||(a.forEach(function(u){o.forEach(function(d){d!=null&&d[u]&&i.push(u)})}),0<i.length&&(o=o.map(function(u){var d={};return i.forEach(function(f){d[f]=""}),k(k({},d),u)}))),l=o,r(s?l:l[0]))}}function en(e){return function(t,n){e.lifeCycle.emit("modifyRequest",t);var r=e.config.modifyRequest;if(typeof r=="function")try{var o=r(t);typeof o=="object"&&"url"in o&&(t=o)}catch(i){console.error(i)}n(t)}}function tn(e){return function(t,n){(r=e.lifeCycle)!=null&&r.emit("afterRequest",t);var r=(e.config||{}).afterRequest;typeof r=="function"&&r(t)===!1||n(t)}}var gr=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/x-javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video","video/mp2t"],mr=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|ts|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|html|htm|shtml|shtm|)$/i,Ze=["ret","retcode","code","errcode"],Rt=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+` 
  Error.stack: `+n.stack;if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},se=function(e){if(typeof e=="string")return e;try{return e instanceof Error?(JSON.stringify(e,Rt(),2)||"undefined").replace(/"/gim,""):JSON.stringify(e,Rt(),2)||"undefined"}catch(t){return`error happen when aegis stringify: 
 `+t.message+` 
 `+t.stack}},nn=function(e){if(typeof e=="string")return e;try{return JSON.stringify(e,Rt())||"undefined"}catch(t){return`error happen when aegis stringify: 
 `+t.message+` 
 `+t.stack}},Tt=function(e,t){t===void 0&&(t=3);var n,r,o,i="";return Array.isArray(e)?(i+="[",n=e.length,e.forEach(function(a,s){i=(i+=typeof a=="object"&&1<t?Tt(a,t-1):yr(a))+(s===n-1?"":",")}),i+="]"):e instanceof Object?(i="{",r=Object.keys(e),o=r.length,r.forEach(function(a,s){typeof e[a]=="object"&&1<t?i+='"'+a+'":'+Tt(e[a],t-1):i+=vr(a,e[a]),i+=s===o-1||s<o-1&&e[r[s+1]]===void 0?"":","}),i+="}"):i+=e,i},vr=function(e,t){var n=typeof t,r="";return n=="string"||n=="object"?r+='"'+e+'":"'+t+'"':typeof t=="function"?r+='"'+e+'":"function '+t.name+'"':typeof t=="symbol"?r+='"'+e+'":"symbol"':typeof t!="number"&&n!="boolean"||(r+='"'+e+'": '+t),r},yr=function(e){var t=typeof e;return""+(t=="undefined"||t=="symbol"||t=="function"?"null":t=="string"||t=="object"?'"'+e+'"':e)},wr=/data:(image|text|application|font)\/.*;base64/,rn=function(e){return e.filter(function(t,n){return t.type!=="static"||!e.find(function(r,o){return t.url===r.url&&t.status===200&&n<o})})},on=function(e){e.level===w.INFO_ALL&&(e.level=w.INFO)},he={},Te={},St=function(e){return he[e]||(he[e]=setTimeout(function(){Te[e]={},he[e]=null},6e4)),he[e]},br=function(e){return(Array.isArray(e)?e:[e]).map(function(t){return Object.getOwnPropertyNames(t).reduce(function(n,r){return r!=="ctx"&&(n[r]=t[r]),n},{level:w.INFO,msg:""})})},an=function(e){return function(t){return e.sendPipeline([function(n,r){return r({url:e.config.url||"",data:dr(br(n)),method:"post",contentType:"application/json",type:U.LOG,log:n,requestConfig:{timeout:5e3},success:function(){var o=e.config.onReport;typeof o=="function"&&n.forEach(function(i){o(i)}),typeof r=="function"&&r([])}})}],U.LOG)(t)}},et={generateTraceId:sn(16),generateSpanId:sn(8)},tt=Array(32);function sn(e){return function(){for(var t=0;t<2*e;t++)tt[t]=Math.floor(16*Math.random())+48,58<=tt[t]&&(tt[t]+=39);return String.fromCharCode.apply(null,tt.slice(0,2*e))}}function cn(){return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,function(e){return(e^(16*Math.random()&15)>>e/4).toString(16)})}function Ot(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return(e==="x"?t:3&t|8).toString(16)})}function Er(e){for(var t,n,r,o="",i=0,a=(e=String(e)).length%3;i<e.length;){if(255<(t=e.charCodeAt(i++))||255<(n=e.charCodeAt(i++))||255<(r=e.charCodeAt(i++)))throw new TypeError("Failed to execute 'btoa': The string to be encoded contains characters outside of the Latin1 range.");o+=ce.charAt((t=t<<16|n<<8|r)>>18&63)+ce.charAt(t>>12&63)+ce.charAt(t>>6&63)+ce.charAt(63&t)}return a?o.slice(0,a-3)+"===".substring(a):o}function Rr(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!Tr.test(e))throw new TypeError("Failed to execute 'atob': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,o="",i=0;i<e.length;)t=ce.indexOf(e.charAt(i++))<<18|ce.indexOf(e.charAt(i++))<<12|(n=ce.indexOf(e.charAt(i++)))<<6|(r=ce.indexOf(e.charAt(i++))),o+=n===64?String.fromCharCode(t>>16&255):r===64?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o}function xt(e){var t,n="";return n=typeof e=="object"&&(t=(e=((r,o)=>{for(var i=0;i<o.length;i++){var a=o[i],s=r[a]||typeof r.get=="function"&&r.get(a);if(s)return[a,s]}return["",""]})(e,Object.keys(un)))[0])?un[t](e[1]):n}function Se(e){if(e&&e.reduce&&e.length)return e.length===1?function(t,n){e[0](t,n||ln)}:e.reduce(function(t,n){return function(r,o){return o===void 0&&(o=ln),t(r,function(i){return n==null?void 0:n(i,o)})}});throw new TypeError("createPipeline need at least one function param")}function Lt(e,t){Object.getOwnPropertyNames(e).forEach(function(n){typeof e[n]=="function"&&n!=="constructor"&&(t?t[n]=n==="sendPipeline"?function(){return function(){}}:function(){}:e[n]=function(){})})}function Me(){return window.performance!==void 0&&typeof performance.getEntriesByType=="function"&&typeof performance.now=="function"}function H(e){return Lr.indexOf(e)!==-1}var ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Tr=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Sr=(ie.prototype.generate=function(e,t,n){if(t===void 0&&(t={}),this.url=e,!this.isUrlIgnored()&&this.isUrlInTraceUrls()&&this.traceType){switch(this.traceType){case"traceparent":this.traceId=this.createTraceparent();break;case"b3":this.traceId=this.createB3();break;case"sw8":this.traceId=this.createSw8(n);break;case"sentry-trace":this.traceId=this.createSentryTrace();break;default:return console.warn("this trace key "+this.traceType+" is not supported"),void(this.traceId="")}return t[this.traceType]&&(this.traceId=t[this.traceType]),{name:this.traceType,value:this.traceId}}},ie.prototype.createTraceparent=function(){var e=et.generateSpanId();return"00-"+et.generateTraceId()+"-"+e+"-0"+this.traceFlag.toString(16)},ie.prototype.createB3=function(){var e=et.generateSpanId();return et.generateTraceId()+"-"+e+"-"+this.traceFlag},ie.prototype.createSw8=function(r){var t=typeof btoa=="function"?btoa:Er,r=r||{},n=r.host,n=n===void 0?"":n,r=r.pathname,r=r===void 0?"":r,o=Ot(),i=Ot();return"1-"+String(t(i))+"-"+String(t(o))+"-1-"+String(t("aegis"))+"-"+String(t("1.41.3"))+"-"+String(t(encodeURI(r)))+"-"+String(t(n))},ie.prototype.createSentryTrace=function(){var e=cn().substring(16);return cn()+"-"+e+"-"+this.traceFlag},ie.prototype.isUrlIgnored=function(){if(Array.isArray(this.ignoreUrls)&&this.ignoreUrls.length!==0)for(var e=0,t=this.ignoreUrls;e<t.length;e++){var n=t[e];if(this.urlMatches(this.url,n))return!0}return!1},ie.prototype.isUrlInTraceUrls=function(){if(!this.urls)return!0;if(Array.isArray(this.urls)){if(this.urls.length===0)return!1;for(var e=0,t=this.urls;e<t.length;e++){var n=t[e];if(this.urlMatches(this.url,n))return!0}}return!1},ie.prototype.urlMatches=function(e,t){return typeof t=="string"?e===t:!!e.match(t)},ie),un={sw8:function(n){var t=typeof atob=="function"?atob:Rr,n=n.split("-")[1];return n?t(n):""},traceparent:function(e){return e.split("-")[1]},b3:function(e){return e.split("-")[0]},"sentry-trace":function(e){return e.split("-")[0]}},ln=function(){},y=(O.use=function(e){O.installedPlugins.indexOf(e)===-1&&e.aegisPlugin&&O.installedPlugins.push(e)},O.unuse=function(e){e=O.installedPlugins.indexOf(e),e!==-1&&O.installedPlugins.splice(e,1)},O.prototype.init=function(e){this.setConfig(e);for(var t=0;t<O.installedPlugins.length;t++)try{O.installedPlugins[t].patch(this)}catch(n){this.sendSDKError(n)}this.lifeCycle.emit("onInited")},O.prototype.destroy=function(e){e===void 0&&(e=!1);var t,n,r=O.instances.indexOf(this);r!==-1&&O.instances.splice(r,1);for(var o=O.installedPlugins.length-1;0<=o;o--)try{O.installedPlugins[o].unpatch(this)}catch(a){this.sendSDKError(a)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(a){n[a].writable&&(t[a]=null)}),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&Lt(i,this),i=Object.getPrototypeOf(i););O.instances.length===0&&(r=Object.getPrototypeOf(this).constructor,Lt(r),Lt(O))}},O.prototype.setConfig=function(u){Object.assign(this.config,u);var u=this.config,t=u.id,n=u.uin,r=u.version,o=u.ext1,i=u.ext2,a=u.ext3,s=u.aid,c=u.env,l=c===void 0?"production":c,c=u.pageUrl,u=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==s;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.41.3",this.bean.aid=s||"",this.bean.env=(()=>{switch(l){case X.production:case X.development:case X.gray:case X.pre:case X.daily:case X.local:case X.test:case X.others:return 1;default:return}})()?l:X.others,c&&this.extendBean("from",encodeURIComponent(c.slice(0,2048))),o&&this.extendBean("ext1",encodeURIComponent(o)),i&&this.extendBean("ext2",encodeURIComponent(i)),a&&this.extendBean("ext3",encodeURIComponent(a)),u&&this.lifeCycle.emit("onConfigChange",this.config),this.config},O.prototype.extendBean=function(e,t){this.bean[e]=t},O.prototype.send=function(e,t,n){var r=this;return Se([en(this),function(o,i){r.request(o,function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];i({isErr:!1,result:a,logType:o.type,logs:o.log}),t!=null&&t.apply(void 0,a)},function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];i({isErr:!0,result:a,logType:o.type,logs:o.log}),n!=null&&n.apply(void 0,a)})},tn(this)])(e)},O.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(n,r){r({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(se(n))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.41.3)",addBean:!1,method:"get",type:U.SDK_ERROR,log:n})}],U.SDK_ERROR)(e)},O.prototype.sendPipeline=function(e,t){var n,r=this;return Se(ye([function(o,i){if(typeof n.config.random!="number"&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||i(o);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,i(o);n.isHidden=!0}},hr(n=this,t)],e,[en(this),function(o,i){r.request(o,function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l=!1;-1<(""+a[r.failRequestCount=0]).indexOf("403 forbidden")&&(l=!0,r.destroy()),i({isErr:l,result:a,logType:o==null?void 0:o.type,logs:o==null?void 0:o.log}),(l=o==null?void 0:o.success)!=null&&l.call.apply(l,ye([o],a))},function(){for(var a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];60<=++r.failRequestCount&&r.destroy(),-1<(""+s[0]).indexOf("403 forbidden")&&r.destroy(),i({isErr:!0,result:s,logType:o==null?void 0:o.type,logs:o==null?void 0:o.log}),(a=o==null?void 0:o.fail)!=null&&a.call.apply(a,ye([o],s))})},tn(this)]))},O.prototype.validateRange=function(e){return 0<=e&&e<=127?e:-1},O.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:w.INFO,msg:e};e.length===1&&e[0].msg&&Object.assign(n,k({},e[0]),{level:w.INFO}),this.normalLogPipeline(n)},O.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:w.INFO_ALL,msg:e};e.length===1&&e[0].msg&&Object.assign(n,k({},e[0]),{level:w.INFO_ALL}),this.normalLogPipeline(n)},O.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:w.REPORT,msg:e};e.length===1&&e[0].msg&&Object.assign(n,k({},e[0])),this.normalLogPipeline(n)},O.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:w.ERROR,msg:e};e.length===1&&e[0].msg&&Object.assign(n,k({},e[0]),{level:w.ERROR}),this.normalLogPipeline(n)},O.prototype.reportEvent=function(e){e&&((e=typeof e=="string"?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?(typeof e.name!="string"&&(console.warn("reportEvent params name must be string"),e.name=String(e.name)),this.eventPipeline(e)):console.warn("reportEvent params error"))},O.prototype.reportT=function(p){var t=p.name,n=p.duration,r=p.ext1,r=r===void 0?"":r,o=p.ext2,o=o===void 0?"":o,i=p.ext3,i=i===void 0?"":i,a=p.ext4,s=p.ext5,l=p.ext6,c=p.ext7,u=p.ext8,d=p.ext9,f=p.ext10,p=p.from;if(typeof t=="string"&&typeof n=="number"&&typeof r=="string"&&typeof o=="string"&&typeof i=="string"){if(!(n<0||2147483646<n))return this.submitCustomTime(t,n,r,o,i,a===void 0?"":a,s===void 0?"":s,l===void 0?"":l,c===void 0?"":c,u===void 0?"":u,d===void 0?"":d,f===void 0?"":f,p===void 0?"":p);console.warn("reportTime: duration must between 0 and 2147483646")}else console.warn("reportTime: params error")},O.prototype.reportTime=function(e,t){if(typeof e=="object")return this.reportT(e);typeof e=="string"?typeof t=="number"?t<0||2147483646<t?console.warn("reportTime: duration must between 0 and 2147483646"):(this.submitCustomTime(e,t),this.normalLogPipeline({level:w.SPEED_EVENT,msg:"key:"+e+`
 duration:`+t,errorMsg:""})):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},O.prototype.time=function(e){typeof e=="string"?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},O.prototype.timeEnd=function(e){typeof e=="string"?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},O.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},O.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},O.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},Object.defineProperty(O.prototype,"__version__",{get:function(){return"1.41.3"},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"LogType",{get:function(){return w},enumerable:!1,configurable:!0}),O.prototype.reportPv=function(e){e&&console.warn("reportPv is deprecated, please use reportEvent")},O.prototype.submitCustomTime=function(e,t,n,r,o,i,a,s,l,c,u,d,f){e={name:e,duration:t,ext1:String(n||this.config.ext1||"").slice(0,1024),ext2:String(r||this.config.ext2||"").slice(0,1024),ext3:String(o||this.config.ext3||"").slice(0,1024),ext4:i||this.config.ext4,ext5:a||this.config.ext5,ext6:s||this.config.ext6,ext7:l||this.config.ext7,ext8:c||this.config.ext8,ext9:u||this.config.ext9,ext10:d||this.config.ext10,from:f||void 0},this.customTimePipeline(e)},O.version="1.41.3",O.instances=[],O.logType=w,O.environment=X,O.installedPlugins=[],O),_=(K.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},K.prototype.unpatch=function(e){var t=this.instances.indexOf(e);t!==-1&&(this.instances.splice(t,1),this.instances.length===0)&&this.uninstall(e)},K.prototype.countInstance=function(){return this.instances.length},K.prototype.uninstall=function(e){var t;(t=(t=this.option)==null?void 0:t.destroy)!=null&&t.apply(this,[e])},K.prototype.walk=function(e){var t=this;this.instances.forEach(function(n){var r=t.canUse(n);r&&e(n,r)})},K.prototype.canUse=function(e){return e=this.getConfig(e),!(!e||typeof e!="object")||!!e},K.prototype.getConfig=function(e){return(e=e.config)==null?void 0:e[this.name]},K.prototype.exist=function(e){return this.instances.indexOf(e)===-1},K.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,(t=(t=this.option)==null?void 0:t.init)==null)||t.call(this.option,this.getConfig(e))},K.prototype.triggerOnNewAegis=function(e){var t;(t=(t=this.option)==null?void 0:t.onNewAegis)!=null&&t.call(this.option,e,this.getConfig(e))},K),Or=new _({name:"aid",aid:"",init:function(e){try{var t=e!==!0&&e||window.localStorage.getItem("AEGIS_ID");t||(t=Ot(),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch{}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),fn=function(e){var t;return e.payload?(t={},Object.keys(e).forEach(function(n){n!=="payload"&&(t[n]=e[n])}),t):e},nt=new _({name:"reportAssetSpeed"}),xr=nt=new _({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;Me()&&(setTimeout(function(){t.collectSuccessLog(e),t.collectFailLog(e)},5e3),performance.onresourcetimingbufferfull=function(){typeof performance.clearResourceTimings=="function"&&(t.collectCur=0,performance.clearResourceTimings())})},processLog:function(e,r){var n=r.duration||0,o=r.transferSize||0,a=1e3<n,r=["ASSET_REQUEST: "+r.url,"status: "+r.status,"duration: "+n+"ms","type: "+r.type,"domainLookup: "+r.domainLookup+"ms","connectTime: "+r.connectTime+"ms","transferSize: "+(0<o?o+"bytes":"unknown")].filter(Boolean).join(`

`),o=e.isWhiteList&&e.config.assetLog,i=e.config.slowAssetLog&&a,a={level:a?e.LogType.SLOW_ASSET_REQUEST:e.LogType.ASSERT_REQUEST,msg:r,ext1:n.toString()||"",errorMsg:""};(o||i)&&e.normalLogPipeline(a)},publish:function(e,t){var n=this;this.$walk(function(r){r===t&&(r.speedLogPipeline(e),Array.isArray(e)?e.forEach(n.processLog):n.processLog(t,e))})},publishMany:function(e,t){for(var n=t.config,r=0,o=e.length;r<o;r++){var i=e[r];this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)===-1||Re(i.name,n.hostUrl)||this.publish(this.generateLog(i,n),t)}},collectSuccessLog:function(e){var t,n,r=this;typeof window.PerformanceObserver=="function"?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver(function(o){r.publishMany(o.getEntries(),e)})).observe({entryTypes:[this.collectEntryType]}),e.lifeCycle.on("destroy",function(){nt.countInstance()===0&&t.disconnect()})):(n=setInterval(function(){var o=performance.getEntriesByType(r.collectEntryType),i=o.slice(r.collectCur);r.collectCur=o.length,r.publishMany(i,e)},3e3),e.lifeCycle.on("destroy",function(){nt.countInstance()===0&&clearInterval(n)}))},collectFailLog:function(e){function t(o){var i,a;o&&(o=o.target||o.srcElement,!(i=(o==null?void 0:o.src)||(o==null?void 0:o.href))||typeof i!="string"||-1<window.location.href.indexOf(i)||(o=typeof((o=r.api)==null?void 0:o.resourceTypeHandler)=="function"?(o=r.api)==null?void 0:o.resourceTypeHandler(i):"",a=performance.getEntriesByType(n.collectEntryType).find(function(s){return s.name===i}),Re(i,r.hostUrl))||(a={url:Yt(i),status:400,duration:Number(((a==null?void 0:a.duration)||0).toFixed(2)),method:"get",type:o||"static",isHttps:Qe(i),urlQuery:Ee(i,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},n.publish(a,e)))}var n=this,r=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){nt.countInstance()===0&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,n){var n=typeof((r=n.api)==null?void 0:r.resourceTypeHandler)=="function"?(r=n.api)==null?void 0:r.resourceTypeHandler(e.name):"",r=e.transferSize;return{url:Yt(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:n||"static",isHttps:Qe(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:Ee(e.name,!0),domainLookup:ze(e.domainLookupEnd-e.domainLookupStart),connectTime:ze(e.connectEnd-e.connectStart),transferSize:0<r?r:-1}},collectNotReportedLog:function(e){var t,n;Me()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,typeof window.PerformanceObserver!="function")&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0))},destroy:function(){this.option.publish=function(){}}}),Lr=window.navigator.userAgent.toLowerCase(),S={};function K(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function O(e){var t,n,r,o,i,a,s,l,c,u,d,f,p,g,T=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:60,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,reportLoadPackageSpeed:!0,hostUrl:"https://rumt-zh.com",env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",performanceUrlForHippy:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new fr,this.bean={},this.normalLogPipeline=Se([Ye(this,5),pr,function(h,m){var v=t.config;m(h=h.map(function(E){var R,b=v.maxLength||10240;try{if(!E.msg||E.msg.length<=b)return E;E.msg=(R=E.msg)==null?void 0:R.substring(0,b)}catch{E.msg=se(E.msg).substring(0,v.maxLength)}return E}))},(g=(t=this).config,function(h,m){var v=typeof g.repeat=="number"?g.repeat:60;if(v<=0)return m(h);var E=(g==null?void 0:g.id)+"_error",R=Te[E]||{};m(h.filter(function(b){if(b.level===w.ERROR||b.level===w.PROMISE_ERROR||b.level===w.AJAX_ERROR||b.level===w.SCRIPT_ERROR||b.level===w.IMAGE_ERROR||b.level===w.CSS_ERROR||b.level===w.MEDIA_ERROR||b.level===w.RET_ERROR||b.level===w.BRIDGE_ERROR||b.level===w.PAGE_NOT_FOUND_ERROR||b.level===w.WEBSOCKET_ERROR||b.level===w.LAZY_LOAD_ERROR){if(b=b.msg.slice(0,200),R[b]>v)return he[E]||St(E),!1;R[b]=1+~~R[b],Te[E]=R}return!0}))}),(f=this.lifeCycle.emit,p=this.config,function(h,m){var v,E=p.logCreated;return typeof E=="function"?(v=h.filter(function(R){return E(R)!==!1}),f("beforeWrite",v),m(v)):(f("beforeWrite",h),m(h))}),(d=this,setTimeout(function(){var v=d.config,m=v.pvUrl,h=m===void 0?"":m,m=v.spa,v=-1<["web-sdk","mp-sdk"].indexOf("web-sdk");h&&(v&&!m||!v)&&d.sendPipeline([function(E,R){R({url:h,type:U.PV})}],U.PV)(null)},100),function(h,m){m(h)}),(c=l=s=!1,u=[],(i=this).lifeCycle.on("onConfigChange",function(){a&&clearTimeout(a),a=setTimeout(function(){var h,m;!c&&i.config&&(c=!0,h=i.config.whiteListUrl,(m=h===void 0?"":h)&&i.sendPipeline([function(v,E){E({url:m,type:U.WHITE_LIST,success:function(R){l=!0;try{var b=R.data||JSON.parse(R),L=b.retcode,N=b.result,C=N===void 0?{}:N,q=(L===0&&(s=C.is_in_white_list,i.isWhiteList=s,0<=C.rate)&&C.rate<=1&&(i.config.random=C.rate,i.isGetSample=!1),i.isWhiteList&&u.length?an(i)(u.splice(0),function(){}):!i.isWhiteList&&u.length&&(u.length=0),i.config.onWhitelist);typeof q=="function"&&q(s)}catch{}},fail:function(){l=!0}})}],U.WHITE_LIST)(null),c=!1)},i.config.uin?50:500)}),i.lifeCycle.on("destroy",function(){u.length=0}),function(h,m){var v;s||(v=(v=i.config)==null?void 0:v.api)!=null&&v.reportRequest?m(h.concat(u.splice(0)).map(function(E){return on(E),E})):(v=h.filter(function(E){return E.level!==w.INFO&&E.level!==w.API_RESPONSE?(on(E),!0):(l||(u.push(E),200<=u.length&&(u.length=200)),!1)})).length&&m(v)}),function(h,m){try{var v=h.filter(function(b){return[w.ERROR,w.PROMISE_ERROR,w.AJAX_ERROR,w.SCRIPT_ERROR,w.IMAGE_ERROR,w.CSS_ERROR,w.MEDIA_ERROR,w.WEBSOCKET_ERROR,w.BRIDGE_ERROR,w.BLANK_SCREEN,w.RET_ERROR,w.PAGE_NOT_FOUND_ERROR,w.LAZY_LOAD_ERROR].includes(b.level)}),E=(v.length&&T.lifeCycle.emit("errorOccurred",v),h.forEach(function(b){["ext1","ext2","ext3"].forEach(function(L){b[L]&&typeof b[L]=="string"&&(b[L]=b[L].slice(0,1024))}),["ext4","ext5","ext6","ext7","ext8","ext9","ext10"].forEach(function(L){b[L]&&typeof b[L]!="string"&&(b[L]=String(b[L]))})}),JSON.parse(JSON.stringify(h))),R=(T.lifeCycle.emit("beforeReport",E),T.config.beforeReport);(h=typeof R=="function"?h.filter(function(b){return R(b)!==!1}):h).length&&m(h)}catch{}},an(this)]),this.eventPipeline=Se([Ye(this,10),(o=this,function(h){o.sendPipeline([function(m,v){var E=m.map(function(R){return{name:R.name,ext1:String(R.ext1||o.config.ext1||"").slice(0,1024),ext2:String(R.ext2||o.config.ext2||"").slice(0,1024),ext3:String(R.ext3||o.config.ext3||"").slice(0,1024),ext4:String(R.ext4||o.config.ext4||""),ext5:String(R.ext5||o.config.ext5||""),ext6:String(R.ext6||o.config.ext6||""),ext7:String(R.ext7||o.config.ext7||""),ext8:String(R.ext8||o.config.ext8||""),ext9:String(R.ext9||o.config.ext9||""),ext10:String(R.ext10||o.config.ext10||"")}});v({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(E)),type:U.EVENT,log:m})}],U.EVENT)(h)})]),this.customTimePipeline=Se([Ye(this,10),(r=this,function(h){return r.sendPipeline([function(m,v){v({url:r.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:m})),type:U.CUSTOM,log:m})}],U.CUSTOM)(h)})]),this.timeMap={},this.failRequestCount=0,this.config=(n=this.config,typeof(e=(e=e.hostUrl)===void 0?"https://rumt-zh.com":e)!="string"&&(e="https://rumt-zh.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.performanceUrlForHippy=n.performanceUrlForHippy||e+"/speed/hippyPerformance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),O.instances.push(this)}function ie(e,t,n,r){n===void 0&&(n=null),this.traceType=e,this.ignoreUrls=t,this.urls=n,this.traceFlag=r==null?1:Number(!!r)}S.macos=function(){return H("mac")},S.ios=function(){return S.iphone()||S.ipod()||S.ipad()},S.iphone=function(){return!S.windows()&&H("iphone")},S.ipod=function(){return H("ipod")},S.ipad=function(){var e=navigator.platform==="MacIntel"&&1<navigator.maxTouchPoints;return H("ipad")||e},S.android=function(){return!S.windows()&&H("android")},S.androidPhone=function(){return S.android()&&H("mobile")},S.androidTablet=function(){return S.android()&&!H("mobile")},S.blackberry=function(){return H("blackberry")||H("bb10")},S.blackberryPhone=function(){return S.blackberry()&&!H("tablet")},S.blackberryTablet=function(){return S.blackberry()&&H("tablet")},S.windows=function(){return H("windows")},S.windowsPhone=function(){return S.windows()&&H("phone")},S.windowsTablet=function(){return S.windows()&&H("touch")&&!S.windowsPhone()},S.fxos=function(){return(H("(mobile")||H("(tablet"))&&H(" rv:")},S.fxosPhone=function(){return S.fxos()&&H("mobile")},S.fxosTablet=function(){return S.fxos()&&H("tablet")},S.meego=function(){return H("meego")},S.cordova=function(){return window.cordova&&location.protocol==="file:"},S.nodeWebkit=function(){return typeof window.process=="object"},S.mobile=function(){return S.androidPhone()||S.iphone()||S.ipod()||S.windowsPhone()||S.blackberryPhone()||S.fxosPhone()||S.meego()},S.tablet=function(){return S.ipad()||S.androidTablet()||S.blackberryTablet()||S.windowsTablet()||S.fxosTablet()},S.desktop=function(){return!S.tablet()&&!S.mobile()};function dn(){return{host:new URL(location.href).host,pathname:location.pathname}}function je(e,t,n){return t!=null&&t.length&&typeof e=="object"?t.reduce(function(r,o){var i=window.Headers&&e instanceof Headers?e.get(o):e[o];return i?r+(r===""?"":`

`)+n+" header "+o+": "+i:r},""):""}function rt(e,t){return e&&["null","undefined"].indexOf(e)===-1?t+": "+e:""}function Pt(i,t,n){t===void 0&&(t="");var r,o,i=typeof((o=i.api)==null?void 0:o.resourceTypeHandler)=="function"?(o=i.api)==null?void 0:o.resourceTypeHandler(n):"";return lr.indexOf(i)===-1&&(r=t===void 0?"":t,o=(n===void 0?"":n).split("?")[0],i=mr.test(o)||gr.some(function(a){return String(r).indexOf(a)!==-1})?"static":"fetch"),i}function pn(e,t){return e?w.AJAX_ERROR:t?w.RET_ERROR:w.API_RESPONSE}function hn(e){return!!e&&1e3<e}function ot(e,t){return(e=e.api)!=null&&e.usePerformanceTiming&&typeof t.url=="string"&&(e=(e=performance.getEntriesByName(t.url))==null?void 0:e.pop(),e)?{url:t.url,isHttps:Qe(t.url),method:t.method,type:t.type,status:t.status,duration:Number(e.duration.toFixed(2)),nextHopProtocol:e.nextHopProtocol||"",domainLookup:ze(e.domainLookupEnd-e.domainLookupStart),connectTime:ze(e.connectEnd-e.connectStart)}:{url:t.url,isHttps:Qe(t.url),method:t.method,type:t.type,status:t.status,duration:Number(t.duration.toFixed(2)),nextHopProtocol:"",domainLookup:we.number,connectTime:we.number}}function gn(){return window.location.href}function Pr(e){return(e=(t=>{var n="",r=t.nodeType;if(r===1||r===9||r===11){if(typeof t.textContent=="string")return t.textContent;for(var o=t.firstChild;o;o=o.nextSibling)n+=Pn(t)}else if(r===3||r===4)return t.nodeValue;return n})(e))?e.replace(/^\s+|\s+$/g,""):""}var mn,vn,kt,Ct,V,it,at,ue,qe,yn,st,Oe,wn,At,It,bn,Nt,_t,En=!(S.isIE=function(){return"ActiveXObject"in window}),le=[],Rn=/^\/[^/]/,Tn=!1,Y=[],kr=(new _({name:"reportApiSpeed"}),new _({name:"reportApiSpeed",override:!1,onNewAegis:function(e){var t,n;this.override||(this.override=!0,(n=e.config.api)!=null&&n.injectTraceHeader&&(this.traceRequestHeader=new Sr(n.injectTraceHeader,(t=n==null?void 0:n.injectTraceIgnoreUrls)!=null?t:[],n==null?void 0:n.injectTraceUrls,n==null?void 0:n.traceFlag)),this.overrideFetch(e.config,e),this.overrideXhr(e.config,e))},overrideFetch:function(e,t){var n=this,r=e.api,r={name:this.name,traceRequestHeader:r!=null&&r.injectTraceHeader?this.traceRequestHeader:null,then:function(a,s,l,c,u){var d,f;Re(l,e.hostUrl)||(d=a.headers?a.headers.get("content-type"):"",(f=Pt(e,d||"",l))==="fetch"?a.clone().text().then(function(p){var g,T=a.status<=0||400<=a.status,b=((b=e.api)==null?void 0:b.reqHeaders)||[],h=je(c==null?void 0:c.headers,b,"req"),b=((b=e.api)==null?void 0:b.resHeaders)||[],m=je(a.headers,b,"res"),v=xt(c==null?void 0:c.headers),b=Zt(p,e.api,{url:l,ctx:a,payload:c==null?void 0:c.body}),E=b.code,R=b.isErr,b=(b=e.api)==null?void 0:b.apiDetail,L=b?De(c==null?void 0:c.body,(g=e.api)==null?void 0:g.reqParamHandler,{url:l}):"",N=b?De(p,(g=e.api)==null?void 0:g.resBodyHandler,{url:l,ctx:a}):"";setTimeout(function(){var C=ot(e,{url:l,duration:s,type:f,status:a.status||0,method:(c==null?void 0:c.method)||"get"}),q=[T?"FETCH_ERROR: "+p:"","fetch req url: "+l,"res status: "+(C.status||0),"res duration: "+C.duration+"ms","res startTime: "+u,h,m,"req method: "+(C.method||"GET"),"res retcode: "+E,rt(L,"req param"),rt(N,"res data")].filter(function(P){return P}).join(`

`),q=(C.payload=c==null?void 0:c.body,C.ret=E,C.isErr=+R,{msg:q,code:E,trace:v,errorMsg:"",level:w.API_RESPONSE}),A=e.slowApiLog&&hn(C==null?void 0:C.duration);q.level=A?w.SLOW_NET_REQUEST:pn(T,R),(A||q.level!==w.API_RESPONSE||t.isWhiteList||(A=(A=t.config)==null?void 0:A.api)!=null&&A.reportRequest)&&n.publishNormalLog(q,t),n.publishSpeed(C,t)},0)}).catch(function(p){console.info("ignore something error when process resp "+p)}):setTimeout(function(){var p=ot(e,{url:l,duration:s,type:f,status:a.status||0,method:(c==null?void 0:c.method)||"get"});p.type="static",p.urlQuery=Ee(l,!0),n.publishSpeed(p,t)},0))},catch:function(a,s,l,c,u){var d,f,p,g,T;throw Re(l,e.hostUrl)||(d=Pt(e,"",l),f=((f=e.api)==null?void 0:f.reqHeaders)||[],p=je(c==null?void 0:c.headers,f,"req"),g=xt(c==null?void 0:c.headers),T=(f=e.api)!=null&&f.apiDetail?De(c==null?void 0:c.body,(f=e.api)==null?void 0:f.reqParamHandler,{url:l}):"",setTimeout(function(){var h=ot(e,{url:l,duration:s,type:d,status:0,method:(c==null?void 0:c.method)||"get"}),h=(n.publishSpeed(h,t),"AJAX_ERROR: "+a+`
                          
req url: `+l+`
                          
res status: 0
                          
res duration: `+h.duration+`ms
                          
req method: `+((c==null?void 0:c.method)||"get")+`
                          
req param: `+T+`
                          
res startTime: `+u+`
                          
`+p);n.publishNormalLog({msg:h,level:w.AJAX_ERROR,code:-400,trace:g,errorMsg:""},t)},0)),a}},o=(this.hackFetchOptions=r,this.hackFetchOptions),i=(r=e.api)==null?void 0:r.ignoreHackReg;if(i===void 0&&(i=/\.flv(\?|$)/i),Y.find(function(a){return a.name===o.name}))throw new Error("name '"+o.name+"' is already in hackFetch option list");Y.push(o),!Tn&&window.fetch&&(Tn=!0,Ct=window.fetch,window.fetch=function(a,s){s===void 0&&(s={});var l=typeof a=="string"?a:a==null?void 0:a.url;if((f=i==null?void 0:i.test)!=null&&f.call(i,l))return Ct(l,s);Rn.test(l)&&(l=""+location.origin+l);var c,u,d,f=(o||{}).traceRequestHeader;f&&(c=(c=(s||{}).headers)===void 0?{}:c,u=(d=dn()).host,u=(f=f.generate(l,c,{host:u,pathname:d.pathname})||{}).name,d=f.value)&&u&&(s.headers=Object.assign(c,((f={})[u]=d,f)));for(var p=0;p<Y.length;p++){var g=Y[p];try{typeof g.beforeFetch=="function"&&g.beforeFetch(l,s)}catch{}}var T=Date.now();return Ct(a,s).then(function(h){for(var m=h.clone(),v=0;v<Y.length;v++){var E=Y[v];try{typeof E.then=="function"&&E.then(m,Date.now()-T,l,s,T)}catch{}}return m}).catch(function(h){for(var m=0;m<Y.length;m++){var v=Y[m];try{typeof v.catch=="function"&&v.catch(h,Date.now()-T,l,s,T)}catch{}}throw h})})},overrideXhr:function(e,t){var n,r=this,o={name:this.name,ignoreHackReg:(o=e.api)==null?void 0:o.ignoreHackReg,traceRequestHeader:(o=e.api)!=null&&o.injectTraceHeader?this.traceRequestHeader:null,send:function(i,a){var s,l,c=Date.now(),u=(((e==null?void 0:e.api)||{}).injectTraceHeader&&(l=(s=dn()).host,s=(l=r.traceRequestHeader.generate(i.aegisUrl,{},{host:l,pathname:s.pathname})||{}).name,l=l.value,s)&&l&&i.setRequestHeader(s,l),i.addEventListener("loadend",function(){var p,g,T,h,m=i.aegisUrl||"";Re(m,e.hostUrl)||i.failType==="abort"||(p="",(i.failType||!i.status||400<=i.status)&&(p=i.failType||"failed"),g=Date.now()-c,T=i.getResponseHeader("content-type")||"",h=Pt(e,T,m),setTimeout(function(){var v=ot(e,{url:m,duration:g,type:h,status:i.status,method:i.aegisMethod||"get"});if(h==="fetch"){var N=((N=e.api)==null?void 0:N.reqHeaders)||[],E=je(i.aegisXhrReqHeader,N,"req"),N=((N=e.api)==null?void 0:N.resHeaders)||[],R=i.getAllResponseHeaders().split(`\r
`).reduce(function(A,P){return P=P.split(": "),P[0]&&P[1]&&(A[P[0]]=P[1]),A},{}),b=je(R,N,"res"),L=xt(i.aegisXhrReqHeader),N=(R=e.api)==null?void 0:R.apiDetail,C=N?De(a,(R=e.api)==null?void 0:R.reqParamHandler,{url:m}):"",q=N?De(i.response,(R=e.api)==null?void 0:R.resBodyHandler,{url:m}):"";try{((A,P,D,M)=>{var $,de,B;try{if(typeof(P==null?void 0:P.retCodeHandlerAsync)=="function")return P.retCodeHandlerAsync(A,D==null?void 0:D.url,D==null?void 0:D.ctx,function(J){var I=J.code;M!=null&&M({code:I===void 0?F:I,isErr:J.isErr})});if(typeof(P==null?void 0:P.retCodeHandler)=="function")return B=(de=P.retCodeHandler(A,D==null?void 0:D.url,D==null?void 0:D.ctx,D==null?void 0:D.payload)||{}).code,M!=null&&M({code:B===void 0?F:B,isErr:de.isErr});if(!(A=typeof A=="string"?JSON.parse(A):A))return M!=null&&M({code:F,isErr:!1});typeof(($=P==null?void 0:P.ret)==null?void 0:$.join)=="function"&&(Ze=[].concat(P.ret.map(function(J){return J.toLowerCase()})));var Ne=Object.getOwnPropertyNames(A).filter(function(J){return Ze.indexOf(J.toLowerCase())!==-1});if(Ne.length)return(B=A[Ne[0]])!=="\u672A\u77E5"&&B!==""||(B=F),M!=null&&M({code:""+B,isErr:B!==0&&B!=="0"&&B!==F});M!=null&&M({code:F,isErr:!1})}catch{M!=null&&M({code:F,isErr:!1})}})(i.response,e.api,{url:m,ctx:i,payload:a},function(D){var P=D.code,D=D.isErr,M=[p?"AJAX_ERROR: request "+p:"","fetch req url: "+m,"res status: "+(v.status||0),"res duration: "+v.duration+"ms","res startTime: "+c,E,b,"req method: "+(v.method||"GET"),"res retcode: "+P,rt(C,"req param"),rt(q,"res data")].filter(function($){return $}).join(`

`);v.ret=P,v.isErr=+D,v.payload=a,e.slowApiLog&&hn(v==null?void 0:v.duration)?r.publishNormalLog({msg:M,level:w.SLOW_NET_REQUEST,code:P,trace:L,errorMsg:""},t):r.publishNormalLog({msg:M,level:pn(!!p,D),code:P,trace:L,errorMsg:""},t),r.publishSpeed(v,t)})}catch{v.ret=F,r.publishSpeed(v,t)}}else v.type="static",v.urlQuery=Ee(m,!0),r.publishSpeed(v,t);i.removeEventListener("abort",u),i.removeEventListener("error",d),i.removeEventListener("timeout",f)},0))}),function(){i.failType="abort"}),d=function(){i.failType="error"},f=function(){i.failType="timeout"};i.addEventListener("abort",u),i.addEventListener("error",d),i.addEventListener("timeout",f)}};this.hackXHROptions=o,n=this.hackXHROptions,le.find(function(i){return i.name===n.name})||(le.push(n),!En&&window.XMLHttpRequest&&(mn=window.XMLHttpRequest.prototype.send,vn=window.XMLHttpRequest.prototype.open,kt=window.XMLHttpRequest.prototype.setRequestHeader,En=!0,window.XMLHttpRequest.prototype.open=function(){this.aegisMethod=arguments[0];var i,a=arguments[1];if(Rn.test(a)&&(a=""+location.origin+a),this.aegisUrl=a,(a=(i=n.ignoreHackReg)==null?void 0:i.test)==null||!a.call(i,this.aegisUrl))if(this.aegisXhrStartTime=Date.now(),this.sendByAegis)S.isIE()||(this.timeout=5e3);else for(var s=0;s<le.length;s++){var l=le[s];try{typeof l.open=="function"&&l.open(this)}catch{}}return vn.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var i,a,s;return(a=(s=n.ignoreHackReg)==null?void 0:s.test)!=null&&a.call(s,this.aegisUrl)?kt.apply(this,arguments):(a=arguments[0],s=arguments[1],this.aegisXhrReqHeader=(i=this.aegisXhrReqHeader)!=null?i:{},n!=null&&n.traceRequestHeader&&-1<["traceparent","b3","sw8","sentry-trace"].indexOf(a)&&(this.aegisXhrReqHeader[a]||(arguments[1]=s),this.aegisXhrReqHeader[a])?void 0:(this.aegisXhrReqHeader[a]=arguments[1],kt.apply(this,arguments)))},window.XMLHttpRequest.prototype.send=function(){var i,a;if(!((a=(i=n.ignoreHackReg)==null?void 0:i.test)!=null&&a.call(i,this.aegisUrl)||this.sendByAegis))for(var s=0;s<le.length;s++){var l=le[s];try{typeof l.send=="function"&&l.send(this,arguments[0])}catch{}}return mn.apply(this,arguments)}))},publishSpeed:function(e){var t=this;this.$walk(function(n){var r=t.$getConfig(n);e.type!=="fetch"||typeof(r==null?void 0:r.urlHandler)!="function"?(e.url=Ee(e.url),n.speedLogPipeline(e)):n.speedLogPipeline(k(k({},e),{url:Ee(r.urlHandler(e.url,e.payload))}))})},publishNormalLog:function(e){this.$walk(function(t){t.normalLogPipeline(e)})},destroy:function(){var e,t,n;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&(e=this.option.hackXHROptions,(n=le.findIndex(function(r){return r.name===e.name}))!==-1)&&le.splice(n,1),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,(n=Y.findIndex(function(r){return r.name===t.name}))!==-1)&&Y.splice(n,1),this.option.override=!1}})),Be={},Cr=new _({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(e,t){this.$walk(function(n){n===t&&n.speedLogPipeline(e)})},overrideBridge:function(e){var t=this,n=e.config;n.reportBridgeSpeed&&n.h5Bridge&&n.h5BridgeFunc.length&&n.h5BridgeFunc.forEach(function(r){var o=n.h5Bridge[r];Be[r]=o,n.h5Bridge[r]=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=i[0],l=i[1],c=i[2],u=i[3],d=Date.now();o(s,l,c,function(f){var p=Zt(f,n.api),g=p.code,p=p.isErr,g={url:s+"-"+l,name:s+"-"+l,duration:Date.now()-d,type:"bridge",ret:g,isErr:+p};t.publishSpeed(g,e),u(f)})}})},unHackBridge:function(e){Object.keys(Be).forEach(function(t){Be[t]&&(e.config.h5Bridge[t]=Be[t])}),Be={}},destroy:function(e){this.option.publishSpeed=function(){},this.option.unHackBridge(e),this.option.override=!1}}),x=((x=V=V||{})[x.unknown=100]="unknown",x[x.wifi=1]="wifi",x[x.net2g=2]="net2g",x[x.net3g=3]="net3g",x[x.net4g=4]="net4g",x[x.net5g=5]="net5g",x[x.net6g=6]="net6g",(x=it=it||{})[x.android=1]="android",x[x.ios=2]="ios",x[x.windows=3]="windows",x[x.macos=4]="macos",x[x.linux=5]="linux",x[x.other=100]="other",(x=at=at||{})[x.unknown=100]="unknown",x[x.normal=0]="normal",x[x.weak=1]="weak",x[x.disconnected=2]="disconnected",new _({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",V.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find(function(n){return e[n].test(navigator.userAgent)});return t?it[t]:it.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&(typeof n.getNetworkType=="function"?n.getNetworkType:Sn)(function(r){V[r]||(r=V.unknown),e.extendBean("netType",r),t.NetworkRefreshTimer=setTimeout(function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)},1e4)})},refreshNetworkStatusToBean:function(e){var t,n=this,r=e.config;r&&(t=typeof r.getNetworkStatus=="function"?r.getNetworkStatus:t)!=null&&t(function(o){at[o]===void 0&&(o=at.unknown),e.extendBean("netStatus",o),n.NetworkStatusRefreshTimer=setTimeout(function(){n.refreshNetworkStatusToBean(e),clearTimeout(n.NetworkStatusRefreshTimer)},1e4)})}})),Sn=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||F,0<=(n=String(n).toLowerCase()).indexOf("4g")?V.net4g:0<=n.indexOf("wifi")?V.wifi:0<=n.indexOf("5g")?V.net5g:0<=n.indexOf("6g")?V.net6g:0<=n.indexOf("3g")?V.net3g:0<=n.indexOf("2g")?V.net2g:V.unknown))},Ar=window.WebSocket,ae=[],Ir={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",function(o){var o=(o==null?void 0:o.currentTarget)||{},i=o.url,a=o.readyState;ae!=null&&ae.forEach(function(s){s=s.onErr,s!=null&&s({msg:"\u65E0\u6CD5\u83B7\u77E5\u5177\u4F53\u9519\u8BEF\u4FE1\u606F\uFF0C\u9700\u5728\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u67E5\u770B\uFF01",readyState:a,connectUrl:i})})}),Object.defineProperty(n,"send",{get:function(){return function(r){(o=n.originSend)!=null&&o.call(n,r);var o=n.readyState;if(o!==WebSocket.OPEN){var i={readyState:o,connectUrl:n.url};switch(o){case WebSocket.CLOSED:ae.forEach(function(a){a=a.sendErr,a!=null&&a(k({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u8FDE\u63A5\u5DF2\u5173\u95ED\uFF01"},i))});break;case WebSocket.CONNECTING:ae.forEach(function(a){(0,a.sendErr)(k({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u6B63\u5728\u8FDE\u63A5\u4E2D\uFF01"},i))});break;case WebSocket.CLOSING:ae.forEach(function(a){(0,a.sendErr)(k({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u8FDE\u63A5\u6B63\u5728\u5173\u95ED\uFF01"},i))})}}}}}),n}},On=new _({name:"onError"}),Nr=On=new _({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(c){var u,d=c&&se(c.reason);d&&s.publishErrorLog({msg:"PROMISE_ERROR: "+d,errorMsg:(u=(c=((u=c.reason)==null?void 0:u.message)||((u=c.reason)==null?void 0:u.errMsg)||d)==null?void 0:c.slice)==null?void 0:u.call(c,0,150),level:w.PROMISE_ERROR},e)}function n(c){var u;if(c=(c==null?void 0:c.target)||(c==null?void 0:c.srcElement)){var d=c.src||c.href||"",c=c.tagName,c=c===void 0?"script":c;if(!(Re(u=d,e.config.hostUrl)||-1<window.location.href.indexOf(u))){var f={msg:c+" load fail: "+d,level:w.INFO};if(/\.js$/.test(d))f.level=w.SCRIPT_ERROR;else if(/\.css$/.test(d))f.level=w.CSS_ERROR;else switch(c.toLowerCase()){case"script":f.level=w.SCRIPT_ERROR;break;case"link":f.level=w.CSS_ERROR;break;case"img":f.level=w.IMAGE_ERROR;break;case"audio":case"video":f.level=w.MEDIA_ERROR;break;default:return}s.publishErrorLog(f,e)}}}var r,o,i,a,s=this,l=window.onerror;window.onerror=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d,f=se(c[0]);typeof(d=f)!="string"||!d||ur.some(function(p){return-1<d.indexOf(p)})||zt.some(function(p){return-1<d.indexOf(p)})||s.publishErrorLog({msg:(f||"")+" @ ("+(se(c[1])||"")+":"+(c[2]||0)+":"+(c[3]||0)+`)
          
`+se(c[4]||""),level:w.ERROR},e),l!=null&&l.call.apply(l,ye([window],c))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.lifeCycle.on("destroy",function(){On.countInstance()===0&&(window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0))}),e.config.websocketHack&&(r={key:e.config.id+"-"+this.name,onErr:function(c){var u;(u=s.publishWsErrorLog)!=null&&u.call(s,c,e)},sendErr:function(c){var u;(u=s.publishWsErrorLog)!=null&&u.call(s,c,e)}},this.hackWebsocketConfig=r,r=this.hackWebsocketConfig,window.Proxy)&&window.WebSocket&&(o=window.WebSocket,window&&!o.isHack&&(i=new Proxy(WebSocket,Ir),o.isHack=!0,window.WebSocket=i),a=r,ae.find(function(c){return c.key===a.key})||a&&ae.push(a))},publishErrorLog:function(e,t){this.$walk(function(n){n===t&&n.normalLogPipeline(e)})},publishWsErrorLog:function(e,t){var n=e.connectUrl;this.publishErrorLog({msg:`WEBSOCKET_ERROR: 
              connect: `+n+`
              readyState: `+e.readyState+`
              msg: `+e.msg,level:w.WEBSOCKET_ERROR},t)},destroy:function(){var e,t;this.option.publishErrorLog=function(){},this.option.hackWebsocketConfig&&(e=this.option.hackWebsocketConfig,window.WebSocket=Ar,(t=ae.findIndex(function(n){return n.key===e.key}))!==-1)&&ae.splice(t,1)}}),xn=(new _({name:"clickElementLog"}),function(e){if(e.id!==""&&e.id)return'id("'+e.id+'")';if(e===document.body)return e.tagName;if(e instanceof Document)return"document";var t=0;if(e.parentNode)for(var n=e.parentNode.childNodes,r=0;r<n.length;r+=1){var o=n[r];if(o===e)return xn(e.parentNode)+"/"+e.tagName+"["+(t+1)+"]";o.nodeType===1&&o.tagName===e.tagName&&(t+=1)}return 0}),Ln=function(e){return e instanceof Array?new Map(e.map(function(t){return[t,!0]})):new Map},ct=function(e,t){return typeof e=="string"?e.split(t):[]},Pn=function(e){if(e.nodeType===3||e.nodeType===4)return e.nodeValue||"";if(e.nodeType!==1)return"";if(typeof e.textContent=="string")return e.textContent;for(var t="",n=e.firstChild;n;n=n.nextSibling)t+=Pn(n);return t},_r=new _({name:"clickElementLog",listeners:[],onNewAegis:function(e){this.startListen(e)},startListen:function(e){for(var t=function(i){n.listeners.push(((a,s,l,c)=>{function u(d){var f=document.documentElement;f&&l.call(f,d,d.target)}return c===void 0&&(c=!0),a.addEventListener(s,u,c),{destroy:function(){a.removeEventListener(s,u,c)}}})(document,i,function(a,s){var l,c,u;s&&!((d,f)=>{p=Ln(((p=(d=d).ignoreElements)==null?void 0:p.ignoreClasses)||[])||new Map;for(var p,g=(d={ignoreIds:Ln(((d=d.ignoreElements)==null?void 0:d.ignoreIds)||[])||new Map,ignoreClasses:p}).ignoreClasses,T=d.ignoreIds,h=!(T.size===0&&g.size===0),m=f,v=(ct(f.getAttribute("id")||""," "),ct(f.getAttribute("class")||"",""),0),E=!1;m&&h&&m.getAttribute;){if(E)return!0;if(10<=v)break;for(var R=ct(m.getAttribute("id")||""," "),b=ct(m.getAttribute("class")||"",""),L=0,N=R;L<N.length;L++){var C=N[L];if(T.has(C)){E=!0;break}}for(var q=0,A=b;q<A.length;q++){var P=A[q];if(g.has(P)){E=!0;break}}v+=1,m=m.parentNode||m.parentElement}return!1})(e.config,s)&&(l=xn(s),c=Pr(s),u=s.getBoundingClientRect&&s.getBoundingClientRect(),s={op:i,view_type:(s==null?void 0:s.nodeName)||"",view_text:c.slice(0,127),view_tag:l,page:gn(),page_id:gn(),view_pos:{p0:(parseInt(String(u.left),10)||-1)+","+(parseInt(String(u.top),10)||-1),p1:(parseInt(String(u.left+window.scrollX),10)||-1)+","+(parseInt(String(u.top+window.scrollY),10)||-1)}},e.normalLogPipeline({msg:s,level:w.CLICK_EVENT,errorMsg:""}))},!0))},n=this,r=0,o=Object.entries({click:1,longpress:2});r<o.length;r++)t(o[r][0])},destroy:function(){this.listeners.forEach(function(e){return e.destroy()}),this.listeners=[]}}),ut=(new _({name:"consoleLog"}),{log:console.log,error:console.error,warn:console.warn,info:console.info,debug:console.debug,trace:console.trace}),Ur=new _({name:"consoleLog",onNewAegis:function(e){this.startListen(e)},startListen:function(e){var t;t=e,["log","error","warn","info","debug","trace"].forEach(function(n){var r=ut[n];console[n]=function(){for(var o,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{r.apply(console,i),!t.isWhiteList&&["log","info","debug","trace"].includes(n)||(o=i.map(function(s){if(typeof s=="object")try{return JSON.stringify(s)}catch{}return String(s)}).join(" "),t.normalLogPipeline({msg:"method: console."+n+`
message: `+o,level:w.true,errorMsg:""}))}catch(s){ut.error("Console hook error:",s)}}})},destroy:function(){Object.keys(ut).forEach(function(e){console[e]=ut[e]})}});function kn(){st=[],qe=-1,ue=null,Nt(addEventListener)}Oe={passive:!0,capture:!0},wn=new Date,At=function(e,t){ue||(ue=t,qe=e,yn=new Date,Nt(removeEventListener),It())},It=function(){var e;0<=qe&&qe<yn-wn&&(e={entryType:"first-input",name:ue.type,target:ue.target,cancelable:ue.cancelable,startTime:ue.timeStamp,processingStart:ue.timeStamp+qe},st.forEach(function(t){t(e)}),st=[])},bn=function(e){var t,n,r,o,i,a;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,e.type=="pointerdown"?(n=t,r=e,o=function(){At(n,r),a()},i=function(){a()},a=function(){removeEventListener("pointerup",o,Oe),removeEventListener("pointercancel",i,Oe)},addEventListener("pointerup",o,Oe),addEventListener("pointercancel",i,Oe)):At(t,e))},Nt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,bn,Oe)})},_t=document.visibilityState==="hidden"?0:1/0,addEventListener("visibilitychange",function e(t){document.visibilityState==="hidden"&&(_t=t.timeStamp,removeEventListener("visibilitychange",e,!0))},!0),kn(),self.webVitals={firstInputPolyfill:function(e){st.push(e),It()},resetFirstInputPolyfill:kn,get firstHiddenTime(){return _t}};function Z(e,t){var n=Dn(),r="navigate";return 0<=Hn?r="back-forward-cache":n&&(document.prerendering||0<qt()?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}}function xe(e,t,n){try{var r;if(PerformanceObserver.supportedEntryTypes.includes(e))return(r=new PerformanceObserver(function(o){Promise.resolve().then(function(){t(o.getEntries())})})).observe(Object.assign({type:e,buffered:!0},n||{})),r}catch{}}function ee(e,t,n,r){var o,i;return function(a){0<=t.value&&(a||r)&&((i=t.value-(o||0))||o===void 0)&&(o=t.value,t.delta=i,t.rating=(a=t.value)>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}}function Ut(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})}function lt(e){function t(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)}addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)}function Ht(e){var t=!1;return function(n){t||(e(n),t=!0)}}function Dt(){return Ce<0&&(Ce=Mn(),jn(),ke(function(){setTimeout(function(){Ce=Mn(),jn()},0)})),{get firstHiddenTime(){return Ce}}}function ft(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()}function Cn(e,t){t=t||{},ft(function(){var n,r=Dt(),o=Z("FCP"),i=xe("paint",function(a){a.forEach(function(s){s.name==="first-contentful-paint"&&(i.disconnect(),s.startTime<r.firstHiddenTime)&&(o.value=Math.max(s.startTime-qt(),0),o.entries.push(s),n(!0))})});i&&(n=ee(e,o,qn,t.reportAllChanges),ke(function(a){o=Z("FCP"),n=ee(e,o,qn,t.reportAllChanges),Ut(function(){o.value=performance.now()-a.timeStamp,n(!0)})}))})}function Hr(e){var t,n,r,o,i,a;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,e.type=="pointerdown"?(n=t,r=e,o=function(){Fn(n,r),a()},i=function(){a()},a=function(){removeEventListener("pointerup",o,We),removeEventListener("pointercancel",i,We)},addEventListener("pointerup",o,We),addEventListener("pointercancel",i,We)):Fn(t,e))}function Dr(e){e.forEach(function(t){t.interactionId&&(Bt=Math.min(Bt,t.interactionId),ht=Math.max(ht,t.interactionId),Vn=ht?(ht-Bt)/7+1:0)})}function An(){return Kn()-Jn}function In(e){var t=ne[ne.length-1],n=Ft[e.interactionId];(n||ne.length<10||e.duration>t.latency)&&(n?(n.entries.push(e),n.latency=Math.max(n.latency,e.duration)):(t={id:e.interactionId,latency:e.duration,entries:[e]},Ft[t.id]=t,ne.push(t)),ne.sort(function(r,o){return o.latency-r.latency}),ne.splice(10).forEach(function(r){delete Ft[r.id]}))}function Nn(e,t){function n(o,i,a,s){function l(c){o==="visibilitychange"&&document.visibilityState!=="hidden"||(s?setTimeout(function(){return i(c)},s):i(c),a&&removeEventListener(o,l,!0))}addEventListener(o,l,!0)}var r;n("visibilitychange",e,t==null?void 0:t.once,(r=t==null?void 0:t.delay)==null?void 0:r.visibilitychange),n("pagehide",e,t==null?void 0:t.once,(r=t==null?void 0:t.delay)==null?void 0:r.pagehide)}function Le(e){var t=e.name;0<(e=e.value)&&(Ae[t]=e)}function te(e,t,n,r){return n===void 0&&(n=15e3),r===void 0&&(r=0),(t=t===void 0?0:t)<=e&&e<=n?e:r}var fe,Fe,_n,dt,Mt,Pe,Un,jt,Hn=-1,ke=function(e){addEventListener("pageshow",function(t){t.persisted&&(Hn=t.timeStamp,e(t))},!0)},Dn=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},qt=function(){var e=Dn();return e&&e.activationStart||0},Ce=-1,Mn=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},pt=function(e){document.visibilityState==="hidden"&&-1<Ce&&(Ce=e.type==="visibilitychange"?e.timeStamp:0,Mr())},jn=function(){addEventListener("visibilitychange",pt,!0),addEventListener("prerenderingchange",pt,!0)},Mr=function(){removeEventListener("visibilitychange",pt,!0),removeEventListener("prerenderingchange",pt,!0)},qn=[1800,3e3],Bn=[.1,.25],We={passive:!0,capture:!0},jr=new Date,Fn=function(e,t){fe||(fe=t,Fe=e,_n=new Date,Gn(removeEventListener),Wn())},Wn=function(){var e;0<=Fe&&Fe<_n-jr&&(e={entryType:"first-input",name:fe.type,target:fe.target,cancelable:fe.cancelable,startTime:fe.timeStamp,processingStart:fe.timeStamp+Fe},dt.forEach(function(t){t(e)}),dt=[])},Gn=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Hr,We)})},Xn=[100,300],Vn=0,Bt=1/0,ht=0,Kn=function(){return Mt?Vn:performance.interactionCount||0},$n=[200,500],Jn=0,ne=[],Ft={},zn=[2500,4e3],Wt={},qr=(ge.prototype.start=function(){var e=this,t=new PerformanceObserver(function(n){n=n.getEntriesByName("first-contentful-paint"),0<n.length&&(e.fcp=n[0].startTime,e.slientWindowStartTime=e.fcp,t.disconnect(),setTimeout(function(){e.checkTTI()},Math.max(e.slienceTimeInterval-(performance.now()-e.fcp)+20,1)))});t.observe({entryTypes:["paint"]}),this.longtaskObserver=new PerformanceObserver(function(n){n=n.getEntries(),e.longTaskEntries=e.longTaskEntries.concat(n)}),this.longtaskObserver.observe({entryTypes:["longtask"]}),this.resourceObserver=new PerformanceObserver(function(n){n=n.getEntries(),e.resourceEntries=e.resourceEntries.concat(n)}),this.resourceObserver.observe({entryTypes:["resource"]})},ge.prototype.checkTTI=function(){var e=this;this.hasSlientWindow()?(this.calculateTTI(),this.longtaskObserver.disconnect(),this.resourceObserver.disconnect()):setTimeout(function(){e.checkTTI()},this.checkInterval)},ge.prototype.hasSlientWindow=function(){var e,t=performance.now();return!(t-this.slientWindowStartTime<5e3||((e=this.getLastLongTaskEndTime())>this.slientWindowStartTime?(this.slientWindowStartTime=e,this.resourceEntries=[]):this.getRequestCount(this.slientWindowStartTime,t)<=2?(this.lastLongtaskEndTime=e,0):(t=this.resourceEntries.sort(function(n,r){return n.startTime-r.startTime}),this.slientWindowStartTime=t[this.resourceEntries.length-2].startTime,1)))},ge.prototype.getLastLongTaskEndTime=function(){var e;return this.longTaskEntries.length===0?-1:(e=0,this.longTaskEntries.forEach(function(t){t.startTime+t.duration>e&&(e=t.startTime+t.duration)}),e)},ge.prototype.getRequestCount=function(e,t){var n=0;return this.resourceEntries.forEach(function(r){r.startTime>=e&&r.startTime+r.duration<=t&&(n+=1)}),n},ge.prototype.calculateTTI=function(){var t=this.lastLongtaskEndTime===-1?this.slientWindowStartTime:this.lastLongtaskEndTime,e=performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,t=Math.max(e,t);this.onTTICallback(t)},ge),Ae=(new _({name:"webVitals"}),{FCP:-1,LCP:-1,FID:-1,CLS:-1,INP:-1,TTI:-1}),Br=new _({name:"webVitals",onNewAegis:function(e){var t,n,r,o,i,a,s,l,c;if(Me()&&typeof window.PerformanceObserver=="function"&&typeof performance.getEntriesByName=="function")try{Cn(Le),l=Le,c={},ft(function(){function u(h){(h=h[h.length-1])&&h.startTime<p.firstHiddenTime&&(g.value=Math.max(h.startTime-qt(),0),g.entries=[h],d())}var d,f,p=Dt(),g=Z("LCP"),T=xe("largest-contentful-paint",u);T&&(d=ee(l,g,zn,c.reportAllChanges),f=Ht(function(){Wt[g.id]||(u(T.takeRecords()),T.disconnect(),Wt[g.id]=!0,d(!0))}),["keydown","click"].forEach(function(h){addEventListener(h,function(){return setTimeout(f,0)},!0)}),lt(f),ke(function(h){g=Z("LCP"),d=ee(l,g,zn,c.reportAllChanges),Ut(function(){g.value=performance.now()-h.timeStamp,Wt[g.id]=!0,d(!0)})}))}),a=Le,s={},ft(function(){function u(h){h.startTime<f.firstHiddenTime&&(p.value=h.processingStart-h.startTime,p.entries.push(h),T(!0))}function d(h){h.forEach(u)}var f=Dt(),p=Z("FID"),g=xe("first-input",d),T=ee(a,p,Xn,s.reportAllChanges);g&&lt(Ht(function(){d(g.takeRecords()),g.disconnect()})),g&&ke(function(){p=Z("FID"),T=ee(a,p,Xn,s.reportAllChanges),dt=[],Fe=-1,fe=null,Gn(addEventListener),dt.push(u),Wn()})}),o=Le,i={},Cn(Ht(function(){function u(h){h.forEach(function(m){var v,E;m.hadRecentInput||(v=g[0],E=g[g.length-1],p&&m.startTime-E.startTime<1e3&&m.startTime-v.startTime<5e3?(p+=m.value,g.push(m)):(p=m.value,g=[m]))}),p>f.value&&(f.value=p,f.entries=g,d())}var d,f=Z("CLS",0),p=0,g=[],T=xe("layout-shift",u);T&&(d=ee(o,f,Bn,i.reportAllChanges),lt(function(){u(T.takeRecords()),d(!0)}),ke(function(){f=Z("CLS",p=0),d=ee(o,f,Bn,i.reportAllChanges),Ut(function(){return d()})}),setTimeout(d,0))})),n=Le,r={},ft(function(){var u;"interactionCount"in performance||(Mt=Mt||xe("event",Dr,{type:"event",buffered:!0,durationThreshold:0}));function d(T){T.forEach(function(h){h.interactionId&&In(h),h.entryType!=="first-input"||ne.some(function(m){return m.entries.some(function(v){return h.duration===v.duration&&h.startTime===v.startTime})})||In(h)}),T=Math.min(ne.length-1,Math.floor(An()/50)),(T=ne[T])&&T.latency!==f.value&&(f.value=T.latency,f.entries=T.entries,g())}var f=Z("INP"),p=xe("event",d,{durationThreshold:(u=r.durationThreshold)!=null?u:40}),g=ee(n,f,$n,r.reportAllChanges);p&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&p.observe({type:"first-input",buffered:!0}),lt(function(){d(p.takeRecords()),f.value<0&&0<An()&&(f.value=0,f.entries=[]),g(!0)}),ke(function(){ne=[],Jn=Kn(),f=Z("INP"),g=ee(n,f,$n,r.reportAllChanges)}))}),t=function(u){Le({name:"TTI",value:u})},Me()&&new qr(t).start(),Nn(this.publish.bind(this,e),{once:!0,delay:{visibilitychange:10}})}catch{}},publish:function(e){this.$walk(function(t){var n;t===e&&(n=t.sendPipeline)!=null&&n.call(t,[function(r,o){var i,a=[];for(i in r)a.push(i+"="+r[i]);var s=((s=(s=t.config)==null?void 0:s.performanceUrl)==null?void 0:s.indexOf("?"))===-1?"?":"&";o({url:t.config.webVitalsUrl+s+a.join("&"),type:U.VITALS,log:r,sendBeacon:!0})}],U.VITALS)(k({},Ae))})},destroy:function(){this.option.publish=function(){}}}),Qn=(new _({name:"pagePerformance"}),3),Fr=new _({name:"pagePerformance",performanceMap:{},onNewAegis:function(e){Me()&&(Pe?this.publish(Pe,e):this.startCalcPerformance(e))},publish:function(e,t){var n=this;this.$walk(function(r){r===t&&(r.sendPipeline([function(o,i){var a,s=[];for(a in o)s.push(a+"="+o[a]);var l,c=n.$getConfig(r);if(c)return l=((l=r.config.performanceUrl)==null?void 0:l.indexOf("?"))===-1?"?":"&",typeof c.urlHandler=="function"?i({url:r.config.performanceUrl+l+s.join("&")+"&from="+(encodeURIComponent(c.urlHandler())||window.location.href),beanFilter:["from"],type:U.PERFORMANCE,log:o}):i({url:r.config.performanceUrl+l+s.join("&"),type:U.PERFORMANCE,log:o})}],U.PERFORMANCE)(k({},e)),setTimeout(function(){var s=["duration: "+(e.dnsLookup+e.tcp+e.ssl+e.ttfb+e.contentDownload+e.domParse+e.resourceDownload)+"ms","firstScreenTiming: "+e.firstScreenTiming+"ms","dnsLookup: "+e.dnsLookup+"ms","tcp: "+e.tcp+"ms","ssl: "+e.ssl+"ms","ttfb: "+e.ttfb+"ms","contentDownload: "+e.contentDownload+"ms","domParse: "+e.domParse+"ms","resourceDownload: "+e.resourceDownload+"ms","lcp: "+Ae.LCP+"ms","fid: "+Ae.FID+"ms","cls: "+Ae.CLS+"ms","fcp: "+Ae.FCP+"ms",e.engineInit?"engineInit: "+e.engineInit+"ms":"",e.bundleLoad?"bundleLoad: "+e.bundleLoad+"ms":""].filter(function(l){return l}).join(`

`),o=1e3<e.firstScreenTiming,i=t.config.pageLoadLog,a=t.config.slowPageLoadLog&&o,s={msg:s,ext1:((s=e.firstScreenTiming)==null?void 0:s.toString())||"",level:o?w.SLOW_PAGE_LOAD:w.PAGE_LOAD,errorMsg:""};(i||a)&&r.normalLogPipeline(s)},3e3))})},startCalcPerformance:function(e){var t=this;try{this.getFirstScreenTiming(e,function(n){var r=performance.timing;r&&(Pe={dnsLookup:te(r.domainLookupEnd-r.domainLookupStart),tcp:te(r.connectEnd-r.connectStart),ssl:te(r.secureConnectionStart===0?0:r.requestStart-r.secureConnectionStart),ttfb:te(r.responseStart-r.requestStart),contentDownload:te(r.responseEnd-r.responseStart),domParse:te(r.domInteractive-r.domLoading,0,15e3,1070),resourceDownload:te(r.loadEventStart-r.domInteractive,0,15e3,1070),firstScreenTiming:te(Math.floor(n),0,15e3,15e3)},(r=e.config).extraPerformanceData&&JSON.stringify(r.extraPerformanceData)!=="{}"&&(r=(n=r.extraPerformanceData).engineInit,n=n.bundleLoad,Pe=k(k({},Pe),{engineInit:te(r,0,1e4),bundleLoad:te(n,0,1e4)})),t.publish(Pe,e))})}catch{}},getFirstScreenTiming:function(e,t){var n=this;e.lifeCycle.on("destroy",function(){d&&clearTimeout(d)});var r,o=this,i=["script","style","link","br"],a=[],s={},l=(-1<((c=(c=window.PerformanceObserver)==null?void 0:c.supportedEntryTypes)==null?void 0:c.indexOf("paint"))&&(r=new PerformanceObserver(function(f){f.getEntries().forEach(function(p){var g;p.entryType==="paint"&&p.name==="first-contentful-paint"&&0<(g=document.querySelectorAll("[AEGIS-FIRST-SCREEN-TIMING]")).length&&e.config.id&&!n.performanceMap[e.config.id]&&(n.setFirstScreenInfo(e,p.startTime,g[0],g),t!=null&&t(p.startTime),l.disconnect(),r.disconnect(),d)&&clearTimeout(d)})})).observe({entryTypes:["paint"]}),new MutationObserver(function(f){var p={roots:[],ignores:[],rootsDomNum:[],time:performance.now()};f.forEach(function(g){g&&g.addedNodes&&Array.prototype.slice.call(g.addedNodes).forEach(function(T){o.isEleInArray(T,p.ignores)?p.ignores.push(T):T.nodeType===1&&T.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")?(Object.prototype.hasOwnProperty.apply(s,[p.time])||(s[p.time]=[]),s[p.time].push(T)):T.nodeType===1&&(o.hasAncestorOrSelfWithAttribute(T,"AEGIS-IGNORE-FIRST-SCREEN-TIMING")?p.ignores.push(T):i.indexOf(T.nodeName.toLocaleLowerCase())!==-1||o.isEleInArray(T,p.roots)||(p.roots.push(T),p.rootsDomNum.push(o.walkAndCount(T)||0)))})}),p.roots.length&&a.push(p)}));l.observe(document,{childList:!0,subtree:!0});var c,u=function(f){(f=f===void 0?0:f)||(p=0,(g=Object.keys(s)).length?(f=Math.max.apply(null,g),n.setFirstScreenInfo(e,f,(g=s[f])==null?void 0:g[0],s)):a.forEach(function(E){for(var R=0;R<E.roots.length;R++)E.rootsDomNum[R]>p&&o.isInFirstScreen(E.roots[R])&&(p=E.rootsDomNum[R],f=E.time,n.setFirstScreenInfo(e,f,E.roots[R]))}),a.length=0,Object.keys(s).forEach(function(E){s[E]=s[E].map(function(R){var b={tagName:R.tagName},L=R.attributes;if(!L)return R;for(var N=0;N<L.length;N++){var C=L[N];C.name&&(b[C.name]=R.getAttribute(C.name))}return b})}));var p,g=performance.timing,T=g.domInteractive-g.domLoading,h=f;d=null;for(var m=0,v=[T,g.loadEventStart-g.domInteractive,h];m<v.length;m++)if(v[m]<=0&&0<Qn){d=setTimeout(function(){return u(h)},3e3);break}d?--Qn:(l.disconnect(),r!=null&&r.disconnect(),t!=null&&t(f))},d=setTimeout(function(){return u()},3e3)},setFirstScreenInfo:function(e,t,n,r){var o;e.config.id&&this.performanceMap[e.config.id]||(e.config.id&&(this.performanceMap[e.config.id]=!0),(typeof((o=e.config)==null?void 0:o.pagePerformance)!="object"||(o=e.config.pagePerformance)!=null&&o.firstScreenInfo)&&(e.firstScreenInfo={element:n,timing:t,markDoms:r}))},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(t.indexOf(e)!==-1||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t;return!(!e||typeof e.getBoundingClientRect!="function")&&(e=e.getBoundingClientRect(),t=window.innerHeight,0<=e.left)&&e.left<window.innerWidth&&0<=e.top&&e.top<t&&0<e.width&&0<e.height},walkAndCount:function(e){var t=0;if(e&&e.nodeType===1){t+=1;var n=e.children;if(n!=null&&n.length)for(var r=0;r<n.length;r++)n[r].nodeType===1&&n[r].hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t+=this.walkAndCount(n[r]))}return t},hasAncestorOrSelfWithAttribute:function(e,t){for(var n=e;n&&n!==document.body;){if(n.hasAttribute(t))return!0;n=n.parentElement}return!1}}),Wr=(new _({name:"spa"}),["replaceState","pushState","popstate","hashchange"]),Gr=new _({name:"spa",originFireUrl:"",onNewAegis:function(e){var t=this;history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState,this.sendPv=this.sendPv.bind(this),e.config.spa&&this.sendPv(e),Wr.forEach(function(n){return window.addEventListener(n,function(){return t.sendPv.call(t,e)})})},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return typeof t=="function"&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var r=t.apply(this,arguments),o=null;return typeof Event=="function"?o=new Event(e):(o=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(o),r})},sendPv:function(e){var t=this;setTimeout(function(){var n=location.pathname+location.hash+e.config.id;t.$walk(function(r){var o;r===e&&(o=r.config.pvUrl)&&n&&n!==t.originFireUrl&&(r.sendPipeline([function(i,a){a({url:""+o,type:U.PV})}],U.PV)(null),t.originFireUrl=n)})},0)},destroy:function(){this.option.sendPv=function(){}}}),y=(Jt(jt=G,y=Un=y),jt.prototype=y===null?Object.create(y):(Yn.prototype=y.prototype,new Yn),G.prototype.addExtBean=function(e,t){t&&this.extendBean(e,encodeURIComponent(typeof t=="string"&&["ext1","ext2","ext3"].includes(e)?t.slice(0,1024):t))},G.prototype.getBean=function(e){var t=this;return e===void 0&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(n){return e.indexOf(n)===-1}).map(function(n){return n==="from"?"from="+t.getCurrentPageUrl():n+"="+t.bean[n]}).join("&")},G.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href,e=(e=typeof this.config.urlHandler=="function"?this.config.urlHandler()||location.href:e).slice(0,2048);return encodeURIComponent(e)},G.prototype.ready=function(){function e(){var n,r,o,i;t.reportRequestQueue.length&&(n=t.reportRequestQueue.splice(0,1)[0],r=n.options,o=n.success,i=n.fail,t.$request(r,function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];try{return o==null?void 0:o.apply(r,a)}finally{e()}},function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];try{return i==null?void 0:i.apply(r,a)}finally{e()}}))}var t=this;e(),this.isReportReady=!0},G.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},G.prototype.$request=function(e,t,n){var r,o,i,a;if(e&&typeof e.url=="string"&&e.url!==""&&this.bean.id)return a=e.url,e.addBean!==!1&&(a=((s,l)=>{var c,u,d,f=s,p=e.beanFilter||[];for(c in l)p.indexOf(c)===-1&&((d=(u=new RegExp("([?&])"+c+"(=([^&]*))?(?=&|$)")).exec(f))?d[2]&&d[3]!==""&&d[3]!=="undefined"||(f=f.replace(u,"$1"+c+"="+l[c])):(d=-1<f.indexOf("?")?"&":"?",f+=d+c+"="+l[c]));return f})(a,k(k({},this.bean),{from:this.getCurrentPageUrl()}))),e.url=a,a=e.method||"get",o=this.config.onBeforeRequest,(e=o?o(e,this):e)?e.url?void((e!=null&&e.sendBeacon||this.sendNow)&&typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(e.url,e.data):((r=new XMLHttpRequest).sendByAegis=!0,r.addEventListener("readystatechange",function(){r.readyState===4&&(400<=r.status||r.status===0?n!=null&&n(r.response):t!=null&&t(r.response))}),a.toLocaleLowerCase()==="get"?(r.open("get",(o=e.url,i=e.data,typeof o!="string"?"":typeof i=="object"&&i?(a=Object.getOwnPropertyNames(i).map(function(s){var l=i[s];return s+"="+encodeURIComponent(typeof l=="string"?l:JSON.stringify(l))}).join("&").replace(/eval/gi,"evaI"),o+(o.indexOf("?")===-1?"?":"&")+a):o)),r.send()):(r.open("post",e.url),e.contentType&&r.setRequestHeader("Content-Type",e.contentType),typeof e.data=="string"&&(e.data=e.data.replace(/eval/gi,"evaI")),r.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},G.prototype.publishPluginsLogs=function(){var e=G.installedPlugins.find(function(t){return t.name==="reportAssetSpeed"});e!=null&&e.option.collectNotReportedLog(this)},G.prototype.uploadLogs=function(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={}),(n=this.lifeCycle)!=null&&n.emit("uploadLogs",e,t)},G.sessionID="session-"+Date.now(),G);function G(e){var t,n,r,o,i=Un.call(this,e)||this;i.sendNow=!1,i.isReportReady=!1,i.reportRequestQueue=[],i.speedLogPipeline=Se([Ye(i),(o=i.config,function(s,l){var c,u,d,f=typeof o.repeat=="number"?o.repeat:60;!o.speedSample||f<=0?l(s):(c=(o==null?void 0:o.id)||"0",u=Te[c]||{},Array.isArray(s)?(d=s.filter(function(p){var g=!u[p.url]||u[p.url]<f;return g?(u[p.url]=1+~~u[p.url],Te[c]=u):he[c]||St(c),g})).length&&l(d):!u[s.url]||u[s.url]<f?(u[s.url]=1+~~u[s.url],Te[c]=u,l(s)):he[c]||St(c))}),(r=i,function(s,l){Sn(function(c){r.extendBean("netType",c),l(s)})}),function(s,l){(c=i.lifeCycle)!=null&&c.emit("beforeReportSpeed",s);var c,u=i.config.beforeReportSpeed;if((s=typeof u=="function"?s.filter(function(d){return u(d)!==!1}):s).length)return l(s)},function(s,l){l(s.map(function(c){return c.payload!==void 0&&delete c.payload,c}))},function(s){return i.sendPipeline([function(l,c){var u,d,f,p;c({type:U.SPEED,url:""+i.config.speedUrl,method:"post",data:(c=l,u=k(k({},i.bean),{from:i.getCurrentPageUrl()}),f={fetch:[],static:[],bridge:[]},p=new FormData,Array.isArray(c)?c.forEach(function(g){var T=fn(g);f[g.type].push(T)}):(d=fn(c),f[c.type].push(d)),p.append("payload",nn(k({duration:f},u))),p),log:l})}],U.SPEED)(s)}]),e.asyncPlugin=!0;try{typeof document<"u"&&(e.uin=e.uin||((t=document.cookie.match(/\buin=\D+(\d*)/))!=null?t:[])[1]||((n=document.cookie.match(/\bilive_uin=\D*(\d+)/))!=null?n:[])[1]||""),i.init(e),i.extendBean("sessionId",G.sessionID),i.extendBean("from",i.getCurrentPageUrl()),typeof document<"u"&&i.extendBean("referer",encodeURIComponent(document.referrer||""));for(var a=1;a<=10;a++)i.addExtBean("ext"+a,e["ext"+a])}catch(s){console.warn(s),console.log(`%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.
It is recommended that you contact us for feedback and thank you for your support.`,"color: red"),i.sendSDKError(s)}return i}function Yn(){this.constructor=jt}function ge(e){this.slienceTimeInterval=5e3,this.checkInterval=100,this.fcp=0,this.longTaskEntries=[],this.resourceEntries=[],this.slientWindowStartTime=performance.now(),this.onTTICallback=e}new _({name:"ie"}),new _({name:"onClose"});var Xr=new _({name:"onClose",onNewAegis:function(e){var t,n=this;S.desktop()?(t=window.onunload,window.onunload=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.publishNotReportedLog(e),t!=null&&t.call.apply(t,ye([window],r))}):Nn(this.publishNotReportedLog.bind(this,e),{once:!0})},publishNotReportedLog:function(e){var t=this;this.$walk(function(n){n===e&&(n.sendNow=!0,n.publishPluginsLogs(),t.publishThrottlePipeLogs(n))})},publishThrottlePipeLogs:function(e){e!=null&&e.speedLogPipeline([]),e!=null&&e.eventPipeline([]),e!=null&&e.customTimePipeline([]),e!=null&&e.normalLogPipeline([])}});new _({name:"aid"});function gt(e,t,n){var r=(e=e.map(function(o){return er(o)}))[0];return r?(t=t.some(function(o){return r.includes(o)}),n=!n.some(function(o){return r.includes(o)}),{isWhitePoint:t&&n,selectorPointers:e}):{isWhitePoint:!1,selectorPointers:e}}function Zn(e){try{var t=e.config.blankScreen;return t===!0?Gt:Xt(Gt,t)}catch{return Gt}}function mt(e,t){function n(o){var i=o[0];return i&&i.shadowRoot!==null&&(i=((i=i==null?void 0:i.shadowRoot)==null?void 0:i.elementsFromPoint(e,t))||[]).length>o.length?n(i||[]):o}var r=document.elementsFromPoint(e,t);return n(r)}var Ie,Gt={containers:["body","html","#app","#root"],ignoreContainers:[],detectStartPosition:{x:0,y:0},emptyElementsPercent:70,sameElementsPercent:70,debounceDuration:2e3,everySideSampleNumber:9,disableSameElementsCheck:!0,ignoreElesWhenDomChange:[],reDetectInterval:2e3,samePointDepth:5,customBlankScreenDector:null},Vr=["canvas","img","svg","iframe"],er=((me=Ie=Ie||{})[me.UNKNOWN=0]="UNKNOWN",me[me.ERROR=1]="ERROR",me[me.DOM_CHANGE=2]="DOM_CHANGE",function(e){var t=e.nodeName.toLowerCase();return e.id?t+"#"+e.id:e.className&&typeof e.className=="string"?t+"."+e.className.split(" ").filter(function(n){return!!n}).join("."):t}),Xt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!t.length)return e;var r,o=t.shift();for(r in o)typeof o[r]=="object"&&o[r]!==null&&e.hasOwnProperty(r)&&typeof e[r]=="object"&&e[r]!==null?Xt(e[r],o[r]):e[r]=o[r];return Xt.apply(void 0,ye([e],t))},me=new _({name:"blankScreen",onNewAegis:function(e){var t,n,r,o,i,a,s,l,c,u,d,f,p,g,T,h,m,v,E,R,b,L,N,C,q,A,P,D,M,$,de,B,Ne,J=this;document.elementFromPoint&&(r=Zn(e),o=r.everySideSampleNumber,i=r.sameElementsPercent,a=r.containers,s=r.ignoreContainers,l=r.detectStartPosition,c=r.ignoreElesWhenDomChange,u=r.reDetectInterval,d=r.disableSameElementsCheck,f=r.samePointDepth,p=4*o-3,g=Math.floor(p*r.emptyElementsPercent/100),T=Math.floor(p*i/100),h=Ie.UNKNOWN,v=null,E=m=!1,R=function(){return Ue(J,void 0,void 0,function(){var I,W,pe,re,tr,nr,vt,Ge,ve,_e,Xe,yt,z,wt,Q,rr,Vt,Kt,or,oe,bt,Kr=this;return He(this,function(zr){if(I=window.innerHeight,W=window.innerWidth,pe=l.x,re=l.y,!(W<=pe||I<=re)){for(tr=pe+(W-pe)/2,nr=re+(I-re)/2,vt=[],Ge=o+1,ve=0,_e=1;_e<Ge;_e++)z=re+(I-re)*_e/Ge,Q=mt(Xe=pe+(W-pe)*_e/Ge,nr),yt=mt(tr,z),wt=mt(Xe,z),Xe=mt(Xe,I-z),z=gt(Q,a,s),z.isWhitePoint&&(ve+=1),vt.push(z.selectorPointers),_e!==Ge/2&&(Q=gt(yt,a,s),z=Q.isWhitePoint,yt=Q.selectorPointers,z&&(ve+=1),Q=gt(wt,a,s),z=Q.isWhitePoint,wt=Q.selectorPointers,z&&(ve+=1),Q=gt(Xe,a,s),Q.isWhitePoint&&(ve+=1),vt.push(yt,wt,Q.selectorPointers));rr=g<=ve,Vt=!1,Kt={samePointerMap:{},maximumSamePointer:{}},d||(oe=vt.map(function(j){return j.slice(0,f)}),Et=oe.map(function(j){return j.join(" < ")}).reduce(function(j,Ve){return j[Ve]=j[Ve]?j[Ve]+1:1,j},{}),$t=Object.keys(Et).map(function(j){return[j,Et[j]]}).sort(function(j,Ve){return Ve[1]-j[1]})[0],ir=$t[0],oe={samePointerMap:Et,maximumSamePointerClass:ir,maximumSamePointerCounter:$t[1]},Kt={samePointerMap:oe.samePointerMap,maximumSamePointer:((bt={})[or=oe.maximumSamePointerClass]=oe=oe.maximumSamePointerCounter,bt)},bt=Vr.some(function(j){return or.startsWith(j)}),Vt=T<=oe&&!bt),rr||Vt?m?(oe={msg:"decect blankscreen whitePointCount: "+(v==null?void 0:v.whitePointCount)+" whitePointerThreshold: "+g+" reDetectInterval: "+u,level:w.BLANK_SCREEN},e.normalLogPipeline(oe),m=!1,v=null):(v=k(k({msg:"blank_screen",level:w.BLANK_SCREEN,whitePointCount:ve},Kt),t?{linkLogType:t==null?void 0:t.type,linkLogLevel:t==null?void 0:t.level,linkErrorMsg:t==null?void 0:t.errorMsg}:{}),m=!0,n=setTimeout(function(){return Ue(Kr,void 0,void 0,function(){return He(this,function(j){switch(j.label){case 0:return[4,b()];case 1:return j.sent(),[2]}})})},u)):(m=!1,v=null)}return[2];var Et,$t,ir})})},b=function(){return Ue(J,void 0,void 0,function(){var I=this;return He(this,function(W){switch(W.label){case 0:return"requestIdleCallback"in window?(window.requestIdleCallback(function(pe){return Ue(I,void 0,void 0,function(){return He(this,function(re){switch(re.label){case 0:return 0<pe.timeRemaining()?[4,R()]:[3,2];case 1:re.sent(),re.label=2;case 2:return[2]}})})}),[3,3]):[3,1];case 1:return[4,R()];case 2:W.sent(),W.label=3;case 3:return[2]}})})},L=function(){var I;m||h===Ie.ERROR&&!t||(h=t?Ie.ERROR:Ie.DOM_CHANGE,clearTimeout(n),I=Zn(e).debounceDuration,n=setTimeout(function(){return Ue(J,void 0,void 0,function(){return He(this,function(W){switch(W.label){case 0:return clearTimeout(n),[4,b()];case 1:return W.sent(),[2]}})})},I))},e.lifeCycle.on("errorOccurred",N=function(I){I=I.filter(function(W){return W.level!==w.BLANK_SCREEN}),0<I.length&&(t=I[I.length-1],L())}),C=null,window.MutationObserver&&($=de=null,q=window.cancelAnimationFrame||function(I){clearTimeout(I)},A=window.requestAnimationFrame||function(I){return setTimeout(I,1e3/60)},P=function(){(C=new MutationObserver(function(I){var W=c.includes(er(I[0].target));I.length===1&&W||L()})).observe(document.body,{childList:!0,subtree:!0})},D=function(){de&&(clearTimeout(de),de=null),$&&(q($),$=null)},document.body?P():($=A(M=function(){document.body?(D(),P()):$=A(M)}),de=setTimeout(function(){D()},1e4))),B=function(){E&&(E=!0,m)&&(clearTimeout(n),R())},Ne=function(){document.visibilityState==="visible"&&(E=!1),document.visibilityState==="hidden"&&B()},window.addEventListener("pagehide",B),window.addEventListener("beforeunload",B),window.addEventListener("visibilitychange",Ne),this.destroyBlanckScreenDetect=function(){window.removeEventListener("pagehide",B),window.removeEventListener("beforeunload",B),window.removeEventListener("visibilitychange",Ne),e.lifeCycle.remove("errorOccurred",N),C!=null&&C.disconnect()})},destroy:function(){this.destroyBlanckScreenDetect()}});return y.use(Nr),y.use(kr),y.use(xr),y.use(Fr),y.use(Br),y.use(Or),y.use(x),y.use(Gr),y.use(Xr),y.use(_r),y.use(Ur),y.use(Cr),y.use(me),y})})(ar);const Yr=ar.exports;export{Yr as A};
