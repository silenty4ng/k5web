import{M as Z,h as Ct,i as Ot,j as Dt,R as It,k as Mt,T as Ht,m as he,n as Tt,o as Pt,p as Vt,d as xt,q as Bt,r as Ut,s as ve,t as Rt,u as zt,v as Kt,w as At,L as Nt,x as qt,y as Wt,z as Gt,E as Jt,F as Qt,G as Xt,H as Yt,D as Zt,J as eo,K as to,O as oo}from"./@arco-design.282d06c8.js";import{c as de}from"./vue.ffb667bf.js";import{b as ee,u as te}from"./vue-router.a9f5d186.js";import{u as be,a as no,b as ao,c as ge,d as G,l as ye,_ as J,e as so,L as lo,f as le,R as ro,D as uo,r as co}from"./index.0e1dd8c9.js";import{a as io,b as po,c as _o,d as fo}from"./@vueuse.a7db99fe.js";import{l as mo}from"./lodash.c4b3d061.js";import{c as $,d as N,r as A,x as e,k as ho,a7 as pe,i as vo,o as f,a as U,b as v,u as o,_ as g,z as C,v as R,s as w,F as X,A as H,N as z,O as K,Q as ne,h as ke,n as Se,H as bo,w as we,m as go,l as $e,a9 as yo,J as ko,q as ae,P as _e,aI as So,T as wo,E as $o,e as fe}from"./@vue.6ceb3fa6.js";import{v as Le}from"./vue-i18n.5fb6db72.js";import{d as oe,c as Lo,e as Eo}from"./serial.0b46e76d.js";import{L as Ee,S as Fo,I as jo,F as Co,B as Oo,a as Do,b as Io}from"./tdesign-vue-next.d1c1adb1.js";import{a as me}from"./axios.06033baf.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.35d19ede.js";import"./@intlify.02b6985d.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./nprogress.6328d444.js";import"./mitt.550594b0.js";import"./pinia.fa8b6be2.js";import"./vue-demi.0e7683c7.js";import"./aegis-web-sdk.d24318d3.js";import"./@zxing.8654f0db.js";import"./vue-matomo.5bdfe9a5.js";import"./lodash-es.18922ecc.js";import"./tdesign-icons-vue-next.f086fa1d.js";import"./sortablejs.77296005.js";import"./@popperjs.f3f73334.js";import"./@babel.9b6013fe.js";const Fe="LoseHu 117 \u5386\u53F2\u7248\u672C",je="official",Ce="official",Mo={name:Fe,uart:je,charset:Ce},Ho=Object.freeze(Object.defineProperty({__proto__:null,name:Fe,uart:je,charset:Ce,default:Mo},Symbol.toStringTag,{value:"Module"})),Oe="LoseHu 117 \u5386\u53F2\u7248\u672C\u6269\u5BB9\u7248",De="losehu",Ie="losehu",Me=!0,To={name:Oe,uart:De,charset:Ie,K:Me},Po=Object.freeze(Object.defineProperty({__proto__:null,name:Oe,uart:De,charset:Ie,K:Me,default:To},Symbol.toStringTag,{value:"Module"})),He="LoseHu 118+",Te="official",Pe="official",Vo={name:He,uart:Te,charset:Pe},xo=Object.freeze(Object.defineProperty({__proto__:null,name:He,uart:Te,charset:Pe,default:Vo},Symbol.toStringTag,{value:"Module"})),Ve="LoseHu 118+ 2Mbit \u6269\u5BB9\u7248",xe="losehu",Be="gb2312",Ue=!0,Re=!0,Bo={name:Ve,uart:xe,charset:Be,H:Ue,sat:Re},Uo=Object.freeze(Object.defineProperty({__proto__:null,name:Ve,uart:xe,charset:Be,H:Ue,sat:Re,default:Bo},Symbol.toStringTag,{value:"Module"})),ze="LoseHu 118+ \u6269\u5BB9\u7248",Ke="losehu",Ae="gb2312",Ne=!0,Ro={name:ze,uart:Ke,charset:Ae,K:Ne},zo=Object.freeze(Object.defineProperty({__proto__:null,name:ze,uart:Ke,charset:Ae,K:Ne,default:Ro},Symbol.toStringTag,{value:"Module"})),qe="LoseHu 120+ \u6269\u5BB9\u7248",We="losehu",Ge="gb2312",Je=!0,Qe=!0,Ko={name:qe,uart:We,charset:Ge,K:Je,sat:Qe},Ao=Object.freeze(Object.defineProperty({__proto__:null,name:qe,uart:We,charset:Ge,K:Je,sat:Qe,default:Ko},Symbol.toStringTag,{value:"Module"})),Xe="LoseHu 124+ 2Mbit \u6269\u5BB9\u7248",Ye="losehu",Ze="gb2312",et=!0,tt=!0,ot=!0,No={name:Xe,uart:Ye,charset:Ze,H:et,sat:tt,newpinyin:ot},qo=Object.freeze(Object.defineProperty({__proto__:null,name:Xe,uart:Ye,charset:Ze,H:et,sat:tt,newpinyin:ot,default:No},Symbol.toStringTag,{value:"Module"})),nt="LoseHu \u5F15\u5BFC\u7A0B\u5E8F",at="losehu",st="gb2312",lt=!0,rt=!0,ut=!0,Wo={name:nt,uart:at,charset:st,H:lt,sat:rt,newpinyin:ut},Go=Object.freeze(Object.defineProperty({__proto__:null,name:nt,uart:at,charset:st,H:lt,sat:rt,newpinyin:ut,default:Wo},Symbol.toStringTag,{value:"Module"})),ct="LoseHu Doppler",it="losehu",dt="gb2312",pt=!0,_t=!0,ft=!0,mt=!0,Jo={name:ct,uart:it,charset:dt,H:pt,sat:_t,sat2:ft,newpinyin:mt},Qo=Object.freeze(Object.defineProperty({__proto__:null,name:ct,uart:it,charset:dt,H:pt,sat:_t,sat2:ft,newpinyin:mt,default:Jo},Symbol.toStringTag,{value:"Module"})),ht="LoseHu Patch LTS\uFF08BD8DFN\uFF09",vt="official",bt="official",gt=!0,Xo={name:ht,uart:vt,charset:bt,localmdc:gt},Yo=Object.freeze(Object.defineProperty({__proto__:null,name:ht,uart:vt,charset:bt,localmdc:gt,default:Xo},Symbol.toStringTag,{value:"Module"})),yt="LoseHu Patch LTS\uFF08BD8DFN\uFF09\u6269\u5BB9\u7248",kt="losehu",St="losehu",wt=!0,$t=!0,Lt=!0,Zo={name:yt,uart:kt,charset:St,K:wt,localmdc:$t,fm30:Lt},en=Object.freeze(Object.defineProperty({__proto__:null,name:yt,uart:kt,charset:St,K:wt,localmdc:$t,fm30:Lt,default:Zo},Symbol.toStringTag,{value:"Module"})),Et="Official",tn={name:Et},on=Object.freeze(Object.defineProperty({__proto__:null,name:Et,default:tn},Symbol.toStringTag,{value:"Module"}));function nn(){const u=ee(),t=be();return{logout:async n=>{await t.logout();const r=u.currentRoute.value;Z.success("\u767B\u51FA\u6210\u529F"),u.push({name:n&&typeof n=="string"?n:"login",query:{...u.currentRoute.value.query,redirect:r.name}})}}}const an=(u,t)=>{const{target:p="_blank",...n}=t||{};window.open(u,p,Object.entries(n).reduce((r,_)=>{const[i,h]=_;return[...r,`${i}=${h}`]},[]).join(","))},sn=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),ln=[...no,...ao],rn=ln.map(u=>{const{name:t,path:p,meta:n,redirect:r,children:_}=u;return{name:t,path:p,meta:n,redirect:r,children:_}});function un(){const u=ge(),t=G(),p=$(()=>t.menuFromServer?t.appAsyncMenus:rn);return{menuTree:$(()=>{const r=mo.exports.cloneDeep(p.value);r.sort((i,h)=>(i.meta.order||0)-(h.meta.order||0));function _(i,h){return i?i.map(y=>{var O,M;if(!u.accessRouter(y))return null;if(((O=y.meta)==null?void 0:O.hideChildrenInMenu)||!y.children)return y.children=[],y;y.children=y.children.filter(m=>{var c;return((c=m.meta)==null?void 0:c.hideInMenu)!==!0});const F=_(y.children,h+1);return F.length||h>1?(y.children=F,y):((M=y.meta)==null?void 0:M.hideInMenu)===!1?y:null}).filter(Boolean):null}return _(r,0)})}}function cn(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!ho(u)}const dn=N({emit:["collapse"],setup(){const{t:u}=Le.exports.useI18n(),t=G(),p=ee(),n=te(),{menuTree:r}=un(),_=$({get(){return t.device==="desktop"?t.menuCollapse:!1},set(m){t.updateSettings({menuCollapse:m})}}),i=$(()=>t.topMenu),h=A([]),I=A([]),y=m=>{if(sn.test(m.path)){an(m.path),I.value=[m.name];return}const{hideInMenu:c,activeMenu:s}=m.meta;if(n.name===m.name&&!c&&!s){I.value=[m.name];return}p.push({name:m.name})},F=m=>{const c=[];let s=!1;const a=(S,b)=>{var D;if(S.name===m){s=!0,c.push(...b);return}(D=S.children)!=null&&D.length&&S.children.forEach(l=>{a(l,[...b,l.name])})};return r.value.forEach(S=>{s||a(S,[S.name])}),c};ye(m=>{const{requiresAuth:c,activeMenu:s,hideInMenu:a}=m.meta;if(c&&(!a||s)){const S=F(s||m.name),b=new Set([...S,...h.value]);h.value=[...b],I.value=[s||S[S.length-1]]}},!0);const O=m=>{t.device==="desktop"&&t.updateSettings({menuCollapse:m})},M=()=>{function m(c,s=[]){return c&&c.forEach(a=>{var D;const S=(D=a==null?void 0:a.meta)!=null&&D.icon?()=>{var l;return pe(de(`<${(l=a==null?void 0:a.meta)==null?void 0:l.icon}/>`))}:null,b=(a==null?void 0:a.children)&&(a==null?void 0:a.children.length)!==0?e(Ot,{key:a==null?void 0:a.name},{default:()=>[m(a==null?void 0:a.children)],icon:S,title:()=>{var l;return pe(de(u(((l=a==null?void 0:a.meta)==null?void 0:l.locale)||"")))}}):e(Dt,{key:a==null?void 0:a.name,onClick:()=>y(a)},{default:()=>{var l;return[u(((l=a==null?void 0:a.meta)==null?void 0:l.locale)||"")]},icon:S});s.push(b)}),s}return m(r.value)};return()=>{let m;return e(Ct,{mode:i.value?"horizontal":"vertical",collapsed:_.value,"onUpdate:collapsed":c=>_.value=c,"open-keys":h.value,"onUpdate:open-keys":c=>h.value=c,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":I.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:O},cn(m=M())?m:{default:()=>[m]})}}});const se=J(dn,[["__scopeId","data-v-90632f3f"]]),pn={class:"navbar"},_n={class:"left-side"},fn={key:0},mn={class:"center-side"},hn={class:"right-side"},vn=N({__name:"index",setup(u){const{t}=Le.exports.useI18n(),p=Object.assign({"/src/drivers/losehu117.json":Ho,"/src/drivers/losehu117k.json":Po,"/src/drivers/losehu118.json":xo,"/src/drivers/losehu118h.json":Uo,"/src/drivers/losehu118k.json":zo,"/src/drivers/losehu120k.json":Ao,"/src/drivers/losehu124h.json":qo,"/src/drivers/losehubl.json":Go,"/src/drivers/losehud.json":Qo,"/src/drivers/lts.json":Yo,"/src/drivers/ltsk.json":en,"/src/drivers/todo.json":on}),n=G(),r=te();nn();const{changeLocale:_,currentLocale:i}=so(),{isFullscreen:h,toggle:I}=io(),y=[...lo];$(()=>userStore.avatar);const F=$(()=>n.theme),O=$(()=>n.topMenu&&n.menu),M=po({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(d){n.toggleTheme(d)}}),m=_o(M),c=()=>{m()},s=A(),a=()=>{const d=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.value.dispatchEvent(d)},S=vo("toggleDrawerMenu"),b={"L_BL[0-9][0-9][0-9]":"losehubl.json","LOSEHU.*P.*K":"ltsk.json","LOSEHU.*P.*":"lts.json","LOSEHU.*D":"losehud.json","LOSEHU13[0-9].*HS":"losehu124h.json","LOSEHU13[0-9].*H":"losehu124h.json","LOSEHU13[0-9].*KS":"losehu120k.json","LOSEHU13[0-9].*K":"losehu120k.json","LOSEHU13[0-9].*":"losehu118.json","LOSEHU12[4-9].*HS":"losehu124h.json","LOSEHU12[4-9].*H":"losehu124h.json","LOSEHU12[0-3].*H":"losehu118h.json","LOSEHU12[0-9].*KS":"losehu120k.json","LOSEHU12[0-9].*K":"losehu120k.json","LOSEHU12[0-9].*":"losehu118.json","LOSEHU11[8-9].*H":"losehu118h.json","LOSEHU11[8-9].*K":"losehu118k.json","LOSEHU11[8-9].*":"losehu118.json","LOSEHU11[2-7].*K":"losehu117k.json","LOSEHU11[2-7].*":"losehu117.json",".*":"todo.json"},D=A("V1"),l=()=>{Z.info("\u656C\u8BF7\u671F\u5F85 ComingSoon"),setTimeout(()=>{D.value="V1"},100)},k=async()=>{if(n.connectState==!1){try{n.connectPort&&await oe(n.connectPort)}catch{}let d;if(/Mobi|Android|iPhone/i.test(navigator.userAgent)?alert("\u624B\u673A\u5199\u9891\u5F00\u53D1\u4E2D\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528\u7535\u8111\u8FDE\u63A5\u7535\u53F0\u5199\u9891\uFF01\uFF01\uFF01In the development of mobile, it cannot be used normally. Please use a computer to connect!!!"):d=await Lo(),!d){alert(t("global.connectFail"));return}n.updateSettings({connectPort:d});const L={};Object.keys(p).forEach(T=>{L[T.substring(T.lastIndexOf("/")+1)]=p[T].default});let j=null,B="";try{B=await Eo(d)}catch{throw await oe(d),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""}),alert(t("global.handshakeFail")),new Error(t("global.handshakeFail"))}const q={name:"TODO",uart:"official",charset:"official",K:!1,H:!1,localmdc:!1,sat:!1,sat2:!1,newpinyin:!1,fm30:!1};Object.keys(b).some(T=>{if(new RegExp(T).test(B))return j=Object.assign(q,L[b[T]]),!0}),n.updateSettings({connectState:!0,firmwareVersion:B,configuration:j})}else await oe(n.connectPort),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""})};return(d,L)=>{const j=It,B=Tt,q=Pt,T=Vt,Q=Mt,W=Ee,V=xt,Y=Bt,x=Ht,E=Ut,re=ve,ue=he,ce=Rt,ie=zt,Ft=Kt,jt=At;return f(),U("div",pn,[v("div",_n,[e(Q,null,{default:o(()=>[e(q,{style:{margin:0,fontSize:"18px"},heading:5},{default:o(()=>[!O.value&&g(n).device==="mobile"?R("",!0):(f(),U("div",fn,[L[3]||(L[3]=C(" K5Web \xA0 ",-1)),e(B,{type:"button",size:"mini",modelValue:D.value,"onUpdate:modelValue":L[0]||(L[0]=P=>D.value=P),title:"\u786C\u4EF6\u7248\u672C\uFF08HwVersion\uFF09"},{default:o(()=>[e(j,{value:"V1"},{default:o(()=>[...L[1]||(L[1]=[C("V1",-1)])]),_:1}),e(j,{onClick:l,value:"V2"},{default:o(()=>[...L[2]||(L[2]=[C("V2",-1)])]),_:1})]),_:1},8,["modelValue"])]))]),_:1}),!O.value&&g(n).device==="mobile"?(f(),w(T,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:g(S)},null,8,["onClick"])):R("",!0)]),_:1})]),v("div",mn,[O.value?(f(),w(se,{key:0})):R("",!0)]),v("ul",hn,[!O.value&&g(n).device==="mobile"?(f(),U(X,{key:0},[v("li",null,[g(t)("navbar.qa")=="Feedback"?(f(),w(W,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[C(H(d.$t("navbar.qa")),1)]),_:1})):(f(),w(W,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[C(H(d.$t("navbar.qa")),1)]),_:1}))]),v("li",null,[z(e(V,{type:"primary",onClick:k},{default:o(()=>[C(H(g(n).connectState?d.$t("navbar.disconnect"):d.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path!=="/tool/flash"]])]),v("li",null,[e(x,{content:d.$t("settings.language")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:a},{icon:o(()=>[e(Y)]),_:1})]),_:1},8,["content"]),e(ue,{trigger:"click",onSelect:g(_)},{content:o(()=>[(f(),U(X,null,ne(y,P=>e(re,{key:P.value,value:P.value},{icon:o(()=>[z(e(E,null,null,512),[[K,P.value===g(i)]])]),default:o(()=>[C(" "+H(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[v("div",{ref_key:"triggerBtn",ref:s,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),v("li",null,[e(x,{content:F.value==="light"?d.$t("settings.navbar.theme.toDark"):d.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:c},{icon:o(()=>[F.value==="dark"?(f(),w(ce,{key:0})):(f(),w(ie,{key:1}))]),_:1})]),_:1},8,["content"])])],64)):(f(),U(X,{key:1},[v("li",null,[g(t)("navbar.qa")=="Feedback"?(f(),w(W,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[C(H(d.$t("navbar.qa")),1)]),_:1})):(f(),w(W,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[C(H(d.$t("navbar.qa")),1)]),_:1}))]),v("li",null,[z(e(V,{type:"primary",onClick:k},{default:o(()=>[C(H(g(n).connectState?d.$t("navbar.disconnect"):d.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path!=="/tool/flash"&&g(r).path!=="/idea/firmware"]]),z(e(V,{disabled:"disabled",title:"\u5347\u7EA7\u6A21\u5F0F\u65E0\u9700\u8FDE\u63A5",type:"primary",onClick:k},{default:o(()=>[C(H(g(n).connectState?d.$t("navbar.disconnect"):d.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path=="/tool/flash"||g(r).path=="/idea/firmware"]])]),v("li",null,[e(x,{content:d.$t("settings.language")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:a},{icon:o(()=>[e(Y)]),_:1})]),_:1},8,["content"]),e(ue,{trigger:"click",onSelect:g(_)},{content:o(()=>[(f(),U(X,null,ne(y,P=>e(re,{key:P.value,value:P.value},{icon:o(()=>[z(e(E,null,null,512),[[K,P.value===g(i)]])]),default:o(()=>[C(" "+H(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[v("div",{ref_key:"triggerBtn",ref:s,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),v("li",null,[e(x,{content:F.value==="light"?d.$t("settings.navbar.theme.toDark"):d.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:c},{icon:o(()=>[F.value==="dark"?(f(),w(ce,{key:0})):(f(),w(ie,{key:1}))]),_:1})]),_:1},8,["content"])]),v("li",null,[e(x,{content:g(h)?d.$t("settings.navbar.screen.toExit"):d.$t("settings.navbar.screen.toFull")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:g(I)},{icon:o(()=>[g(h)?(f(),w(Ft,{key:0})):(f(),w(jt,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])])],64))])])}}});const bn=J(vn,[["__scopeId","data-v-55bca776"]]),gn=N({__name:"index",setup(u){const t=ke({isLhw711:location.hostname=="k5.lhw711.cn",isCN:location.hostname=="k5.vicicode.cn"}),p=()=>{var n;return(n=document.getElementsByTagName("meta").builtTime)==null?void 0:n.content};return(n,r)=>{const _=Ee,i=Fo,h=Nt;return f(),w(h,{class:"footer"},{default:o(()=>[e(i,null,{default:o(()=>[e(_,{href:"https://github.com/silenty4ng/k5web",target:"_blank"},{default:o(()=>[C("K5Web - V0.1."+H(p()),1)]),_:1}),z(e(_,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[0]||(r[0]=[C("\u8700ICP\u59072024089755\u53F7-1",-1)])]),_:1},512),[[K,t.isCN]]),z(e(_,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[1]||(r[1]=[C("\u9C81ICP\u59072024058690\u53F7-1",-1)])]),_:1},512),[[K,t.isLhw711]])]),_:1})]),_:1})}}});const yn=J(gn,[["__scopeId","data-v-61069ac8"]]),kn={class:"tag-link"},Sn=N({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(u){const t=u,p=ee(),n=te(),r=le(),_=c=>{p.push({...c})},i=$(()=>r.getTabList),h=$(()=>t.itemData.fullPath!==n.fullPath),I=$(()=>t.index===0),y=$(()=>[0,1].includes(t.index)),F=$(()=>t.index===i.value.length-1),O=(c,s)=>{if(r.deleteTag(s,c),t.itemData.fullPath===n.fullPath){const a=i.value[s-1];p.push({name:a.name})}},M=()=>i.value.findIndex(c=>c.fullPath===n.fullPath),m=async c=>{const{itemData:s,index:a}=t,S=[...i.value];if(c==="current")O(s,a);else if(c==="left"){const b=M();S.splice(1,t.index-1),r.freshTabList(S),b<a&&p.push({name:s.name})}else if(c==="right"){const b=M();S.splice(t.index+1),r.freshTabList(S),b>a&&p.push({name:s.name})}else if(c==="others"){const b=i.value.filter((D,l)=>l===0||l===t.index);r.freshTabList(b),p.push({name:s.name})}else c==="reload"?(r.deleteCache(s),await p.push({name:ro,params:{path:n.fullPath}}),r.addCache(s.name)):(r.resetTabList(),p.push({name:uo}))};return(c,s)=>{const a=qt,S=Wt,b=ve,D=Gt,l=Jt,k=Qt,d=Xt,L=he;return f(),w(L,{trigger:"contextMenu","popup-max-height":!1,onSelect:m},{content:o(()=>[e(b,{disabled:h.value,value:"reload"},{default:o(()=>[e(S),s[2]||(s[2]=v("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1))]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:I.value,value:"current"},{default:o(()=>[e(a),s[3]||(s[3]=v("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{disabled:y.value,value:"left"},{default:o(()=>[e(D),s[4]||(s[4]=v("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:F.value,value:"right"},{default:o(()=>[e(l),s[5]||(s[5]=v("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{value:"others"},{default:o(()=>[e(k),s[6]||(s[6]=v("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1))]),_:1},8,["value"]),e(b,{value:"all"},{default:o(()=>[e(d),s[7]||(s[7]=v("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1))]),_:1},8,["value"])]),default:o(()=>[v("span",{class:Se(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":u.itemData.fullPath===c.$route.fullPath}]),onClick:s[1]||(s[1]=j=>_(u.itemData))},[v("span",kn,H(c.$t(u.itemData.title)),1),v("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:s[0]||(s[0]=bo(j=>O(u.itemData,u.index),["stop"]))},[e(a)])],2)]),_:1})}}});const wn=J(Sn,[["__scopeId","data-v-10c1deb7"]]),$n={class:"tab-bar-container"},Ln={class:"tab-bar-box"},En={class:"tab-bar-scroll"},Fn={class:"tags-wrap"},jn=N({__name:"index",setup(u){const t=G(),p=le(),n=A(),r=$(()=>p.getTabList),_=$(()=>t.navbar?60:0);return we(()=>t.navbar,()=>{n.value.updatePosition()}),ye(i=>{!i.meta.noAffix&&!r.value.some(h=>h.fullPath===i.fullPath)&&p.updateTabList(i)},!0),go(()=>{co()}),(i,h)=>{const I=Yt;return f(),U("div",$n,[e(I,{ref_key:"affixRef",ref:n,"offset-top":_.value},{default:o(()=>[v("div",Ln,[v("div",En,[v("div",Fn,[(f(!0),U(X,null,ne(r.value,(y,F)=>(f(),w(wn,{key:y.fullPath,index:F,"item-data":y},null,8,["index","item-data"]))),128))])]),h[0]||(h[0]=v("div",{class:"tag-bar-operation"},null,-1))])]),_:1},8,["offset-top"])])}}});const Cn=J(jn,[["__scopeId","data-v-2744fb32"]]);function On(u,t,p,n=!1){u.addEventListener&&typeof u.addEventListener=="function"&&u.addEventListener(t,p,n)}function Dn(u,t,p,n=!1){u.removeEventListener&&typeof u.removeEventListener=="function"&&u.removeEventListener(t,p,n)}const In=992;function Mn(){return document.body.getBoundingClientRect().width-1<In}function Hn(u){const t=G();function p(){if(!document.hidden){const r=Mn();t.toggleDevice(r?"mobile":"desktop"),t.toggleMenu(r)}}const n=fo(p,100);$e(()=>{u&&n()}),yo(()=>{On(window,"resize",n)}),ko(()=>{Dn(window,"resize",n)})}const Tn=N({__name:"page-layout",setup(u){const t=le(),p=$(()=>t.getCacheList);return(n,r)=>{const _=ae("router-view");return f(),w(_,null,{default:o(({Component:i,route:h})=>[e(wo,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[h.meta.ignoreCache?(f(),w(_e(i),{key:h.fullPath})):(f(),w(So,{key:1,include:p.value},[(f(),w(_e(i),{key:h.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),Pn={key:0,class:"layout-navbar"},Vn={class:"menu-wrapper"},xn="60px",Bn=N({__name:"default-layout",setup(u){const t=ke({account:"",nickname:"",password:"",password2:"",motto:""}),p=async()=>{const l=await me.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,tab:"login",keep:!1});l.code==1&&i.setInfo({showLogin:!1,name:l.data.userInfo.nickname,accountId:l.data.userInfo.token})},n=async()=>{if(t.password==""||t.account==""||t.nickname==""){Z.error({content:"\u7528\u6237\u540D\u3001\u6635\u79F0\u53CA\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",duration:5*1e3});return}if(t.password!=t.password2){Z.error({content:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4",duration:5*1e3});return}const l=await me.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,nickname:t.nickname,motto:t.motto,tab:"register"});l.code==1&&i.setInfo({showRegister:!1,name:t.nickname,accountId:l.data.userInfo.token})},r=A(!1),_=G(),i=be(),h=ee(),I=te(),y=ge();Hn(!0);const F=$(()=>_.navbar),O=$(()=>_.menu&&!_.topMenu),M=$(()=>_.hideMenu),m=$(()=>_.footer),c=$(()=>_.menuCollapse?48:_.menuWidth),s=$(()=>_.menuCollapse),a=$(()=>{const l=O.value&&!M.value?{paddingLeft:`${c.value}px`}:{},k=F.value?{paddingTop:xn}:{};return{...l,...k}}),S=l=>{!r.value||_.updateSettings({menuCollapse:l})};we(()=>i.role,l=>{l&&!y.accessRouter(I)&&h.push({name:"notFound"})});const b=A(!1),D=()=>{b.value=!1};return $o("toggleDrawerMenu",()=>{b.value=!b.value}),$e(()=>{r.value=!0}),(l,k)=>{const d=ae("desktop-icon"),L=jo,j=Co,B=ae("lock-on-icon"),q=Oo,T=Do,Q=Io,W=to,V=Zt,Y=oo,x=eo;return f(),w(x,{class:Se(["layout",{mobile:g(_).hideMenu}])},{default:o(()=>[e(Q,{visible:g(i).showLogin,"onUpdate:visible":k[2]||(k[2]=E=>g(i).showLogin=E),attach:"body",header:l.$t("global.login"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(T,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:p},{default:o(()=>[e(j,{name:"account"},{default:o(()=>[e(L,{modelValue:t.account,"onUpdate:modelValue":k[0]||(k[0]=E=>t.account=E),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(d)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,{name:"password"},{default:o(()=>[e(L,{modelValue:t.password,"onUpdate:modelValue":k[1]||(k[1]=E=>t.password=E),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,null,{default:o(()=>[e(q,{theme:"primary",type:"submit",block:""},{default:o(()=>[C(H(l.$t("global.login")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),e(Q,{visible:g(i).showRegister,"onUpdate:visible":k[8]||(k[8]=E=>g(i).showRegister=E),attach:"body",header:l.$t("global.register"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(T,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:n},{default:o(()=>[e(j,{name:"account"},{default:o(()=>[e(L,{modelValue:t.account,"onUpdate:modelValue":k[3]||(k[3]=E=>t.account=E),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(d)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,{name:"nickname"},{default:o(()=>[e(L,{modelValue:t.nickname,"onUpdate:modelValue":k[4]||(k[4]=E=>t.nickname=E),clearable:"",placeholder:l.$t("global.nickname")},{"prefix-icon":o(()=>[e(d)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,{name:"password"},{default:o(()=>[e(L,{modelValue:t.password,"onUpdate:modelValue":k[5]||(k[5]=E=>t.password=E),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,{name:"password2"},{default:o(()=>[e(L,{modelValue:t.password2,"onUpdate:modelValue":k[6]||(k[6]=E=>t.password2=E),type:"password",clearable:"",placeholder:l.$t("global.password2")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,{name:"motto"},{default:o(()=>[e(L,{modelValue:t.motto,"onUpdate:modelValue":k[7]||(k[7]=E=>t.motto=E),clearable:"",placeholder:l.$t("global.motto")},{"prefix-icon":o(()=>[e(d)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(j,null,{default:o(()=>[e(q,{theme:"primary",type:"submit",block:""},{default:o(()=>[C(H(l.$t("global.register")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),F.value?(f(),U("div",Pn,[e(bn)])):R("",!0),e(x,null,{default:o(()=>[e(x,null,{default:o(()=>[O.value?z((f(),w(W,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:s.value,collapsible:!0,width:c.value,style:fe({paddingTop:F.value?"60px":""}),"hide-trigger":!0,onCollapse:S},{default:o(()=>[v("div",Vn,[e(se)])]),_:1},8,["collapsed","width","style"])),[[K,!M.value]]):R("",!0),M.value?(f(),w(V,{key:1,visible:b.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:D,title:"K5Web"},{default:o(()=>[e(se)]),_:1},8,["visible"])):R("",!0),e(x,{class:"layout-content",style:fe(a.value)},{default:o(()=>[g(_).tabBar?(f(),w(Cn,{key:0})):R("",!0),e(Y,null,{default:o(()=>[e(Tn)]),_:1}),m.value?(f(),w(yn,{key:1})):R("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const va=J(Bn,[["__scopeId","data-v-08e5feb2"]]);export{va as default};
