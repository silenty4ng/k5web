import{M as oe,h as Et,i as jt,j as Ft,k as Ot,T as Dt,m as _e,n as Ct,o as It,d as Mt,p as Tt,q as Ht,r as fe,s as Pt,t as xt,u as Bt,v as Ut,L as Rt,w as Vt,x as zt,y as Kt,z as At,E as Nt,F as qt,G as Wt,D as Jt,H as Gt,J as Qt,K as Xt}from"./@arco-design.10d71e42.js";import{c as ue}from"./vue.ffb667bf.js";import{b as Y,u as Z}from"./vue-router.a9f5d186.js";import{u as me,a as Yt,b as Zt,c as he,d as q,l as ve,_ as W,e as eo,L as to,f as se,R as oo,D as no,r as ao}from"./index.081d14fd.js";import{a as so,b as lo,c as ro,d as uo}from"./@vueuse.a7db99fe.js";import{l as co}from"./lodash.c4b3d061.js";import{c as w,d as A,r as N,x as e,k as io,a7 as ce,i as po,o as f,a as x,b as v,u as o,_,v as U,s as S,F as J,z as C,A as T,N as R,O as V,Q as ne,h as be,n as ge,H as _o,w as ye,m as fo,l as ke,a9 as mo,J as ho,q as vo,P as ie,aI as bo,T as go,E as yo,e as de}from"./@vue.6ceb3fa6.js";import{v as Se}from"./vue-i18n.5fb6db72.js";import{d as ee,c as ko,e as So}from"./serial.0b46e76d.js";import{L as we,S as wo,I as $o,F as Lo,B as Eo,a as jo,b as Fo}from"./tdesign-vue-next.ed813ef2.js";import{a as pe}from"./axios.06033baf.js";import{D as X,L as te}from"./tdesign-icons-vue-next.a5366875.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.35d19ede.js";import"./@intlify.02b6985d.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./nprogress.6328d444.js";import"./mitt.550594b0.js";import"./pinia.fa8b6be2.js";import"./vue-demi.0e7683c7.js";import"./@zxing.8654f0db.js";import"./@microsoft.d2aaf3b7.js";import"./vue-matomo.5bdfe9a5.js";import"./lodash-es.18922ecc.js";import"./sortablejs.77296005.js";import"./@popperjs.f3f73334.js";import"./@babel.9b6013fe.js";const $e="LoseHu 117 \u5386\u53F2\u7248\u672C",Le="official",Ee="official",Oo={name:$e,uart:Le,charset:Ee},Do=Object.freeze(Object.defineProperty({__proto__:null,name:$e,uart:Le,charset:Ee,default:Oo},Symbol.toStringTag,{value:"Module"})),je="LoseHu 117 \u5386\u53F2\u7248\u672C\u6269\u5BB9\u7248",Fe="losehu",Oe="losehu",De=!0,Co={name:je,uart:Fe,charset:Oe,K:De},Io=Object.freeze(Object.defineProperty({__proto__:null,name:je,uart:Fe,charset:Oe,K:De,default:Co},Symbol.toStringTag,{value:"Module"})),Ce="LoseHu 118+",Ie="official",Me="official",Mo={name:Ce,uart:Ie,charset:Me},To=Object.freeze(Object.defineProperty({__proto__:null,name:Ce,uart:Ie,charset:Me,default:Mo},Symbol.toStringTag,{value:"Module"})),Te="LoseHu 118+ 2Mbit \u6269\u5BB9\u7248",He="losehu",Pe="gb2312",xe=!0,Be=!0,Ho={name:Te,uart:He,charset:Pe,H:xe,sat:Be},Po=Object.freeze(Object.defineProperty({__proto__:null,name:Te,uart:He,charset:Pe,H:xe,sat:Be,default:Ho},Symbol.toStringTag,{value:"Module"})),Ue="LoseHu 118+ \u6269\u5BB9\u7248",Re="losehu",Ve="gb2312",ze=!0,xo={name:Ue,uart:Re,charset:Ve,K:ze},Bo=Object.freeze(Object.defineProperty({__proto__:null,name:Ue,uart:Re,charset:Ve,K:ze,default:xo},Symbol.toStringTag,{value:"Module"})),Ke="LoseHu 120+ \u6269\u5BB9\u7248",Ae="losehu",Ne="gb2312",qe=!0,We=!0,Uo={name:Ke,uart:Ae,charset:Ne,K:qe,sat:We},Ro=Object.freeze(Object.defineProperty({__proto__:null,name:Ke,uart:Ae,charset:Ne,K:qe,sat:We,default:Uo},Symbol.toStringTag,{value:"Module"})),Je="LoseHu 124+ 2Mbit \u6269\u5BB9\u7248",Ge="losehu",Qe="gb2312",Xe=!0,Ye=!0,Ze=!0,Vo={name:Je,uart:Ge,charset:Qe,H:Xe,sat:Ye,newpinyin:Ze},zo=Object.freeze(Object.defineProperty({__proto__:null,name:Je,uart:Ge,charset:Qe,H:Xe,sat:Ye,newpinyin:Ze,default:Vo},Symbol.toStringTag,{value:"Module"})),et="LoseHu \u5F15\u5BFC\u7A0B\u5E8F",tt="losehu",ot="gb2312",nt=!0,at=!0,st=!0,Ko={name:et,uart:tt,charset:ot,H:nt,sat:at,newpinyin:st},Ao=Object.freeze(Object.defineProperty({__proto__:null,name:et,uart:tt,charset:ot,H:nt,sat:at,newpinyin:st,default:Ko},Symbol.toStringTag,{value:"Module"})),lt="LoseHu Doppler",rt="losehu",ut="gb2312",ct=!0,it=!0,dt=!0,pt=!0,No={name:lt,uart:rt,charset:ut,H:ct,sat:it,sat2:dt,newpinyin:pt},qo=Object.freeze(Object.defineProperty({__proto__:null,name:lt,uart:rt,charset:ut,H:ct,sat:it,sat2:dt,newpinyin:pt,default:No},Symbol.toStringTag,{value:"Module"})),_t="LoseHu Patch LTS\uFF08BD8DFN\uFF09",ft="official",mt="official",ht=!0,Wo={name:_t,uart:ft,charset:mt,localmdc:ht},Jo=Object.freeze(Object.defineProperty({__proto__:null,name:_t,uart:ft,charset:mt,localmdc:ht,default:Wo},Symbol.toStringTag,{value:"Module"})),vt="LoseHu Patch LTS\uFF08BD8DFN\uFF09\u6269\u5BB9\u7248",bt="losehu",gt="losehu",yt=!0,kt=!0,St=!0,Go={name:vt,uart:bt,charset:gt,K:yt,localmdc:kt,fm30:St},Qo=Object.freeze(Object.defineProperty({__proto__:null,name:vt,uart:bt,charset:gt,K:yt,localmdc:kt,fm30:St,default:Go},Symbol.toStringTag,{value:"Module"})),wt="Official",Xo={name:wt},Yo=Object.freeze(Object.defineProperty({__proto__:null,name:wt,default:Xo},Symbol.toStringTag,{value:"Module"}));function Zo(){const u=Y(),t=me();return{logout:async a=>{await t.logout();const r=u.currentRoute.value;oe.success("\u767B\u51FA\u6210\u529F"),u.push({name:a&&typeof a=="string"?a:"login",query:{...u.currentRoute.value.query,redirect:r.name}})}}}const en=(u,t)=>{const{target:d="_blank",...a}=t||{};window.open(u,d,Object.entries(a).reduce((r,p)=>{const[i,h]=p;return[...r,`${i}=${h}`]},[]).join(","))},tn=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),on=[...Yt,...Zt],nn=on.map(u=>{const{name:t,path:d,meta:a,redirect:r,children:p}=u;return{name:t,path:d,meta:a,redirect:r,children:p}});function an(){const u=he(),t=q(),d=w(()=>t.menuFromServer?t.appAsyncMenus:nn);return{menuTree:w(()=>{const r=co.exports.cloneDeep(d.value);r.sort((i,h)=>(i.meta.order||0)-(h.meta.order||0));function p(i,h){return i?i.map(g=>{var j,M;if(!u.accessRouter(g))return null;if(((j=g.meta)==null?void 0:j.hideChildrenInMenu)||!g.children)return g.children=[],g;g.children=g.children.filter(m=>{var c;return((c=m.meta)==null?void 0:c.hideInMenu)!==!0});const L=p(g.children,h+1);return L.length||h>1?(g.children=L,g):((M=g.meta)==null?void 0:M.hideInMenu)===!1?g:null}).filter(Boolean):null}return p(r,0)})}}function sn(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!io(u)}const ln=A({emit:["collapse"],setup(){const{t:u}=Se.exports.useI18n(),t=q(),d=Y(),a=Z(),{menuTree:r}=an(),p=w({get(){return t.device==="desktop"?t.menuCollapse:!1},set(m){t.updateSettings({menuCollapse:m})}}),i=w(()=>t.topMenu),h=N([]),I=N([]),g=m=>{if(tn.test(m.path)){en(m.path),I.value=[m.name];return}const{hideInMenu:c,activeMenu:l}=m.meta;if(a.name===m.name&&!c&&!l){I.value=[m.name];return}d.push({name:m.name})},L=m=>{const c=[];let l=!1;const s=(k,b)=>{var F;if(k.name===m){l=!0,c.push(...b);return}(F=k.children)!=null&&F.length&&k.children.forEach(n=>{s(n,[...b,n.name])})};return r.value.forEach(k=>{l||s(k,[k.name])}),c};ve(m=>{const{requiresAuth:c,activeMenu:l,hideInMenu:s}=m.meta;if(c&&(!s||l)){const k=L(l||m.name),b=new Set([...k,...h.value]);h.value=[...b],I.value=[l||k[k.length-1]]}},!0);const j=m=>{t.device==="desktop"&&t.updateSettings({menuCollapse:m})},M=()=>{function m(c,l=[]){return c&&c.forEach(s=>{var F;const k=(F=s==null?void 0:s.meta)!=null&&F.icon?()=>{var n;return ce(ue(`<${(n=s==null?void 0:s.meta)==null?void 0:n.icon}/>`))}:null,b=(s==null?void 0:s.children)&&(s==null?void 0:s.children.length)!==0?e(jt,{key:s==null?void 0:s.name},{default:()=>[m(s==null?void 0:s.children)],icon:k,title:()=>{var n;return ce(ue(u(((n=s==null?void 0:s.meta)==null?void 0:n.locale)||"")))}}):e(Ft,{key:s==null?void 0:s.name,onClick:()=>g(s)},{default:()=>{var n;return[u(((n=s==null?void 0:s.meta)==null?void 0:n.locale)||"")]},icon:k});l.push(b)}),l}return m(r.value)};return()=>{let m;return e(Et,{mode:i.value?"horizontal":"vertical",collapsed:p.value,"onUpdate:collapsed":c=>p.value=c,"open-keys":h.value,"onUpdate:open-keys":c=>h.value=c,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":I.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:j},sn(m=M())?m:{default:()=>[m]})}}});const ae=W(ln,[["__scopeId","data-v-90632f3f"]]),rn={class:"navbar"},un={class:"left-side"},cn={key:0},dn={class:"center-side"},pn={class:"right-side"},_n=A({__name:"index",setup(u){const{t}=Se.exports.useI18n(),d=Object.assign({"/src/drivers/losehu117.json":Do,"/src/drivers/losehu117k.json":Io,"/src/drivers/losehu118.json":To,"/src/drivers/losehu118h.json":Po,"/src/drivers/losehu118k.json":Bo,"/src/drivers/losehu120k.json":Ro,"/src/drivers/losehu124h.json":zo,"/src/drivers/losehubl.json":Ao,"/src/drivers/losehud.json":qo,"/src/drivers/lts.json":Jo,"/src/drivers/ltsk.json":Qo,"/src/drivers/todo.json":Yo}),a=q(),r=Z();Zo();const{changeLocale:p,currentLocale:i}=eo(),{isFullscreen:h,toggle:I}=so(),g=[...to];w(()=>userStore.avatar);const L=w(()=>a.theme),j=w(()=>a.topMenu&&a.menu),M=lo({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(n){a.toggleTheme(n)}}),m=ro(M),c=()=>{m()},l=N(),s=()=>{const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});l.value.dispatchEvent(n)},k=po("toggleDrawerMenu"),b={"L_BL[0-9][0-9][0-9]":"losehubl.json","LOSEHU.*P.*K":"ltsk.json","LOSEHU.*P.*":"lts.json","LOSEHU.*D":"losehud.json","LOSEHU13[0-9].*HS":"losehu124h.json","LOSEHU13[0-9].*H":"losehu124h.json","LOSEHU13[0-9].*KS":"losehu120k.json","LOSEHU13[0-9].*K":"losehu120k.json","LOSEHU13[0-9].*":"losehu118.json","LOSEHU12[4-9].*HS":"losehu124h.json","LOSEHU12[4-9].*H":"losehu124h.json","LOSEHU12[0-3].*H":"losehu118h.json","LOSEHU12[0-9].*KS":"losehu120k.json","LOSEHU12[0-9].*K":"losehu120k.json","LOSEHU12[0-9].*":"losehu118.json","LOSEHU11[8-9].*H":"losehu118h.json","LOSEHU11[8-9].*K":"losehu118k.json","LOSEHU11[8-9].*":"losehu118.json","LOSEHU11[2-7].*K":"losehu117k.json","LOSEHU11[2-7].*":"losehu117.json",".*":"todo.json"},F=async()=>{if(a.connectState==!1){try{a.connectPort&&await ee(a.connectPort)}catch{}let n;if(/Mobi|Android|iPhone/i.test(navigator.userAgent)?alert("\u624B\u673A\u5199\u9891\u5F00\u53D1\u4E2D\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528\u7535\u8111\u8FDE\u63A5\u7535\u53F0\u5199\u9891\uFF01\uFF01\uFF01In the development of mobile, it cannot be used normally. Please use a computer to connect!!!"):n=await ko(),!n){alert(t("global.connectFail"));return}a.updateSettings({connectPort:n});const y={};Object.keys(d).forEach(D=>{y[D.substring(D.lastIndexOf("/")+1)]=d[D].default});let O=null,E="";try{E=await So(n)}catch{throw await ee(n),a.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""}),alert(t("global.handshakeFail")),new Error(t("global.handshakeFail"))}const B={name:"TODO",uart:"official",charset:"official",K:!1,H:!1,localmdc:!1,sat:!1,sat2:!1,newpinyin:!1,fm30:!1};Object.keys(b).some(D=>{if(new RegExp(D).test(E))return O=Object.assign(B,y[b[D]]),!0}),a.updateSettings({connectState:!0,firmwareVersion:E,configuration:O})}else await ee(a.connectPort),a.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""})};return(n,y)=>{const O=Ct,E=It,B=Ot,D=we,H=Mt,G=Tt,z=Dt,Q=Ht,K=fe,$=_e,le=Pt,re=xt,$t=Bt,Lt=Ut;return f(),x("div",rn,[v("div",un,[e(B,null,{default:o(()=>[e(O,{style:{margin:0,fontSize:"18px"},heading:5},{default:o(()=>[!j.value&&_(a).device==="mobile"?U("",!0):(f(),x("div",cn," K5Web "))]),_:1}),!j.value&&_(a).device==="mobile"?(f(),S(E,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:_(k)},null,8,["onClick"])):U("",!0)]),_:1})]),v("div",dn,[j.value?(f(),S(ae,{key:0})):U("",!0)]),v("ul",pn,[!j.value&&_(a).device==="mobile"?(f(),x(J,{key:0},[v("li",null,[_(t)("navbar.qa")=="Feedback"?(f(),S(D,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[C(T(n.$t("navbar.qa")),1)]),_:1})):(f(),S(D,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[C(T(n.$t("navbar.qa")),1)]),_:1}))]),v("li",null,[R(e(H,{type:"primary",onClick:F},{default:o(()=>[C(T(_(a).connectState?n.$t("navbar.disconnect"):n.$t("navbar.connect")),1)]),_:1},512),[[V,_(r).path!=="/tool/flash"]])]),v("li",null,[e(z,{content:n.$t("settings.language")},{default:o(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:s},{icon:o(()=>[e(G)]),_:1})]),_:1},8,["content"]),e($,{trigger:"click",onSelect:_(p)},{content:o(()=>[(f(),x(J,null,ne(g,P=>e(K,{key:P.value,value:P.value},{icon:o(()=>[R(e(Q,null,null,512),[[V,P.value===_(i)]])]),default:o(()=>[C(" "+T(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[v("div",{ref_key:"triggerBtn",ref:l,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),v("li",null,[e(z,{content:L.value==="light"?n.$t("settings.navbar.theme.toDark"):n.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:c},{icon:o(()=>[L.value==="dark"?(f(),S(le,{key:0})):(f(),S(re,{key:1}))]),_:1})]),_:1},8,["content"])])],64)):(f(),x(J,{key:1},[v("li",null,[_(t)("navbar.qa")=="Feedback"?(f(),S(D,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[C(T(n.$t("navbar.qa")),1)]),_:1})):(f(),S(D,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[C(T(n.$t("navbar.qa")),1)]),_:1}))]),v("li",null,[R(e(H,{type:"primary",onClick:F},{default:o(()=>[C(T(_(a).connectState?n.$t("navbar.disconnect"):n.$t("navbar.connect")),1)]),_:1},512),[[V,_(r).path!=="/tool/flash"&&_(r).path!=="/idea/firmware"]]),R(e(H,{disabled:"disabled",title:"\u5347\u7EA7\u6A21\u5F0F\u65E0\u9700\u8FDE\u63A5",type:"primary",onClick:F},{default:o(()=>[C(T(_(a).connectState?n.$t("navbar.disconnect"):n.$t("navbar.connect")),1)]),_:1},512),[[V,_(r).path=="/tool/flash"||_(r).path=="/idea/firmware"]])]),v("li",null,[e(z,{content:n.$t("settings.language")},{default:o(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:s},{icon:o(()=>[e(G)]),_:1})]),_:1},8,["content"]),e($,{trigger:"click",onSelect:_(p)},{content:o(()=>[(f(),x(J,null,ne(g,P=>e(K,{key:P.value,value:P.value},{icon:o(()=>[R(e(Q,null,null,512),[[V,P.value===_(i)]])]),default:o(()=>[C(" "+T(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[v("div",{ref_key:"triggerBtn",ref:l,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),v("li",null,[e(z,{content:L.value==="light"?n.$t("settings.navbar.theme.toDark"):n.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:c},{icon:o(()=>[L.value==="dark"?(f(),S(le,{key:0})):(f(),S(re,{key:1}))]),_:1})]),_:1},8,["content"])]),v("li",null,[e(z,{content:_(h)?n.$t("settings.navbar.screen.toExit"):n.$t("settings.navbar.screen.toFull")},{default:o(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:_(I)},{icon:o(()=>[_(h)?(f(),S($t,{key:0})):(f(),S(Lt,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])])],64))])])}}});const fn=W(_n,[["__scopeId","data-v-a15371be"]]),mn=A({__name:"index",setup(u){const t=be({isLhw711:location.hostname=="k5.lhw711.cn",isCN:location.hostname=="k5.vicicode.cn"}),d=()=>{var a;return(a=document.getElementsByTagName("meta").builtTime)==null?void 0:a.content};return(a,r)=>{const p=we,i=wo,h=Rt;return f(),S(h,{class:"footer"},{default:o(()=>[e(i,null,{default:o(()=>[e(p,{href:"https://github.com/silenty4ng/k5web",target:"_blank"},{default:o(()=>[C("K5Web - V0.1."+T(d()),1)]),_:1}),R(e(p,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[0]||(r[0]=[C("\u8700ICP\u59072024089755\u53F7-1",-1)])]),_:1},512),[[V,t.isCN]]),R(e(p,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[...r[1]||(r[1]=[C("\u9C81ICP\u59072024058690\u53F7-1",-1)])]),_:1},512),[[V,t.isLhw711]])]),_:1})]),_:1})}}});const hn=W(mn,[["__scopeId","data-v-61069ac8"]]),vn={class:"tag-link"},bn=A({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(u){const t=u,d=Y(),a=Z(),r=se(),p=c=>{d.push({...c})},i=w(()=>r.getTabList),h=w(()=>t.itemData.fullPath!==a.fullPath),I=w(()=>t.index===0),g=w(()=>[0,1].includes(t.index)),L=w(()=>t.index===i.value.length-1),j=(c,l)=>{if(r.deleteTag(l,c),t.itemData.fullPath===a.fullPath){const s=i.value[l-1];d.push({name:s.name})}},M=()=>i.value.findIndex(c=>c.fullPath===a.fullPath),m=async c=>{const{itemData:l,index:s}=t,k=[...i.value];if(c==="current")j(l,s);else if(c==="left"){const b=M();k.splice(1,t.index-1),r.freshTabList(k),b<s&&d.push({name:l.name})}else if(c==="right"){const b=M();k.splice(t.index+1),r.freshTabList(k),b>s&&d.push({name:l.name})}else if(c==="others"){const b=i.value.filter((F,n)=>n===0||n===t.index);r.freshTabList(b),d.push({name:l.name})}else c==="reload"?(r.deleteCache(l),await d.push({name:oo,params:{path:a.fullPath}}),r.addCache(l.name)):(r.resetTabList(),d.push({name:no}))};return(c,l)=>{const s=Vt,k=zt,b=fe,F=Kt,n=At,y=Nt,O=qt,E=_e;return f(),S(E,{trigger:"contextMenu","popup-max-height":!1,onSelect:m},{content:o(()=>[e(b,{disabled:h.value,value:"reload"},{default:o(()=>[e(k),l[2]||(l[2]=v("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1))]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:I.value,value:"current"},{default:o(()=>[e(s),l[3]||(l[3]=v("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{disabled:g.value,value:"left"},{default:o(()=>[e(F),l[4]||(l[4]=v("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:L.value,value:"right"},{default:o(()=>[e(n),l[5]||(l[5]=v("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),e(b,{value:"others"},{default:o(()=>[e(y),l[6]||(l[6]=v("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1))]),_:1},8,["value"]),e(b,{value:"all"},{default:o(()=>[e(O),l[7]||(l[7]=v("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1))]),_:1},8,["value"])]),default:o(()=>[v("span",{class:ge(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":u.itemData.fullPath===c.$route.fullPath}]),onClick:l[1]||(l[1]=B=>p(u.itemData))},[v("span",vn,T(c.$t(u.itemData.title)),1),v("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:l[0]||(l[0]=_o(B=>j(u.itemData,u.index),["stop"]))},[e(s)])],2)]),_:1})}}});const gn=W(bn,[["__scopeId","data-v-10c1deb7"]]),yn={class:"tab-bar-container"},kn={class:"tab-bar-box"},Sn={class:"tab-bar-scroll"},wn={class:"tags-wrap"},$n=A({__name:"index",setup(u){const t=q(),d=se(),a=N(),r=w(()=>d.getTabList),p=w(()=>t.navbar?60:0);return ye(()=>t.navbar,()=>{a.value.updatePosition()}),ve(i=>{!i.meta.noAffix&&!r.value.some(h=>h.fullPath===i.fullPath)&&d.updateTabList(i)},!0),fo(()=>{ao()}),(i,h)=>{const I=Wt;return f(),x("div",yn,[e(I,{ref_key:"affixRef",ref:a,"offset-top":p.value},{default:o(()=>[v("div",kn,[v("div",Sn,[v("div",wn,[(f(!0),x(J,null,ne(r.value,(g,L)=>(f(),S(gn,{key:g.fullPath,index:L,"item-data":g},null,8,["index","item-data"]))),128))])]),h[0]||(h[0]=v("div",{class:"tag-bar-operation"},null,-1))])]),_:1},8,["offset-top"])])}}});const Ln=W($n,[["__scopeId","data-v-2744fb32"]]);function En(u,t,d,a=!1){u.addEventListener&&typeof u.addEventListener=="function"&&u.addEventListener(t,d,a)}function jn(u,t,d,a=!1){u.removeEventListener&&typeof u.removeEventListener=="function"&&u.removeEventListener(t,d,a)}const Fn=992;function On(){return document.body.getBoundingClientRect().width-1<Fn}function Dn(u){const t=q();function d(){if(!document.hidden){const r=On();t.toggleDevice(r?"mobile":"desktop"),t.toggleMenu(r)}}const a=uo(d,100);ke(()=>{u&&a()}),mo(()=>{En(window,"resize",a)}),ho(()=>{jn(window,"resize",a)})}const Cn=A({__name:"page-layout",setup(u){const t=se(),d=w(()=>t.getCacheList);return(a,r)=>{const p=vo("router-view");return f(),S(p,null,{default:o(({Component:i,route:h})=>[e(go,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[h.meta.ignoreCache?(f(),S(ie(i),{key:h.fullPath})):(f(),S(bo,{key:1,include:d.value},[(f(),S(ie(i),{key:h.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),In={key:0,class:"layout-navbar"},Mn={class:"menu-wrapper"},Tn="60px",Hn=A({__name:"default-layout",setup(u){const t=be({account:"",nickname:"",password:"",password2:"",motto:""}),d=async()=>{const n=await pe.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,tab:"login",keep:!1});n.code==1&&i.setInfo({showLogin:!1,name:n.data.userInfo.nickname,accountId:n.data.userInfo.token})},a=async()=>{if(t.password==""||t.account==""||t.nickname==""){oe.error({content:"\u7528\u6237\u540D\u3001\u6635\u79F0\u53CA\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",duration:5*1e3});return}if(t.password!=t.password2){oe.error({content:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4",duration:5*1e3});return}const n=await pe.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,nickname:t.nickname,motto:t.motto,tab:"register"});n.code==1&&i.setInfo({showRegister:!1,name:t.nickname,accountId:n.data.userInfo.token})},r=N(!1),p=q(),i=me(),h=Y(),I=Z(),g=he();Dn(!0);const L=w(()=>p.navbar),j=w(()=>p.menu&&!p.topMenu),M=w(()=>p.hideMenu),m=w(()=>p.footer),c=w(()=>p.menuCollapse?48:p.menuWidth),l=w(()=>p.menuCollapse),s=w(()=>{const n=j.value&&!M.value?{paddingLeft:`${c.value}px`}:{},y=L.value?{paddingTop:Tn}:{};return{...n,...y}}),k=n=>{!r.value||p.updateSettings({menuCollapse:n})};ye(()=>i.role,n=>{n&&!g.accessRouter(I)&&h.push({name:"notFound"})});const b=N(!1),F=()=>{b.value=!1};return yo("toggleDrawerMenu",()=>{b.value=!b.value}),ke(()=>{r.value=!0}),(n,y)=>{const O=$o,E=Lo,B=Eo,D=jo,H=Fo,G=Qt,z=Jt,Q=Xt,K=Gt;return f(),S(K,{class:ge(["layout",{mobile:_(p).hideMenu}])},{default:o(()=>[e(H,{visible:_(i).showLogin,"onUpdate:visible":y[2]||(y[2]=$=>_(i).showLogin=$),attach:"body",header:n.$t("global.login"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(D,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:d},{default:o(()=>[e(E,{name:"account"},{default:o(()=>[e(O,{modelValue:t.account,"onUpdate:modelValue":y[0]||(y[0]=$=>t.account=$),clearable:"",placeholder:n.$t("global.username")},{"prefix-icon":o(()=>[e(_(X))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,{name:"password"},{default:o(()=>[e(O,{modelValue:t.password,"onUpdate:modelValue":y[1]||(y[1]=$=>t.password=$),type:"password",clearable:"",placeholder:n.$t("global.password")},{"prefix-icon":o(()=>[e(_(te))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,null,{default:o(()=>[e(B,{theme:"primary",type:"submit",block:""},{default:o(()=>[C(T(n.$t("global.login")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),e(H,{visible:_(i).showRegister,"onUpdate:visible":y[8]||(y[8]=$=>_(i).showRegister=$),attach:"body",header:n.$t("global.register"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(D,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:a},{default:o(()=>[e(E,{name:"account"},{default:o(()=>[e(O,{modelValue:t.account,"onUpdate:modelValue":y[3]||(y[3]=$=>t.account=$),clearable:"",placeholder:n.$t("global.username")},{"prefix-icon":o(()=>[e(_(X))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,{name:"nickname"},{default:o(()=>[e(O,{modelValue:t.nickname,"onUpdate:modelValue":y[4]||(y[4]=$=>t.nickname=$),clearable:"",placeholder:n.$t("global.nickname")},{"prefix-icon":o(()=>[e(_(X))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,{name:"password"},{default:o(()=>[e(O,{modelValue:t.password,"onUpdate:modelValue":y[5]||(y[5]=$=>t.password=$),type:"password",clearable:"",placeholder:n.$t("global.password")},{"prefix-icon":o(()=>[e(_(te))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,{name:"password2"},{default:o(()=>[e(O,{modelValue:t.password2,"onUpdate:modelValue":y[6]||(y[6]=$=>t.password2=$),type:"password",clearable:"",placeholder:n.$t("global.password2")},{"prefix-icon":o(()=>[e(_(te))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,{name:"motto"},{default:o(()=>[e(O,{modelValue:t.motto,"onUpdate:modelValue":y[7]||(y[7]=$=>t.motto=$),clearable:"",placeholder:n.$t("global.motto")},{"prefix-icon":o(()=>[e(_(X))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(E,null,{default:o(()=>[e(B,{theme:"primary",type:"submit",block:""},{default:o(()=>[C(T(n.$t("global.register")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),L.value?(f(),x("div",In,[e(fn)])):U("",!0),e(K,null,{default:o(()=>[e(K,null,{default:o(()=>[j.value?R((f(),S(G,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:l.value,collapsible:!0,width:c.value,style:de({paddingTop:L.value?"60px":""}),"hide-trigger":!0,onCollapse:k},{default:o(()=>[v("div",Mn,[e(ae)])]),_:1},8,["collapsed","width","style"])),[[V,!M.value]]):U("",!0),M.value?(f(),S(z,{key:1,visible:b.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:F,title:"K5Web"},{default:o(()=>[e(ae)]),_:1},8,["visible"])):U("",!0),e(K,{class:"layout-content",style:de(s.value)},{default:o(()=>[_(p).tabBar?(f(),S(Ln,{key:0})):U("",!0),e(Q,null,{default:o(()=>[e(Cn)]),_:1}),m.value?(f(),S(hn,{key:1})):U("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const _a=W(Hn,[["__scopeId","data-v-aa01284d"]]);export{_a as default};
