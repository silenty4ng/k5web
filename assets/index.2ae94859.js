import{v as K,d as M,ab as F,B as H,_ as N}from"./index.767799dd.js";/* empty css               *//* empty css               */import{d as O,r as S,c as U,bz as V,C as L,D as j,aI as i,aH as s,G as b,aN as u,aM as _,u as h,a6 as G,b7 as W,bg as q,bB as J,bF as Q}from"./arco.4840bb92.js";import{u as X}from"./loading.be8dc599.js";import{e as x,a as y,u as v,b as g,h as w,g as Y}from"./serial.d615852e.js";import{I as Z}from"./index.619f718e.js";import{M as ee}from"./move.2a80314e.js";import{T as te}from"./index.36555294.js";import"./chart.2ff044ff.js";import"./vue.b2a11794.js";import"./dep-71c4f289.3a3d098d.js";import"./index.1a102e07.js";import"./form-model.d0bcd6c4.js";import"./slot.055cf4a1.js";const ae={class:"container"},oe={name:"Radio"},ne=O({...oe,setup(re){const{t:D}=K.exports.useI18n(),o=M(),{loading:P,setLoading:f}=X(!1),a=S({renderData:Array.from({length:20}).map(t=>({})),pageSize:50,nowPage:1}),C=S({showHide:0}),I=t=>{a.renderData=t.newData},z=U(()=>[{colKey:"drag",title:D("cps.sort"),width:46},{title:"#",colKey:"index",align:"left",width:100},{title:D("cps.rx"),colKey:"rx",align:"left",width:200,cell:(t,{row:n})=>parseFloat(n.rx)?parseFloat(n.rx).toFixed(2):void 0,edit:{component:Z,props:{clearable:!0},onEdited:t=>{t.newRowData.rx=t.newRowData.rx?t.newRowData.rx:void 0;const n=[...a.renderData];n.splice((a.nowPage-1)*a.pageSize+t.rowIndex,1,t.newRowData),a.renderData=n}}},{title:D("cps.operate"),colKey:"operate",align:"left",width:150}]),R=async()=>{var t,n,p;if(o.connectState!=!0){alert(sessionStorage.getItem("noticeConnectK5"));return}if(await x(o.connectPort),f(!0),(t=o.configuration)!=null&&t.fm30){let c=new Uint8Array(60);for(let e=131008;e<131057;e+=8){const l=await y(o.connectPort,e,8,(n=o.configuration)==null?void 0:n.uart);c.set(l,e-131008)}const r=[];for(let e=0;e<60;e+=2){const l=v(c.subarray(e,e+2));l!="ffff"?r.push({rx:parseInt(l,16)/10}):r.push({})}a.renderData=r}else{let c=new Uint8Array(40);for(let e=3648;e<3681;e+=8){const l=await y(o.connectPort,e,8,(p=o.configuration)==null?void 0:p.uart);c.set(l,e-3648)}const r=[];for(let e=0;e<40;e+=2){const l=v(c.subarray(e,e+2));l!="ffff"?r.push({rx:parseInt(l,16)/10}):r.push({})}a.renderData=r}f(!1)},$=async()=>{var t,n,p,c,r;if(o.connectState!=!0){alert(sessionStorage.getItem("noticeConnectK5"));return}if(await x(o.connectPort),f(!0),(t=o.configuration)!=null&&t.fm30)for(let e=0;e<60;e+=2)a.renderData[e/2].rx?await g(o.connectPort,e+131008,w(parseInt(a.renderData[e/2].rx*10).toString(16).padStart(4,"0")),2,(n=o.configuration)==null?void 0:n.uart):await g(o.connectPort,e+131008,w("0000"),2,(p=o.configuration)==null?void 0:p.uart);else for(let e=0;e<40;e+=2)a.renderData[e/2].rx?await g(o.connectPort,e+3648,w(parseInt(a.renderData[e/2].rx*10).toString(16).padStart(4,"0")),2,(c=o.configuration)==null?void 0:c.uart):await g(o.connectPort,e+3648,w("0000"),2,(r=o.configuration)==null?void 0:r.uart);await Y(o.connectPort),f(!1)},B=async t=>{const n=[...a.renderData];n.splice(t,1,{scanlist:[]}),a.renderData=n};return(t,n)=>{const p=F,c=G,r=W,e=q,l=J,k=Q,A=H,T=te,E=V;return L(),j("div",ae,[i(p,{items:[t.$t("menu.dashboard"),t.$t("menu.cps.radio")]},null,8,["items"]),i(E,{class:"general-card"},{title:s(()=>[b("span",{onClick:n[0]||(n[0]=()=>{C.showHide+=1})},u(t.$t("menu.cps.radio")+t.$t("global.onStart")),1)]),default:s(()=>[i(k,{style:{"margin-bottom":"16px"}},{default:s(()=>[i(l,{span:12},{default:s(()=>[i(e,null,{default:s(()=>[i(r,{type:"primary",onClick:R},{icon:s(()=>[i(c)]),default:s(()=>[_(" "+u(t.$t("cps.onDeviceRead")),1)]),_:1}),i(r,{onClick:$},{icon:s(()=>[i(c)]),default:s(()=>[_(" "+u(t.$t("cps.onDeviceWrite")),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(T,{class:"ttable",loading:h(P),size:"medium",columns:z.value,data:a.renderData,pagination:{defaultPageSize:a.pageSize,total:a.renderData.length,defaultCurrent:1,pageSizeOptions:[15,30,50,100,200]},onChange:n[1]||(n[1]=d=>{a.pageSize=d.pagination.pageSize,a.nowPage=d.pagination.current}),bordered:"","lazy-load":"",headerAffixedTop:{offsetTop:60},hover:!0,"drag-sort":"row-handler",onDragSort:I},{drag:s(({row:d,rowIndex:m})=>[b("span",null,[i(h(ee))])]),index:s(({row:d,rowIndex:m})=>[_(u((a.nowPage-1)*a.pageSize+m+1),1)]),operate:s(({row:d,rowIndex:m})=>[i(A,{theme:"default",variant:"dashed",onClick:se=>B((a.nowPage-1)*a.pageSize+m)},{default:s(()=>[_(u(t.$t("cps.clear")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","columns","data","pagination"])]),_:1})])}}});const xe=N(ne,[["__scopeId","data-v-be263a43"]]);export{xe as default};
