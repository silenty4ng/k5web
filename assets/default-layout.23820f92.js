import{M as ne,h as Ft,i as Dt,j as Ct,k as Ot,T as It,m as _e,n as Mt,o as Tt,d as Ht,p as Pt,q as Bt,r as fe,s as xt,t as Ut,u as Rt,v as Vt,L as zt,w as Kt,x as At,y as Nt,z as qt,E as Wt,F as Gt,G as Jt,D as Qt,H as Xt,J as Yt,K as Zt}from"./@arco-design.95e0b031.js";import{c as ue}from"./vue.24dcbee8.js";import{b as ee,u as te}from"./vue-router.425aabc5.js";import{u as he,a as eo,b as to,c as me,d as q,l as ve,_ as W,e as oo,L as no,f as re,R as ao,D as so,r as lo}from"./index.f74d4a81.js";import{a as ro,b as uo,c as co,d as io}from"./@vueuse.c5c16882.js";import{l as po}from"./lodash.765c06a3.js";import{c as w,d as A,r as N,x as e,k as _o,a7 as ce,i as fo,o as _,a as U,e as h,u as n,z as C,A as I,_ as b,s as S,v as K,F as Q,N as R,O as V,Q as ae,h as be,n as ge,H as ho,b9 as ye,b8 as ke,w as Se,m as mo,l as we,aa as vo,J as bo,q as se,P as ie,aG as go,T as yo,E as ko,b as de}from"./@vue.2faf1d8e.js";import{v as $e}from"./vue-i18n.4b9acc8b.js";import{d as oe,c as So,e as wo}from"./serial.d615852e.js";import{L as Le,S as $o,I as Lo,F as Eo,B as jo,a as Fo,b as Do}from"./tdesign-vue-next.62a9d0ce.js";import{a as pe}from"./axios.234ce069.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.08dc07e5.js";import"./@intlify.b8ed1d74.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./vue-echarts.29561399.js";import"./resize-detector.a8854a64.js";import"./echarts.5b0e6023.js";import"./zrender.ce26131e.js";import"./tslib.c6ba9914.js";import"./nprogress.77f16b3e.js";import"./mitt.550594b0.js";import"./pinia.510425a1.js";import"./vue-demi.1e0b7689.js";import"./aegis-web-sdk.088ecaea.js";import"./@zxing.8654f0db.js";import"./vue-matomo.ed94ba67.js";import"./tdesign-icons-vue-next.514651cc.js";import"./sortablejs.b2e3c7c4.js";import"./@popperjs.f3f73334.js";const Ee="LoseHu 117 \u5386\u53F2\u7248\u672C",je="official",Fe="official",Co={name:Ee,uart:je,charset:Fe},Oo=Object.freeze(Object.defineProperty({__proto__:null,name:Ee,uart:je,charset:Fe,default:Co},Symbol.toStringTag,{value:"Module"})),De="LoseHu 117 \u5386\u53F2\u7248\u672C\u6269\u5BB9\u7248",Ce="losehu",Oe="losehu",Ie=!0,Io={name:De,uart:Ce,charset:Oe,K:Ie},Mo=Object.freeze(Object.defineProperty({__proto__:null,name:De,uart:Ce,charset:Oe,K:Ie,default:Io},Symbol.toStringTag,{value:"Module"})),Me="LoseHu 118+",Te="official",He="official",To={name:Me,uart:Te,charset:He},Ho=Object.freeze(Object.defineProperty({__proto__:null,name:Me,uart:Te,charset:He,default:To},Symbol.toStringTag,{value:"Module"})),Pe="LoseHu 118+ 2Mbit \u6269\u5BB9\u7248",Be="losehu",xe="gb2312",Ue=!0,Re=!0,Po={name:Pe,uart:Be,charset:xe,H:Ue,sat:Re},Bo=Object.freeze(Object.defineProperty({__proto__:null,name:Pe,uart:Be,charset:xe,H:Ue,sat:Re,default:Po},Symbol.toStringTag,{value:"Module"})),Ve="LoseHu 118+ \u6269\u5BB9\u7248",ze="losehu",Ke="gb2312",Ae=!0,xo={name:Ve,uart:ze,charset:Ke,K:Ae},Uo=Object.freeze(Object.defineProperty({__proto__:null,name:Ve,uart:ze,charset:Ke,K:Ae,default:xo},Symbol.toStringTag,{value:"Module"})),Ne="LoseHu 120+ \u6269\u5BB9\u7248",qe="losehu",We="gb2312",Ge=!0,Je=!0,Ro={name:Ne,uart:qe,charset:We,K:Ge,sat:Je},Vo=Object.freeze(Object.defineProperty({__proto__:null,name:Ne,uart:qe,charset:We,K:Ge,sat:Je,default:Ro},Symbol.toStringTag,{value:"Module"})),Qe="LoseHu 124+ 2Mbit \u6269\u5BB9\u7248",Xe="losehu",Ye="gb2312",Ze=!0,et=!0,tt=!0,zo={name:Qe,uart:Xe,charset:Ye,H:Ze,sat:et,newpinyin:tt},Ko=Object.freeze(Object.defineProperty({__proto__:null,name:Qe,uart:Xe,charset:Ye,H:Ze,sat:et,newpinyin:tt,default:zo},Symbol.toStringTag,{value:"Module"})),ot="LoseHu \u5F15\u5BFC\u7A0B\u5E8F",nt="losehu",at="gb2312",st=!0,lt=!0,rt=!0,Ao={name:ot,uart:nt,charset:at,H:st,sat:lt,newpinyin:rt},No=Object.freeze(Object.defineProperty({__proto__:null,name:ot,uart:nt,charset:at,H:st,sat:lt,newpinyin:rt,default:Ao},Symbol.toStringTag,{value:"Module"})),ut="LoseHu Doppler",ct="losehu",it="gb2312",dt=!0,pt=!0,_t=!0,ft=!0,qo={name:ut,uart:ct,charset:it,H:dt,sat:pt,sat2:_t,newpinyin:ft},Wo=Object.freeze(Object.defineProperty({__proto__:null,name:ut,uart:ct,charset:it,H:dt,sat:pt,sat2:_t,newpinyin:ft,default:qo},Symbol.toStringTag,{value:"Module"})),ht="LoseHu Patch LTS\uFF08BD8DFN\uFF09",mt="official",vt="official",bt=!0,Go={name:ht,uart:mt,charset:vt,localmdc:bt},Jo=Object.freeze(Object.defineProperty({__proto__:null,name:ht,uart:mt,charset:vt,localmdc:bt,default:Go},Symbol.toStringTag,{value:"Module"})),gt="LoseHu Patch LTS\uFF08BD8DFN\uFF09\u6269\u5BB9\u7248",yt="losehu",kt="losehu",St=!0,wt=!0,$t=!0,Qo={name:gt,uart:yt,charset:kt,K:St,localmdc:wt,fm30:$t},Xo=Object.freeze(Object.defineProperty({__proto__:null,name:gt,uart:yt,charset:kt,K:St,localmdc:wt,fm30:$t,default:Qo},Symbol.toStringTag,{value:"Module"})),Lt="Official",Yo={name:Lt},Zo=Object.freeze(Object.defineProperty({__proto__:null,name:Lt,default:Yo},Symbol.toStringTag,{value:"Module"}));function en(){const s=ee(),t=he();return{logout:async a=>{await t.logout();const r=s.currentRoute.value;ne.success("\u767B\u51FA\u6210\u529F"),s.push({name:a&&typeof a=="string"?a:"login",query:{...s.currentRoute.value.query,redirect:r.name}})}}}const tn=(s,t)=>{const{target:i="_blank",...a}=t||{};window.open(s,i,Object.entries(a).reduce((r,d)=>{const[c,m]=d;return[...r,`${c}=${m}`]},[]).join(","))},on=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),nn=[...eo,...to],an=nn.map(s=>{const{name:t,path:i,meta:a,redirect:r,children:d}=s;return{name:t,path:i,meta:a,redirect:r,children:d}}),sn=an;function ln(){const s=me(),t=q(),i=w(()=>t.menuFromServer?t.appAsyncMenus:sn);return{menuTree:w(()=>{const r=po.exports.cloneDeep(i.value);r.sort((c,m)=>(c.meta.order||0)-(m.meta.order||0));function d(c,m){return c?c.map(g=>{var j,T;if(!s.accessRouter(g))return null;if(((j=g.meta)==null?void 0:j.hideChildrenInMenu)||!g.children)return g.children=[],g;g.children=g.children.filter(f=>{var u;return((u=f.meta)==null?void 0:u.hideInMenu)!==!0});const L=d(g.children,m+1);return L.length||m>1?(g.children=L,g):((T=g.meta)==null?void 0:T.hideInMenu)===!1?g:null}).filter(Boolean):null}return d(r,0)})}}function rn(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!_o(s)}const un=A({emit:["collapse"],setup(){const{t:s}=$e.exports.useI18n(),t=q(),i=ee(),a=te(),{menuTree:r}=ln(),d=w({get(){return t.device==="desktop"?t.menuCollapse:!1},set(f){t.updateSettings({menuCollapse:f})}}),c=w(()=>t.topMenu),m=N([]),M=N([]),g=f=>{if(on.test(f.path)){tn(f.path),M.value=[f.name];return}const{hideInMenu:u,activeMenu:p}=f.meta;if(a.name===f.name&&!u&&!p){M.value=[f.name];return}i.push({name:f.name})},L=f=>{const u=[];let p=!1;const l=(k,v)=>{var O;if(k.name===f){p=!0,u.push(...v);return}(O=k.children)!=null&&O.length&&k.children.forEach(o=>{l(o,[...v,o.name])})};return r.value.forEach(k=>{p||l(k,[k.name])}),u};ve(f=>{const{requiresAuth:u,activeMenu:p,hideInMenu:l}=f.meta;if(u&&(!l||p)){const k=L(p||f.name),v=new Set([...k,...m.value]);m.value=[...v],M.value=[p||k[k.length-1]]}},!0);const j=f=>{t.device==="desktop"&&t.updateSettings({menuCollapse:f})},T=()=>{function f(u,p=[]){return u&&u.forEach(l=>{var O;const k=(O=l==null?void 0:l.meta)!=null&&O.icon?()=>{var o;return ce(ue(`<${(o=l==null?void 0:l.meta)==null?void 0:o.icon}/>`))}:null,v=(l==null?void 0:l.children)&&(l==null?void 0:l.children.length)!==0?e(Dt,{key:l==null?void 0:l.name},{default:()=>[f(l==null?void 0:l.children)],icon:k,title:()=>{var o;return ce(ue(s(((o=l==null?void 0:l.meta)==null?void 0:o.locale)||"")))}}):e(Ct,{key:l==null?void 0:l.name,onClick:()=>g(l)},{default:()=>{var o;return[s(((o=l==null?void 0:l.meta)==null?void 0:o.locale)||"")]},icon:k});p.push(v)}),p}return f(r.value)};return()=>{let f;return e(Ft,{mode:c.value?"horizontal":"vertical",collapsed:d.value,"onUpdate:collapsed":u=>d.value=u,"open-keys":m.value,"onUpdate:open-keys":u=>m.value=u,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":M.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:j},rn(f=T())?f:{default:()=>[f]})}}});const le=W(un,[["__scopeId","data-v-90632f3f"]]),cn={class:"navbar"},dn={class:"left-side"},pn={class:"center-side"},_n={class:"right-side"},fn=A({__name:"index",setup(s){const{t}=$e.exports.useI18n(),i=Object.assign({"/src/drivers/losehu117.json":Oo,"/src/drivers/losehu117k.json":Mo,"/src/drivers/losehu118.json":Ho,"/src/drivers/losehu118h.json":Bo,"/src/drivers/losehu118k.json":Uo,"/src/drivers/losehu120k.json":Vo,"/src/drivers/losehu124h.json":Ko,"/src/drivers/losehubl.json":No,"/src/drivers/losehud.json":Wo,"/src/drivers/lts.json":Jo,"/src/drivers/ltsk.json":Xo,"/src/drivers/todo.json":Zo}),a=q(),r=te();en();const{changeLocale:d,currentLocale:c}=oo(),{isFullscreen:m,toggle:M}=ro(),g=[...no];w(()=>userStore.avatar);const L=w(()=>a.theme),j=w(()=>a.topMenu&&a.menu),T=uo({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(o){a.toggleTheme(o)}}),f=co(T),u=()=>{f()},p=N(),l=()=>{const o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});p.value.dispatchEvent(o)},k=fo("toggleDrawerMenu"),v={"L_BL[0-9][0-9][0-9]":"losehubl.json","LOSEHU.*P.*K":"ltsk.json","LOSEHU.*P.*":"lts.json","LOSEHU.*D":"losehud.json","LOSEHU13[0-9].*HS":"losehu124h.json","LOSEHU13[0-9].*H":"losehu124h.json","LOSEHU13[0-9].*KS":"losehu120k.json","LOSEHU13[0-9].*K":"losehu120k.json","LOSEHU13[0-9].*":"losehu118.json","LOSEHU12[4-9].*HS":"losehu124h.json","LOSEHU12[4-9].*H":"losehu124h.json","LOSEHU12[0-3].*H":"losehu118h.json","LOSEHU12[0-9].*KS":"losehu120k.json","LOSEHU12[0-9].*K":"losehu120k.json","LOSEHU12[0-9].*":"losehu118.json","LOSEHU11[8-9].*H":"losehu118h.json","LOSEHU11[8-9].*K":"losehu118k.json","LOSEHU11[8-9].*":"losehu118.json","LOSEHU11[2-7].*K":"losehu117k.json","LOSEHU11[2-7].*":"losehu117.json",".*":"todo.json"},O=async()=>{if(a.connectState==!1){try{a.connectPort&&await oe(a.connectPort)}catch{}let o;if(/Mobi|Android|iPhone/i.test(navigator.userAgent)?(alert("\u624B\u673A\u5199\u9891\u5F00\u53D1\u4E2D\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528\u7535\u8111\u8FDE\u63A5\u7535\u53F0\u5199\u9891\uFF01\uFF01\uFF01In the development of mobile, it cannot be used normally. Please use a computer to connect!!!"),await serial.requestPort().then(E=>{o=E}),o&&await o.connect().then().catch(E=>{alert("\u8BF7\u5C1D\u8BD5\u5237\u65B0\u7F51\u9875\u91CD\u65B0\u63D2\u62D4\u5199\u9891\u7EBF")})):o=await So(),!o){alert(t("global.connectFail"));return}a.updateSettings({connectPort:o});const y={};Object.keys(i).forEach(E=>{y[E.substring(E.lastIndexOf("/")+1)]=i[E].default});let P=null,F="";try{F=await wo(o)}catch{throw await oe(o),a.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""}),alert(t("global.handshakeFail")),new Error(t("global.handshakeFail"))}const D={name:"TODO",uart:"official",charset:"official",K:!1,H:!1,localmdc:!1,sat:!1,sat2:!1,newpinyin:!1,fm30:!1};Object.keys(v).some(E=>{if(new RegExp(E).test(F))return P=Object.assign(D,y[v[E]]),!0}),a.updateSettings({connectState:!0,firmwareVersion:F,configuration:P})}else await oe(a.connectPort),a.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""})};return(o,y)=>{const P=Mt,F=Tt,D=Ot,E=Le,H=Ht,J=Pt,x=It,X=Bt,Y=fe,Z=_e,z=xt,$=Ut,Et=Rt,jt=Vt;return _(),U("div",cn,[h("div",dn,[e(D,null,{default:n(()=>[e(P,{style:{margin:0,fontSize:"18px"},heading:5},{default:n(()=>[C(I(!j.value&&b(a).device==="mobile"?"":"K5Web"),1)]),_:1}),!j.value&&b(a).device==="mobile"?(_(),S(F,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:b(k)},null,8,["onClick"])):K("",!0)]),_:1})]),h("div",pn,[j.value?(_(),S(le,{key:0})):K("",!0)]),h("ul",_n,[!j.value&&b(a).device==="mobile"?(_(),U(Q,{key:0},[h("li",null,[b(t)("navbar.qa")=="Feedback"?(_(),S(E,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:n(()=>[C(I(o.$t("navbar.qa")),1)]),_:1})):(_(),S(E,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:n(()=>[C(I(o.$t("navbar.qa")),1)]),_:1}))]),h("li",null,[R(e(H,{type:"primary",onClick:O},{default:n(()=>[C(I(b(a).connectState?o.$t("navbar.disconnect"):o.$t("navbar.connect")),1)]),_:1},512),[[V,b(r).path!=="/tool/flash"]])]),h("li",null,[e(x,{content:o.$t("settings.language")},{default:n(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:l},{icon:n(()=>[e(J)]),_:1})]),_:1},8,["content"]),e(Z,{trigger:"click",onSelect:b(d)},{content:n(()=>[(_(),U(Q,null,ae(g,B=>e(Y,{key:B.value,value:B.value},{icon:n(()=>[R(e(X,null,null,512),[[V,B.value===b(c)]])]),default:n(()=>[C(" "+I(B.label),1)]),_:2},1032,["value"])),64))]),default:n(()=>[h("div",{ref_key:"triggerBtn",ref:p,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),h("li",null,[e(x,{content:L.value==="light"?o.$t("settings.navbar.theme.toDark"):o.$t("settings.navbar.theme.toLight")},{default:n(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:u},{icon:n(()=>[L.value==="dark"?(_(),S(z,{key:0})):(_(),S($,{key:1}))]),_:1})]),_:1},8,["content"])])],64)):(_(),U(Q,{key:1},[h("li",null,[b(t)("navbar.qa")=="Feedback"?(_(),S(E,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:n(()=>[C(I(o.$t("navbar.qa")),1)]),_:1})):(_(),S(E,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:n(()=>[C(I(o.$t("navbar.qa")),1)]),_:1}))]),h("li",null,[R(e(H,{type:"primary",onClick:O},{default:n(()=>[C(I(b(a).connectState?o.$t("navbar.disconnect"):o.$t("navbar.connect")),1)]),_:1},512),[[V,b(r).path!=="/tool/flash"&&b(r).path!=="/idea/firmware"]]),R(e(H,{disabled:"disabled",title:"\u5237\u673A\u6A21\u5F0F\u65E0\u9700\u8FDE\u63A5",type:"primary",onClick:O},{default:n(()=>[C(I(b(a).connectState?o.$t("navbar.disconnect"):o.$t("navbar.connect")),1)]),_:1},512),[[V,b(r).path=="/tool/flash"||b(r).path=="/idea/firmware"]])]),h("li",null,[e(x,{content:o.$t("settings.language")},{default:n(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:l},{icon:n(()=>[e(J)]),_:1})]),_:1},8,["content"]),e(Z,{trigger:"click",onSelect:b(d)},{content:n(()=>[(_(),U(Q,null,ae(g,B=>e(Y,{key:B.value,value:B.value},{icon:n(()=>[R(e(X,null,null,512),[[V,B.value===b(c)]])]),default:n(()=>[C(" "+I(B.label),1)]),_:2},1032,["value"])),64))]),default:n(()=>[h("div",{ref_key:"triggerBtn",ref:p,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),h("li",null,[e(x,{content:L.value==="light"?o.$t("settings.navbar.theme.toDark"):o.$t("settings.navbar.theme.toLight")},{default:n(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:u},{icon:n(()=>[L.value==="dark"?(_(),S(z,{key:0})):(_(),S($,{key:1}))]),_:1})]),_:1},8,["content"])]),h("li",null,[e(x,{content:b(m)?o.$t("settings.navbar.screen.toExit"):o.$t("settings.navbar.screen.toFull")},{default:n(()=>[e(H,{class:"nav-btn",type:"outline",shape:"circle",onClick:b(M)},{icon:n(()=>[b(m)?(_(),S(Et,{key:0})):(_(),S(jt,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])])],64))])])}}});const hn=W(fn,[["__scopeId","data-v-6bcae74d"]]),mn=A({__name:"index",setup(s){const t=be({isLhw711:location.hostname=="k5.lhw711.cn",isCN:location.hostname=="k5.vicicode.cn"}),i=()=>{var a;return(a=document.getElementsByTagName("meta").builtTime)==null?void 0:a.content};return(a,r)=>{const d=Le,c=$o,m=zt;return _(),S(m,{class:"footer"},{default:n(()=>[e(c,null,{default:n(()=>[e(d,{href:"https://github.com/silenty4ng/k5web",target:"_blank"},{default:n(()=>[C("K5Web - V0.1."+I(i()),1)]),_:1}),R(e(d,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:n(()=>[C("\u8700ICP\u59072024089755\u53F7-1")]),_:1},512),[[V,t.isCN]]),R(e(d,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:n(()=>[C("\u9C81ICP\u59072024058690\u53F7-1")]),_:1},512),[[V,t.isLhw711]])]),_:1})]),_:1})}}});const vn=W(mn,[["__scopeId","data-v-61069ac8"]]),G=s=>(ye("data-v-10c1deb7"),s=s(),ke(),s),bn={class:"tag-link"},gn=G(()=>h("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),yn=G(()=>h("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),kn=G(()=>h("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),Sn=G(()=>h("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),wn=G(()=>h("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),$n=G(()=>h("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Ln=A({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(s){const t=s,i=ee(),a=te(),r=re(),d=u=>{i.push({...u})},c=w(()=>r.getTabList),m=w(()=>t.itemData.fullPath!==a.fullPath),M=w(()=>t.index===0),g=w(()=>[0,1].includes(t.index)),L=w(()=>t.index===c.value.length-1),j=(u,p)=>{if(r.deleteTag(p,u),t.itemData.fullPath===a.fullPath){const l=c.value[p-1];i.push({name:l.name})}},T=()=>c.value.findIndex(u=>u.fullPath===a.fullPath),f=async u=>{const{itemData:p,index:l}=t,k=[...c.value];if(u==="current")j(p,l);else if(u==="left"){const v=T();k.splice(1,t.index-1),r.freshTabList(k),v<l&&i.push({name:p.name})}else if(u==="right"){const v=T();k.splice(t.index+1),r.freshTabList(k),v>l&&i.push({name:p.name})}else if(u==="others"){const v=c.value.filter((O,o)=>o===0||o===t.index);r.freshTabList(v),i.push({name:p.name})}else u==="reload"?(r.deleteCache(p),await i.push({name:ao,params:{path:a.fullPath}}),r.addCache(p.name)):(r.resetTabList(),i.push({name:so}))};return(u,p)=>{const l=Kt,k=At,v=fe,O=Nt,o=qt,y=Wt,P=Gt,F=_e;return _(),S(F,{trigger:"contextMenu","popup-max-height":!1,onSelect:f},{content:n(()=>[e(v,{disabled:m.value,value:"reload"},{default:n(()=>[e(k),gn]),_:1},8,["disabled","value"]),e(v,{class:"sperate-line",disabled:M.value,value:"current"},{default:n(()=>[e(l),yn]),_:1},8,["disabled","value"]),e(v,{disabled:g.value,value:"left"},{default:n(()=>[e(O),kn]),_:1},8,["disabled","value"]),e(v,{class:"sperate-line",disabled:L.value,value:"right"},{default:n(()=>[e(o),Sn]),_:1},8,["disabled","value"]),e(v,{value:"others"},{default:n(()=>[e(y),wn]),_:1},8,["value"]),e(v,{value:"all"},{default:n(()=>[e(P),$n]),_:1},8,["value"])]),default:n(()=>[h("span",{class:ge(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":s.itemData.fullPath===u.$route.fullPath}]),onClick:p[1]||(p[1]=D=>d(s.itemData))},[h("span",bn,I(u.$t(s.itemData.title)),1),h("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:p[0]||(p[0]=ho(D=>j(s.itemData,s.index),["stop"]))},[e(l)])],2)]),_:1})}}});const En=W(Ln,[["__scopeId","data-v-10c1deb7"]]),jn=s=>(ye("data-v-2744fb32"),s=s(),ke(),s),Fn={class:"tab-bar-container"},Dn={class:"tab-bar-box"},Cn={class:"tab-bar-scroll"},On={class:"tags-wrap"},In=jn(()=>h("div",{class:"tag-bar-operation"},null,-1)),Mn=A({__name:"index",setup(s){const t=q(),i=re(),a=N(),r=w(()=>i.getTabList),d=w(()=>t.navbar?60:0);return Se(()=>t.navbar,()=>{a.value.updatePosition()}),ve(c=>{!c.meta.noAffix&&!r.value.some(m=>m.fullPath===c.fullPath)&&i.updateTabList(c)},!0),mo(()=>{lo()}),(c,m)=>{const M=Jt;return _(),U("div",Fn,[e(M,{ref_key:"affixRef",ref:a,"offset-top":d.value},{default:n(()=>[h("div",Dn,[h("div",Cn,[h("div",On,[(_(!0),U(Q,null,ae(r.value,(g,L)=>(_(),S(En,{key:g.fullPath,index:L,"item-data":g},null,8,["index","item-data"]))),128))])]),In])]),_:1},8,["offset-top"])])}}});const Tn=W(Mn,[["__scopeId","data-v-2744fb32"]]);function Hn(s,t,i,a=!1){s.addEventListener&&typeof s.addEventListener=="function"&&s.addEventListener(t,i,a)}function Pn(s,t,i,a=!1){s.removeEventListener&&typeof s.removeEventListener=="function"&&s.removeEventListener(t,i,a)}const Bn=992;function xn(){return document.body.getBoundingClientRect().width-1<Bn}function Un(s){const t=q();function i(){if(!document.hidden){const r=xn();t.toggleDevice(r?"mobile":"desktop"),t.toggleMenu(r)}}const a=io(i,100);we(()=>{s&&a()}),vo(()=>{Hn(window,"resize",a)}),bo(()=>{Pn(window,"resize",a)})}const Rn=A({__name:"page-layout",setup(s){const t=re(),i=w(()=>t.getCacheList);return(a,r)=>{const d=se("router-view");return _(),S(d,null,{default:n(({Component:c,route:m})=>[e(yo,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[m.meta.ignoreCache?(_(),S(ie(c),{key:m.fullPath})):(_(),S(go,{key:1,include:i.value},[(_(),S(ie(c),{key:m.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),Vn={key:0,class:"layout-navbar"},zn={class:"menu-wrapper"},Kn="60px",An=A({__name:"default-layout",setup(s){const t=be({account:"",nickname:"",password:"",password2:"",motto:""}),i=async()=>{const o=await pe.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,tab:"login",keep:!1});o.code==1&&c.setInfo({showLogin:!1,name:o.data.userInfo.nickname,accountId:o.data.userInfo.token})},a=async()=>{if(t.password==""||t.account==""||t.nickname==""){ne.error({content:"\u7528\u6237\u540D\u3001\u6635\u79F0\u53CA\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",duration:5*1e3});return}if(t.password!=t.password2){ne.error({content:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4",duration:5*1e3});return}const o=await pe.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,nickname:t.nickname,motto:t.motto,tab:"register"});o.code==1&&c.setInfo({showRegister:!1,name:t.nickname,accountId:o.data.userInfo.token})},r=N(!1),d=q(),c=he(),m=ee(),M=te(),g=me();Un(!0);const L=w(()=>d.navbar),j=w(()=>d.menu&&!d.topMenu),T=w(()=>d.hideMenu),f=w(()=>d.footer),u=w(()=>d.menuCollapse?48:d.menuWidth),p=w(()=>d.menuCollapse),l=w(()=>{const o=j.value&&!T.value?{paddingLeft:`${u.value}px`}:{},y=L.value?{paddingTop:Kn}:{};return{...o,...y}}),k=o=>{!r.value||d.updateSettings({menuCollapse:o})};Se(()=>c.role,o=>{o&&!g.accessRouter(M)&&m.push({name:"notFound"})});const v=N(!1),O=()=>{v.value=!1};return ko("toggleDrawerMenu",()=>{v.value=!v.value}),we(()=>{r.value=!0}),(o,y)=>{const P=se("desktop-icon"),F=Lo,D=Eo,E=se("lock-on-icon"),H=jo,J=Fo,x=Do,X=Yt,Y=Qt,Z=Zt,z=Xt;return _(),S(z,{class:ge(["layout",{mobile:b(d).hideMenu}])},{default:n(()=>[e(x,{visible:b(c).showLogin,"onUpdate:visible":y[2]||(y[2]=$=>b(c).showLogin=$),attach:"body",header:o.$t("global.login"),"destroy-on-close":"",footer:!1},{body:n(()=>[e(J,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:i},{default:n(()=>[e(D,{name:"account"},{default:n(()=>[e(F,{modelValue:t.account,"onUpdate:modelValue":y[0]||(y[0]=$=>t.account=$),clearable:"",placeholder:o.$t("global.username")},{"prefix-icon":n(()=>[e(P)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,{name:"password"},{default:n(()=>[e(F,{modelValue:t.password,"onUpdate:modelValue":y[1]||(y[1]=$=>t.password=$),type:"password",clearable:"",placeholder:o.$t("global.password")},{"prefix-icon":n(()=>[e(E)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,null,{default:n(()=>[e(H,{theme:"primary",type:"submit",block:""},{default:n(()=>[C(I(o.$t("global.login")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),e(x,{visible:b(c).showRegister,"onUpdate:visible":y[8]||(y[8]=$=>b(c).showRegister=$),attach:"body",header:o.$t("global.register"),"destroy-on-close":"",footer:!1},{body:n(()=>[e(J,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:a},{default:n(()=>[e(D,{name:"account"},{default:n(()=>[e(F,{modelValue:t.account,"onUpdate:modelValue":y[3]||(y[3]=$=>t.account=$),clearable:"",placeholder:o.$t("global.username")},{"prefix-icon":n(()=>[e(P)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,{name:"nickname"},{default:n(()=>[e(F,{modelValue:t.nickname,"onUpdate:modelValue":y[4]||(y[4]=$=>t.nickname=$),clearable:"",placeholder:o.$t("global.nickname")},{"prefix-icon":n(()=>[e(P)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,{name:"password"},{default:n(()=>[e(F,{modelValue:t.password,"onUpdate:modelValue":y[5]||(y[5]=$=>t.password=$),type:"password",clearable:"",placeholder:o.$t("global.password")},{"prefix-icon":n(()=>[e(E)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,{name:"password2"},{default:n(()=>[e(F,{modelValue:t.password2,"onUpdate:modelValue":y[6]||(y[6]=$=>t.password2=$),type:"password",clearable:"",placeholder:o.$t("global.password2")},{"prefix-icon":n(()=>[e(E)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,{name:"motto"},{default:n(()=>[e(F,{modelValue:t.motto,"onUpdate:modelValue":y[7]||(y[7]=$=>t.motto=$),clearable:"",placeholder:o.$t("global.motto")},{"prefix-icon":n(()=>[e(P)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(D,null,{default:n(()=>[e(H,{theme:"primary",type:"submit",block:""},{default:n(()=>[C(I(o.$t("global.register")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),L.value?(_(),U("div",Vn,[e(hn)])):K("",!0),e(z,null,{default:n(()=>[e(z,null,{default:n(()=>[j.value?R((_(),S(X,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:p.value,collapsible:!0,width:u.value,style:de({paddingTop:L.value?"60px":""}),"hide-trigger":!0,onCollapse:k},{default:n(()=>[h("div",zn,[e(le)])]),_:1},8,["collapsed","width","style"])),[[V,!T.value]]):K("",!0),T.value?(_(),S(Y,{key:1,visible:v.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:O,title:"K5Web"},{default:n(()=>[e(le)]),_:1},8,["visible"])):K("",!0),e(z,{class:"layout-content",style:de(l.value)},{default:n(()=>[b(d).tabBar?(_(),S(Tn,{key:0})):K("",!0),e(Z,null,{default:n(()=>[e(Rn)]),_:1}),f.value?(_(),S(vn,{key:1})):K("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const La=W(An,[["__scopeId","data-v-08e5feb2"]]);export{La as default};
