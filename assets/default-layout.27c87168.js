import{M as ee,h as It,i as Mt,j as Ht,R as Tt,k as Pt,T as Vt,m as ve,n as xt,o as Bt,p as Ut,d as Rt,q as zt,r as Kt,s as be,t as At,u as Nt,v as qt,w as Wt,L as Gt,x as Jt,y as Qt,z as Xt,E as Yt,F as Zt,G as eo,H as to,D as oo,J as no,K as ao,O as so}from"./@arco-design.1f9a81c2.js";import{c as pe}from"./vue.daf89c07.js";import{b as te,u as oe}from"./vue-router.391082ef.js";import{u as ge,a as lo,b as ro,c as ye,d as G,l as ke,_ as J,e as uo,L as co,f as re,R as io,D as po,r as _o}from"./index.b7e36261.js";import{a as fo,b as mo,c as ho,d as vo}from"./@vueuse.3623d212.js";import{l as bo}from"./lodash.90e9b85c.js";import{c as $,d as N,r as A,x as e,k as go,a7 as _e,i as yo,o as _,a as U,e as h,u as o,_ as g,z as j,v as R,s as w,F as Y,A as H,N as z,O as K,Q as ae,h as Se,n as we,H as ko,b9 as $e,b8 as Le,w as Ee,m as So,l as Fe,a9 as wo,J as $o,q as se,P as fe,aG as Lo,T as Eo,E as Fo,b as me}from"./@vue.1cdd4af7.js";import{v as je}from"./vue-i18n.645f4f0b.js";import{d as ne,c as jo,e as Co}from"./serial.0b46e76d.js";import{L as Ce,S as Oo,I as Do,F as Io,B as Mo,a as Ho,b as To}from"./tdesign-vue-next.876353e4.js";import{a as he}from"./axios.f3f20840.js";import"./b-tween.8dd4e2fe.js";import"./dayjs.f7934723.js";import"./@intlify.d4358f23.js";import"./b-validate.1fdaeb97.js";import"./number-precision.5cddbed2.js";import"./resize-observer-polyfill.2b976e6e.js";import"./scroll-into-view-if-needed.0a5da943.js";import"./compute-scroll-into-view.17358474.js";import"./nprogress.b0a22fe3.js";import"./mitt.550594b0.js";import"./pinia.722f5e0f.js";import"./vue-demi.0f54e832.js";import"./aegis-web-sdk.846094f8.js";import"./@zxing.8654f0db.js";import"./vue-matomo.4c7efa96.js";import"./lodash-es.18922ecc.js";import"./tdesign-icons-vue-next.5ef165be.js";import"./sortablejs.b2e3c7c4.js";import"./@popperjs.f3f73334.js";import"./@babel.9b6013fe.js";const Oe="LoseHu 117 \u5386\u53F2\u7248\u672C",De="official",Ie="official",Po={name:Oe,uart:De,charset:Ie},Vo=Object.freeze(Object.defineProperty({__proto__:null,name:Oe,uart:De,charset:Ie,default:Po},Symbol.toStringTag,{value:"Module"})),Me="LoseHu 117 \u5386\u53F2\u7248\u672C\u6269\u5BB9\u7248",He="losehu",Te="losehu",Pe=!0,xo={name:Me,uart:He,charset:Te,K:Pe},Bo=Object.freeze(Object.defineProperty({__proto__:null,name:Me,uart:He,charset:Te,K:Pe,default:xo},Symbol.toStringTag,{value:"Module"})),Ve="LoseHu 118+",xe="official",Be="official",Uo={name:Ve,uart:xe,charset:Be},Ro=Object.freeze(Object.defineProperty({__proto__:null,name:Ve,uart:xe,charset:Be,default:Uo},Symbol.toStringTag,{value:"Module"})),Ue="LoseHu 118+ 2Mbit \u6269\u5BB9\u7248",Re="losehu",ze="gb2312",Ke=!0,Ae=!0,zo={name:Ue,uart:Re,charset:ze,H:Ke,sat:Ae},Ko=Object.freeze(Object.defineProperty({__proto__:null,name:Ue,uart:Re,charset:ze,H:Ke,sat:Ae,default:zo},Symbol.toStringTag,{value:"Module"})),Ne="LoseHu 118+ \u6269\u5BB9\u7248",qe="losehu",We="gb2312",Ge=!0,Ao={name:Ne,uart:qe,charset:We,K:Ge},No=Object.freeze(Object.defineProperty({__proto__:null,name:Ne,uart:qe,charset:We,K:Ge,default:Ao},Symbol.toStringTag,{value:"Module"})),Je="LoseHu 120+ \u6269\u5BB9\u7248",Qe="losehu",Xe="gb2312",Ye=!0,Ze=!0,qo={name:Je,uart:Qe,charset:Xe,K:Ye,sat:Ze},Wo=Object.freeze(Object.defineProperty({__proto__:null,name:Je,uart:Qe,charset:Xe,K:Ye,sat:Ze,default:qo},Symbol.toStringTag,{value:"Module"})),et="LoseHu 124+ 2Mbit \u6269\u5BB9\u7248",tt="losehu",ot="gb2312",nt=!0,at=!0,st=!0,Go={name:et,uart:tt,charset:ot,H:nt,sat:at,newpinyin:st},Jo=Object.freeze(Object.defineProperty({__proto__:null,name:et,uart:tt,charset:ot,H:nt,sat:at,newpinyin:st,default:Go},Symbol.toStringTag,{value:"Module"})),lt="LoseHu \u5F15\u5BFC\u7A0B\u5E8F",rt="losehu",ut="gb2312",ct=!0,it=!0,dt=!0,Qo={name:lt,uart:rt,charset:ut,H:ct,sat:it,newpinyin:dt},Xo=Object.freeze(Object.defineProperty({__proto__:null,name:lt,uart:rt,charset:ut,H:ct,sat:it,newpinyin:dt,default:Qo},Symbol.toStringTag,{value:"Module"})),pt="LoseHu Doppler",_t="losehu",ft="gb2312",mt=!0,ht=!0,vt=!0,bt=!0,Yo={name:pt,uart:_t,charset:ft,H:mt,sat:ht,sat2:vt,newpinyin:bt},Zo=Object.freeze(Object.defineProperty({__proto__:null,name:pt,uart:_t,charset:ft,H:mt,sat:ht,sat2:vt,newpinyin:bt,default:Yo},Symbol.toStringTag,{value:"Module"})),gt="LoseHu Patch LTS\uFF08BD8DFN\uFF09",yt="official",kt="official",St=!0,en={name:gt,uart:yt,charset:kt,localmdc:St},tn=Object.freeze(Object.defineProperty({__proto__:null,name:gt,uart:yt,charset:kt,localmdc:St,default:en},Symbol.toStringTag,{value:"Module"})),wt="LoseHu Patch LTS\uFF08BD8DFN\uFF09\u6269\u5BB9\u7248",$t="losehu",Lt="losehu",Et=!0,Ft=!0,jt=!0,on={name:wt,uart:$t,charset:Lt,K:Et,localmdc:Ft,fm30:jt},nn=Object.freeze(Object.defineProperty({__proto__:null,name:wt,uart:$t,charset:Lt,K:Et,localmdc:Ft,fm30:jt,default:on},Symbol.toStringTag,{value:"Module"})),Ct="Official",an={name:Ct},sn=Object.freeze(Object.defineProperty({__proto__:null,name:Ct,default:an},Symbol.toStringTag,{value:"Module"}));function ln(){const a=te(),t=ge();return{logout:async n=>{await t.logout();const r=a.currentRoute.value;ee.success("\u767B\u51FA\u6210\u529F"),a.push({name:n&&typeof n=="string"?n:"login",query:{...a.currentRoute.value.query,redirect:r.name}})}}}const rn=(a,t)=>{const{target:d="_blank",...n}=t||{};window.open(a,d,Object.entries(n).reduce((r,p)=>{const[c,v]=p;return[...r,`${c}=${v}`]},[]).join(","))},un=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),cn=[...lo,...ro],dn=cn.map(a=>{const{name:t,path:d,meta:n,redirect:r,children:p}=a;return{name:t,path:d,meta:n,redirect:r,children:p}});function pn(){const a=ye(),t=G(),d=$(()=>t.menuFromServer?t.appAsyncMenus:dn);return{menuTree:$(()=>{const r=bo.exports.cloneDeep(d.value);r.sort((c,v)=>(c.meta.order||0)-(v.meta.order||0));function p(c,v){return c?c.map(y=>{var C,M;if(!a.accessRouter(y))return null;if(((C=y.meta)==null?void 0:C.hideChildrenInMenu)||!y.children)return y.children=[],y;y.children=y.children.filter(m=>{var u;return((u=m.meta)==null?void 0:u.hideInMenu)!==!0});const E=p(y.children,v+1);return E.length||v>1?(y.children=E,y):((M=y.meta)==null?void 0:M.hideInMenu)===!1?y:null}).filter(Boolean):null}return p(r,0)})}}function _n(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!go(a)}const fn=N({emit:["collapse"],setup(){const{t:a}=je.exports.useI18n(),t=G(),d=te(),n=oe(),{menuTree:r}=pn(),p=$({get(){return t.device==="desktop"?t.menuCollapse:!1},set(m){t.updateSettings({menuCollapse:m})}}),c=$(()=>t.topMenu),v=A([]),I=A([]),y=m=>{if(un.test(m.path)){rn(m.path),I.value=[m.name];return}const{hideInMenu:u,activeMenu:f}=m.meta;if(n.name===m.name&&!u&&!f){I.value=[m.name];return}d.push({name:m.name})},E=m=>{const u=[];let f=!1;const s=(S,b)=>{var D;if(S.name===m){f=!0,u.push(...b);return}(D=S.children)!=null&&D.length&&S.children.forEach(l=>{s(l,[...b,l.name])})};return r.value.forEach(S=>{f||s(S,[S.name])}),u};ke(m=>{const{requiresAuth:u,activeMenu:f,hideInMenu:s}=m.meta;if(u&&(!s||f)){const S=E(f||m.name),b=new Set([...S,...v.value]);v.value=[...b],I.value=[f||S[S.length-1]]}},!0);const C=m=>{t.device==="desktop"&&t.updateSettings({menuCollapse:m})},M=()=>{function m(u,f=[]){return u&&u.forEach(s=>{var D;const S=(D=s==null?void 0:s.meta)!=null&&D.icon?()=>{var l;return _e(pe(`<${(l=s==null?void 0:s.meta)==null?void 0:l.icon}/>`))}:null,b=(s==null?void 0:s.children)&&(s==null?void 0:s.children.length)!==0?e(Mt,{key:s==null?void 0:s.name},{default:()=>[m(s==null?void 0:s.children)],icon:S,title:()=>{var l;return _e(pe(a(((l=s==null?void 0:s.meta)==null?void 0:l.locale)||"")))}}):e(Ht,{key:s==null?void 0:s.name,onClick:()=>y(s)},{default:()=>{var l;return[a(((l=s==null?void 0:s.meta)==null?void 0:l.locale)||"")]},icon:S});f.push(b)}),f}return m(r.value)};return()=>{let m;return e(It,{mode:c.value?"horizontal":"vertical",collapsed:p.value,"onUpdate:collapsed":u=>p.value=u,"open-keys":v.value,"onUpdate:open-keys":u=>v.value=u,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":I.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:C},_n(m=M())?m:{default:()=>[m]})}}});const le=J(fn,[["__scopeId","data-v-90632f3f"]]),mn={class:"navbar"},hn={class:"left-side"},vn={key:0},bn={class:"center-side"},gn={class:"right-side"},yn=N({__name:"index",setup(a){const{t}=je.exports.useI18n(),d=Object.assign({"/src/drivers/losehu117.json":Vo,"/src/drivers/losehu117k.json":Bo,"/src/drivers/losehu118.json":Ro,"/src/drivers/losehu118h.json":Ko,"/src/drivers/losehu118k.json":No,"/src/drivers/losehu120k.json":Wo,"/src/drivers/losehu124h.json":Jo,"/src/drivers/losehubl.json":Xo,"/src/drivers/losehud.json":Zo,"/src/drivers/lts.json":tn,"/src/drivers/ltsk.json":nn,"/src/drivers/todo.json":sn}),n=G(),r=oe();ln();const{changeLocale:p,currentLocale:c}=uo(),{isFullscreen:v,toggle:I}=fo(),y=[...co];$(()=>userStore.avatar);const E=$(()=>n.theme),C=$(()=>n.topMenu&&n.menu),M=mo({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(i){n.toggleTheme(i)}}),m=ho(M),u=()=>{m()},f=A(),s=()=>{const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});f.value.dispatchEvent(i)},S=yo("toggleDrawerMenu"),b={"L_BL[0-9][0-9][0-9]":"losehubl.json","LOSEHU.*P.*K":"ltsk.json","LOSEHU.*P.*":"lts.json","LOSEHU.*D":"losehud.json","LOSEHU13[0-9].*HS":"losehu124h.json","LOSEHU13[0-9].*H":"losehu124h.json","LOSEHU13[0-9].*KS":"losehu120k.json","LOSEHU13[0-9].*K":"losehu120k.json","LOSEHU13[0-9].*":"losehu118.json","LOSEHU12[4-9].*HS":"losehu124h.json","LOSEHU12[4-9].*H":"losehu124h.json","LOSEHU12[0-3].*H":"losehu118h.json","LOSEHU12[0-9].*KS":"losehu120k.json","LOSEHU12[0-9].*K":"losehu120k.json","LOSEHU12[0-9].*":"losehu118.json","LOSEHU11[8-9].*H":"losehu118h.json","LOSEHU11[8-9].*K":"losehu118k.json","LOSEHU11[8-9].*":"losehu118.json","LOSEHU11[2-7].*K":"losehu117k.json","LOSEHU11[2-7].*":"losehu117.json",".*":"todo.json"},D=A("V1"),l=()=>{ee.info("\u656C\u8BF7\u671F\u5F85 ComingSoon"),setTimeout(()=>{D.value="V1"},100)},k=async()=>{if(n.connectState==!1){try{n.connectPort&&await ne(n.connectPort)}catch{}let i;if(/Mobi|Android|iPhone/i.test(navigator.userAgent)?alert("\u624B\u673A\u5199\u9891\u5F00\u53D1\u4E2D\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528\u7535\u8111\u8FDE\u63A5\u7535\u53F0\u5199\u9891\uFF01\uFF01\uFF01In the development of mobile, it cannot be used normally. Please use a computer to connect!!!"):i=await jo(),!i){alert(t("global.connectFail"));return}n.updateSettings({connectPort:i});const O={};Object.keys(d).forEach(T=>{O[T.substring(T.lastIndexOf("/")+1)]=d[T].default});let F=null,B="";try{B=await Co(i)}catch{throw await ne(i),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""}),alert(t("global.handshakeFail")),new Error(t("global.handshakeFail"))}const q={name:"TODO",uart:"official",charset:"official",K:!1,H:!1,localmdc:!1,sat:!1,sat2:!1,newpinyin:!1,fm30:!1};Object.keys(b).some(T=>{if(new RegExp(T).test(B))return F=Object.assign(q,O[b[T]]),!0}),n.updateSettings({connectState:!0,firmwareVersion:B,configuration:F})}else await ne(n.connectPort),n.updateSettings({connectState:!1,connectPort:null,firmwareVersion:""})};return(i,O)=>{const F=Tt,B=xt,q=Bt,T=Ut,X=Pt,W=Ce,V=Rt,Z=zt,x=Vt,L=Kt,ue=be,ce=ve,ie=At,de=Nt,Ot=qt,Dt=Wt;return _(),U("div",mn,[h("div",hn,[e(X,null,{default:o(()=>[e(q,{style:{margin:0,fontSize:"18px"},heading:5},{default:o(()=>[!C.value&&g(n).device==="mobile"?R("",!0):(_(),U("div",vn,[j(" K5Web \xA0 "),e(B,{type:"button",size:"mini",modelValue:D.value,"onUpdate:modelValue":O[0]||(O[0]=P=>D.value=P),title:"\u786C\u4EF6\u7248\u672C\uFF08HwVersion\uFF09"},{default:o(()=>[e(F,{value:"V1"},{default:o(()=>[j("V1")]),_:1}),e(F,{onClick:l,value:"V2"},{default:o(()=>[j("V2")]),_:1})]),_:1},8,["modelValue"])]))]),_:1}),!C.value&&g(n).device==="mobile"?(_(),w(T,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:g(S)},null,8,["onClick"])):R("",!0)]),_:1})]),h("div",bn,[C.value?(_(),w(le,{key:0})):R("",!0)]),h("ul",gn,[!C.value&&g(n).device==="mobile"?(_(),U(Y,{key:0},[h("li",null,[g(t)("navbar.qa")=="Feedback"?(_(),w(W,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[j(H(i.$t("navbar.qa")),1)]),_:1})):(_(),w(W,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[j(H(i.$t("navbar.qa")),1)]),_:1}))]),h("li",null,[z(e(V,{type:"primary",onClick:k},{default:o(()=>[j(H(g(n).connectState?i.$t("navbar.disconnect"):i.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path!=="/tool/flash"]])]),h("li",null,[e(x,{content:i.$t("settings.language")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:s},{icon:o(()=>[e(Z)]),_:1})]),_:1},8,["content"]),e(ce,{trigger:"click",onSelect:g(p)},{content:o(()=>[(_(),U(Y,null,ae(y,P=>e(ue,{key:P.value,value:P.value},{icon:o(()=>[z(e(L,null,null,512),[[K,P.value===g(c)]])]),default:o(()=>[j(" "+H(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[h("div",{ref_key:"triggerBtn",ref:f,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),h("li",null,[e(x,{content:E.value==="light"?i.$t("settings.navbar.theme.toDark"):i.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:u},{icon:o(()=>[E.value==="dark"?(_(),w(ie,{key:0})):(_(),w(de,{key:1}))]),_:1})]),_:1},8,["content"])])],64)):(_(),U(Y,{key:1},[h("li",null,[g(t)("navbar.qa")=="Feedback"?(_(),w(W,{key:0,href:"https://t.me/losehu",target:"_blank"},{default:o(()=>[j(H(i.$t("navbar.qa")),1)]),_:1})):(_(),w(W,{key:1,href:"https://qa.vicicode.cn/",target:"_blank"},{default:o(()=>[j(H(i.$t("navbar.qa")),1)]),_:1}))]),h("li",null,[z(e(V,{type:"primary",onClick:k},{default:o(()=>[j(H(g(n).connectState?i.$t("navbar.disconnect"):i.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path!=="/tool/flash"&&g(r).path!=="/idea/firmware"]]),z(e(V,{disabled:"disabled",title:"\u5347\u7EA7\u6A21\u5F0F\u65E0\u9700\u8FDE\u63A5",type:"primary",onClick:k},{default:o(()=>[j(H(g(n).connectState?i.$t("navbar.disconnect"):i.$t("navbar.connect")),1)]),_:1},512),[[K,g(r).path=="/tool/flash"||g(r).path=="/idea/firmware"]])]),h("li",null,[e(x,{content:i.$t("settings.language")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:s},{icon:o(()=>[e(Z)]),_:1})]),_:1},8,["content"]),e(ce,{trigger:"click",onSelect:g(p)},{content:o(()=>[(_(),U(Y,null,ae(y,P=>e(ue,{key:P.value,value:P.value},{icon:o(()=>[z(e(L,null,null,512),[[K,P.value===g(c)]])]),default:o(()=>[j(" "+H(P.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[h("div",{ref_key:"triggerBtn",ref:f,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),h("li",null,[e(x,{content:E.value==="light"?i.$t("settings.navbar.theme.toDark"):i.$t("settings.navbar.theme.toLight")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:u},{icon:o(()=>[E.value==="dark"?(_(),w(ie,{key:0})):(_(),w(de,{key:1}))]),_:1})]),_:1},8,["content"])]),h("li",null,[e(x,{content:g(v)?i.$t("settings.navbar.screen.toExit"):i.$t("settings.navbar.screen.toFull")},{default:o(()=>[e(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:g(I)},{icon:o(()=>[g(v)?(_(),w(Ot,{key:0})):(_(),w(Dt,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])])],64))])])}}});const kn=J(yn,[["__scopeId","data-v-55bca776"]]),Sn=N({__name:"index",setup(a){const t=Se({isLhw711:location.hostname=="k5.lhw711.cn",isCN:location.hostname=="k5.vicicode.cn"}),d=()=>{var n;return(n=document.getElementsByTagName("meta").builtTime)==null?void 0:n.content};return(n,r)=>{const p=Ce,c=Oo,v=Gt;return _(),w(v,{class:"footer"},{default:o(()=>[e(c,null,{default:o(()=>[e(p,{href:"https://github.com/silenty4ng/k5web",target:"_blank"},{default:o(()=>[j("K5Web - V0.1."+H(d()),1)]),_:1}),z(e(p,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[j("\u8700ICP\u59072024089755\u53F7-1")]),_:1},512),[[K,t.isCN]]),z(e(p,{href:"https://beian.miit.gov.cn/",target:"_blank"},{default:o(()=>[j("\u9C81ICP\u59072024058690\u53F7-1")]),_:1},512),[[K,t.isLhw711]])]),_:1})]),_:1})}}});const wn=J(Sn,[["__scopeId","data-v-61069ac8"]]),Q=a=>($e("data-v-10c1deb7"),a=a(),Le(),a),$n={class:"tag-link"},Ln=Q(()=>h("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),En=Q(()=>h("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),Fn=Q(()=>h("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),jn=Q(()=>h("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),Cn=Q(()=>h("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),On=Q(()=>h("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Dn=N({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(a){const t=a,d=te(),n=oe(),r=re(),p=u=>{d.push({...u})},c=$(()=>r.getTabList),v=$(()=>t.itemData.fullPath!==n.fullPath),I=$(()=>t.index===0),y=$(()=>[0,1].includes(t.index)),E=$(()=>t.index===c.value.length-1),C=(u,f)=>{if(r.deleteTag(f,u),t.itemData.fullPath===n.fullPath){const s=c.value[f-1];d.push({name:s.name})}},M=()=>c.value.findIndex(u=>u.fullPath===n.fullPath),m=async u=>{const{itemData:f,index:s}=t,S=[...c.value];if(u==="current")C(f,s);else if(u==="left"){const b=M();S.splice(1,t.index-1),r.freshTabList(S),b<s&&d.push({name:f.name})}else if(u==="right"){const b=M();S.splice(t.index+1),r.freshTabList(S),b>s&&d.push({name:f.name})}else if(u==="others"){const b=c.value.filter((D,l)=>l===0||l===t.index);r.freshTabList(b),d.push({name:f.name})}else u==="reload"?(r.deleteCache(f),await d.push({name:io,params:{path:n.fullPath}}),r.addCache(f.name)):(r.resetTabList(),d.push({name:po}))};return(u,f)=>{const s=Jt,S=Qt,b=be,D=Xt,l=Yt,k=Zt,i=eo,O=ve;return _(),w(O,{trigger:"contextMenu","popup-max-height":!1,onSelect:m},{content:o(()=>[e(b,{disabled:v.value,value:"reload"},{default:o(()=>[e(S),Ln]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:I.value,value:"current"},{default:o(()=>[e(s),En]),_:1},8,["disabled","value"]),e(b,{disabled:y.value,value:"left"},{default:o(()=>[e(D),Fn]),_:1},8,["disabled","value"]),e(b,{class:"sperate-line",disabled:E.value,value:"right"},{default:o(()=>[e(l),jn]),_:1},8,["disabled","value"]),e(b,{value:"others"},{default:o(()=>[e(k),Cn]),_:1},8,["value"]),e(b,{value:"all"},{default:o(()=>[e(i),On]),_:1},8,["value"])]),default:o(()=>[h("span",{class:we(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":a.itemData.fullPath===u.$route.fullPath}]),onClick:f[1]||(f[1]=F=>p(a.itemData))},[h("span",$n,H(u.$t(a.itemData.title)),1),h("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:f[0]||(f[0]=ko(F=>C(a.itemData,a.index),["stop"]))},[e(s)])],2)]),_:1})}}});const In=J(Dn,[["__scopeId","data-v-10c1deb7"]]),Mn=a=>($e("data-v-2744fb32"),a=a(),Le(),a),Hn={class:"tab-bar-container"},Tn={class:"tab-bar-box"},Pn={class:"tab-bar-scroll"},Vn={class:"tags-wrap"},xn=Mn(()=>h("div",{class:"tag-bar-operation"},null,-1)),Bn=N({__name:"index",setup(a){const t=G(),d=re(),n=A(),r=$(()=>d.getTabList),p=$(()=>t.navbar?60:0);return Ee(()=>t.navbar,()=>{n.value.updatePosition()}),ke(c=>{!c.meta.noAffix&&!r.value.some(v=>v.fullPath===c.fullPath)&&d.updateTabList(c)},!0),So(()=>{_o()}),(c,v)=>{const I=to;return _(),U("div",Hn,[e(I,{ref_key:"affixRef",ref:n,"offset-top":p.value},{default:o(()=>[h("div",Tn,[h("div",Pn,[h("div",Vn,[(_(!0),U(Y,null,ae(r.value,(y,E)=>(_(),w(In,{key:y.fullPath,index:E,"item-data":y},null,8,["index","item-data"]))),128))])]),xn])]),_:1},8,["offset-top"])])}}});const Un=J(Bn,[["__scopeId","data-v-2744fb32"]]);function Rn(a,t,d,n=!1){a.addEventListener&&typeof a.addEventListener=="function"&&a.addEventListener(t,d,n)}function zn(a,t,d,n=!1){a.removeEventListener&&typeof a.removeEventListener=="function"&&a.removeEventListener(t,d,n)}const Kn=992;function An(){return document.body.getBoundingClientRect().width-1<Kn}function Nn(a){const t=G();function d(){if(!document.hidden){const r=An();t.toggleDevice(r?"mobile":"desktop"),t.toggleMenu(r)}}const n=vo(d,100);Fe(()=>{a&&n()}),wo(()=>{Rn(window,"resize",n)}),$o(()=>{zn(window,"resize",n)})}const qn=N({__name:"page-layout",setup(a){const t=re(),d=$(()=>t.getCacheList);return(n,r)=>{const p=se("router-view");return _(),w(p,null,{default:o(({Component:c,route:v})=>[e(Eo,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[v.meta.ignoreCache?(_(),w(fe(c),{key:v.fullPath})):(_(),w(Lo,{key:1,include:d.value},[(_(),w(fe(c),{key:v.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),Wn={key:0,class:"layout-navbar"},Gn={class:"menu-wrapper"},Jn="60px",Qn=N({__name:"default-layout",setup(a){const t=Se({account:"",nickname:"",password:"",password2:"",motto:""}),d=async()=>{const l=await he.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,tab:"login",keep:!1});l.code==1&&c.setInfo({showLogin:!1,name:l.data.userInfo.nickname,accountId:l.data.userInfo.token})},n=async()=>{if(t.password==""||t.account==""||t.nickname==""){ee.error({content:"\u7528\u6237\u540D\u3001\u6635\u79F0\u53CA\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",duration:5*1e3});return}if(t.password!=t.password2){ee.error({content:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4",duration:5*1e3});return}const l=await he.post("https://k5ws.vicicode.cn/api/user/checkIn?server=1",{username:t.account,password:t.password,nickname:t.nickname,motto:t.motto,tab:"register"});l.code==1&&c.setInfo({showRegister:!1,name:t.nickname,accountId:l.data.userInfo.token})},r=A(!1),p=G(),c=ge(),v=te(),I=oe(),y=ye();Nn(!0);const E=$(()=>p.navbar),C=$(()=>p.menu&&!p.topMenu),M=$(()=>p.hideMenu),m=$(()=>p.footer),u=$(()=>p.menuCollapse?48:p.menuWidth),f=$(()=>p.menuCollapse),s=$(()=>{const l=C.value&&!M.value?{paddingLeft:`${u.value}px`}:{},k=E.value?{paddingTop:Jn}:{};return{...l,...k}}),S=l=>{!r.value||p.updateSettings({menuCollapse:l})};Ee(()=>c.role,l=>{l&&!y.accessRouter(I)&&v.push({name:"notFound"})});const b=A(!1),D=()=>{b.value=!1};return Fo("toggleDrawerMenu",()=>{b.value=!b.value}),Fe(()=>{r.value=!0}),(l,k)=>{const i=se("desktop-icon"),O=Do,F=Io,B=se("lock-on-icon"),q=Mo,T=Ho,X=To,W=ao,V=oo,Z=so,x=no;return _(),w(x,{class:we(["layout",{mobile:g(p).hideMenu}])},{default:o(()=>[e(X,{visible:g(c).showLogin,"onUpdate:visible":k[2]||(k[2]=L=>g(c).showLogin=L),attach:"body",header:l.$t("global.login"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(T,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:d},{default:o(()=>[e(F,{name:"account"},{default:o(()=>[e(O,{modelValue:t.account,"onUpdate:modelValue":k[0]||(k[0]=L=>t.account=L),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(i)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,{name:"password"},{default:o(()=>[e(O,{modelValue:t.password,"onUpdate:modelValue":k[1]||(k[1]=L=>t.password=L),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,null,{default:o(()=>[e(q,{theme:"primary",type:"submit",block:""},{default:o(()=>[j(H(l.$t("global.login")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),e(X,{visible:g(c).showRegister,"onUpdate:visible":k[8]||(k[8]=L=>g(c).showRegister=L),attach:"body",header:l.$t("global.register"),"destroy-on-close":"",footer:!1},{body:o(()=>[e(T,{ref:"form",data:t,colon:!0,"label-width":0,onSubmit:n},{default:o(()=>[e(F,{name:"account"},{default:o(()=>[e(O,{modelValue:t.account,"onUpdate:modelValue":k[3]||(k[3]=L=>t.account=L),clearable:"",placeholder:l.$t("global.username")},{"prefix-icon":o(()=>[e(i)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,{name:"nickname"},{default:o(()=>[e(O,{modelValue:t.nickname,"onUpdate:modelValue":k[4]||(k[4]=L=>t.nickname=L),clearable:"",placeholder:l.$t("global.nickname")},{"prefix-icon":o(()=>[e(i)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,{name:"password"},{default:o(()=>[e(O,{modelValue:t.password,"onUpdate:modelValue":k[5]||(k[5]=L=>t.password=L),type:"password",clearable:"",placeholder:l.$t("global.password")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,{name:"password2"},{default:o(()=>[e(O,{modelValue:t.password2,"onUpdate:modelValue":k[6]||(k[6]=L=>t.password2=L),type:"password",clearable:"",placeholder:l.$t("global.password2")},{"prefix-icon":o(()=>[e(B)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,{name:"motto"},{default:o(()=>[e(O,{modelValue:t.motto,"onUpdate:modelValue":k[7]||(k[7]=L=>t.motto=L),clearable:"",placeholder:l.$t("global.motto")},{"prefix-icon":o(()=>[e(i)]),_:1},8,["modelValue","placeholder"])]),_:1}),e(F,null,{default:o(()=>[e(q,{theme:"primary",type:"submit",block:""},{default:o(()=>[j(H(l.$t("global.register")),1)]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"]),E.value?(_(),U("div",Wn,[e(kn)])):R("",!0),e(x,null,{default:o(()=>[e(x,null,{default:o(()=>[C.value?z((_(),w(W,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:f.value,collapsible:!0,width:u.value,style:me({paddingTop:E.value?"60px":""}),"hide-trigger":!0,onCollapse:S},{default:o(()=>[h("div",Gn,[e(le)])]),_:1},8,["collapsed","width","style"])),[[K,!M.value]]):R("",!0),M.value?(_(),w(V,{key:1,visible:b.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:D,title:"K5Web"},{default:o(()=>[e(le)]),_:1},8,["visible"])):R("",!0),e(x,{class:"layout-content",style:me(s.value)},{default:o(()=>[g(p).tabBar?(_(),w(Un,{key:0})):R("",!0),e(Z,null,{default:o(()=>[e(qn)]),_:1}),m.value?(_(),w(wn,{key:1})):R("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const ja=J(Qn,[["__scopeId","data-v-08e5feb2"]]);export{ja as default};
